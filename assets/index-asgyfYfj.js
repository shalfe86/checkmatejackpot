var w0=Object.defineProperty;var x0=(e,t,r)=>t in e?w0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var fe=(e,t,r)=>x0(e,typeof t!="symbol"?t+"":t,r);function _0(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function b0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Kf={exports:{}},_a={},Vf={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vi=Symbol.for("react.element"),k0=Symbol.for("react.portal"),S0=Symbol.for("react.fragment"),j0=Symbol.for("react.strict_mode"),E0=Symbol.for("react.profiler"),N0=Symbol.for("react.provider"),C0=Symbol.for("react.context"),T0=Symbol.for("react.forward_ref"),P0=Symbol.for("react.suspense"),R0=Symbol.for("react.memo"),A0=Symbol.for("react.lazy"),Dd=Symbol.iterator;function O0(e){return e===null||typeof e!="object"?null:(e=Dd&&e[Dd]||e["@@iterator"],typeof e=="function"?e:null)}var Hf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gf=Object.assign,Jf={};function Os(e,t,r){this.props=e,this.context=t,this.refs=Jf,this.updater=r||Hf}Os.prototype.isReactComponent={};Os.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Os.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Qf(){}Qf.prototype=Os.prototype;function au(e,t,r){this.props=e,this.context=t,this.refs=Jf,this.updater=r||Hf}var lu=au.prototype=new Qf;lu.constructor=au;Gf(lu,Os.prototype);lu.isPureReactComponent=!0;var zd=Array.isArray,Yf=Object.prototype.hasOwnProperty,cu={current:null},Xf={key:!0,ref:!0,__self:!0,__source:!0};function Zf(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Yf.call(t,n)&&!Xf.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Vi,type:e,key:i,ref:o,props:s,_owner:cu.current}}function I0(e,t){return{$$typeof:Vi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function uu(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vi}function $0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Fd=/\/+/g;function Ha(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$0(""+e.key):t.toString(36)}function Eo(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Vi:case k0:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Ha(o,0):n,zd(s)?(r="",e!=null&&(r=e.replace(Fd,"$&/")+"/"),Eo(s,t,r,"",function(u){return u})):s!=null&&(uu(s)&&(s=I0(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Fd,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",zd(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Ha(i,l);o+=Eo(i,t,r,c,s)}else if(c=O0(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Ha(i,l++),o+=Eo(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ro(e,t,r){if(e==null)return e;var n=[],s=0;return Eo(e,n,"","",function(i){return t.call(r,i,s++)}),n}function L0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var at={current:null},No={transition:null},M0={ReactCurrentDispatcher:at,ReactCurrentBatchConfig:No,ReactCurrentOwner:cu};function ep(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:ro,forEach:function(e,t,r){ro(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ro(e,function(){t++}),t},toArray:function(e){return ro(e,function(t){return t})||[]},only:function(e){if(!uu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Z.Component=Os;Z.Fragment=S0;Z.Profiler=E0;Z.PureComponent=au;Z.StrictMode=j0;Z.Suspense=P0;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M0;Z.act=ep;Z.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Gf({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=cu.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Yf.call(t,c)&&!Xf.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Vi,type:e.type,key:s,ref:i,props:n,_owner:o}};Z.createContext=function(e){return e={$$typeof:C0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:N0,_context:e},e.Consumer=e};Z.createElement=Zf;Z.createFactory=function(e){var t=Zf.bind(null,e);return t.type=e,t};Z.createRef=function(){return{current:null}};Z.forwardRef=function(e){return{$$typeof:T0,render:e}};Z.isValidElement=uu;Z.lazy=function(e){return{$$typeof:A0,_payload:{_status:-1,_result:e},_init:L0}};Z.memo=function(e,t){return{$$typeof:R0,type:e,compare:t===void 0?null:t}};Z.startTransition=function(e){var t=No.transition;No.transition={};try{e()}finally{No.transition=t}};Z.unstable_act=ep;Z.useCallback=function(e,t){return at.current.useCallback(e,t)};Z.useContext=function(e){return at.current.useContext(e)};Z.useDebugValue=function(){};Z.useDeferredValue=function(e){return at.current.useDeferredValue(e)};Z.useEffect=function(e,t){return at.current.useEffect(e,t)};Z.useId=function(){return at.current.useId()};Z.useImperativeHandle=function(e,t,r){return at.current.useImperativeHandle(e,t,r)};Z.useInsertionEffect=function(e,t){return at.current.useInsertionEffect(e,t)};Z.useLayoutEffect=function(e,t){return at.current.useLayoutEffect(e,t)};Z.useMemo=function(e,t){return at.current.useMemo(e,t)};Z.useReducer=function(e,t,r){return at.current.useReducer(e,t,r)};Z.useRef=function(e){return at.current.useRef(e)};Z.useState=function(e){return at.current.useState(e)};Z.useSyncExternalStore=function(e,t,r){return at.current.useSyncExternalStore(e,t,r)};Z.useTransition=function(){return at.current.useTransition()};Z.version="18.3.1";Vf.exports=Z;var k=Vf.exports;const yt=b0(k),U0=_0({__proto__:null,default:yt},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0=k,z0=Symbol.for("react.element"),F0=Symbol.for("react.fragment"),B0=Object.prototype.hasOwnProperty,W0=D0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,q0={key:!0,ref:!0,__self:!0,__source:!0};function tp(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)B0.call(t,n)&&!q0.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:z0,type:e,key:i,ref:o,props:s,_owner:W0.current}}_a.Fragment=F0;_a.jsx=tp;_a.jsxs=tp;Kf.exports=_a;var a=Kf.exports,ql={},rp={exports:{}},Rt={},np={exports:{}},sp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,D){var V=A.length;A.push(D);e:for(;0<V;){var X=V-1>>>1,Ee=A[X];if(0<s(Ee,D))A[X]=D,A[V]=Ee,V=X;else break e}}function r(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var D=A[0],V=A.pop();if(V!==D){A[0]=V;e:for(var X=0,Ee=A.length,Bt=Ee>>>1;X<Bt;){var re=2*(X+1)-1,Qe=A[re],Wt=re+1,ur=A[Wt];if(0>s(Qe,V))Wt<Ee&&0>s(ur,Qe)?(A[X]=ur,A[Wt]=V,X=Wt):(A[X]=Qe,A[re]=V,X=re);else if(Wt<Ee&&0>s(ur,V))A[X]=ur,A[Wt]=V,X=Wt;else break e}}return D}function s(A,D){var V=A.sortIndex-D.sortIndex;return V!==0?V:A.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,y=!1,v=!1,m=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(A){for(var D=r(u);D!==null;){if(D.callback===null)n(u);else if(D.startTime<=A)n(u),D.sortIndex=D.expirationTime,t(c,D);else break;D=r(u)}}function _(A){if(m=!1,w(A),!v)if(r(c)!==null)v=!0,me(N);else{var D=r(u);D!==null&&he(_,D.startTime-A)}}function N(A,D){v=!1,m&&(m=!1,g(T),T=-1),y=!0;var V=f;try{for(w(D),h=r(c);h!==null&&(!(h.expirationTime>D)||A&&!ee());){var X=h.callback;if(typeof X=="function"){h.callback=null,f=h.priorityLevel;var Ee=X(h.expirationTime<=D);D=e.unstable_now(),typeof Ee=="function"?h.callback=Ee:h===r(c)&&n(c),w(D)}else n(c);h=r(c)}if(h!==null)var Bt=!0;else{var re=r(u);re!==null&&he(_,re.startTime-D),Bt=!1}return Bt}finally{h=null,f=V,y=!1}}var C=!1,R=null,T=-1,q=5,L=-1;function ee(){return!(e.unstable_now()-L<q)}function G(){if(R!==null){var A=e.unstable_now();L=A;var D=!0;try{D=R(!0,A)}finally{D?ct():(C=!1,R=null)}}else C=!1}var ct;if(typeof p=="function")ct=function(){p(G)};else if(typeof MessageChannel<"u"){var _t=new MessageChannel,cr=_t.port2;_t.port1.onmessage=G,ct=function(){cr.postMessage(null)}}else ct=function(){x(G,0)};function me(A){R=A,C||(C=!0,ct())}function he(A,D){T=x(function(){A(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,me(N))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(A){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var V=f;f=D;try{return A()}finally{f=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,D){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var V=f;f=A;try{return D()}finally{f=V}},e.unstable_scheduleCallback=function(A,D,V){var X=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?X+V:X):V=X,A){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=V+Ee,A={id:d++,callback:D,priorityLevel:A,startTime:V,expirationTime:Ee,sortIndex:-1},V>X?(A.sortIndex=V,t(u,A),r(c)===null&&A===r(u)&&(m?(g(T),T=-1):m=!0,he(_,V-X))):(A.sortIndex=Ee,t(c,A),v||y||(v=!0,me(N))),A},e.unstable_shouldYield=ee,e.unstable_wrapCallback=function(A){var D=f;return function(){var V=f;f=D;try{return A.apply(this,arguments)}finally{f=V}}}})(sp);np.exports=sp;var K0=np.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0=k,Pt=K0;function P(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ip=new Set,yi={};function Ln(e,t){ks(e,t),ks(e+"Capture",t)}function ks(e,t){for(yi[e]=t,e=0;e<t.length;e++)ip.add(t[e])}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kl=Object.prototype.hasOwnProperty,H0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bd={},Wd={};function G0(e){return Kl.call(Wd,e)?!0:Kl.call(Bd,e)?!1:H0.test(e)?Wd[e]=!0:(Bd[e]=!0,!1)}function J0(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Q0(e,t,r,n){if(t===null||typeof t>"u"||J0(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function lt(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Je[e]=new lt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Je[t]=new lt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Je[e]=new lt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Je[e]=new lt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Je[e]=new lt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Je[e]=new lt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Je[e]=new lt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Je[e]=new lt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Je[e]=new lt(e,5,!1,e.toLowerCase(),null,!1,!1)});var du=/[\-:]([a-z])/g;function hu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(du,hu);Je[t]=new lt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(du,hu);Je[t]=new lt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(du,hu);Je[t]=new lt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Je[e]=new lt(e,1,!1,e.toLowerCase(),null,!1,!1)});Je.xlinkHref=new lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Je[e]=new lt(e,1,!1,e.toLowerCase(),null,!0,!0)});function fu(e,t,r,n){var s=Je.hasOwnProperty(t)?Je[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Q0(t,r,s,n)&&(r=null),n||s===null?G0(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var jr=V0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,no=Symbol.for("react.element"),ts=Symbol.for("react.portal"),rs=Symbol.for("react.fragment"),pu=Symbol.for("react.strict_mode"),Vl=Symbol.for("react.profiler"),op=Symbol.for("react.provider"),ap=Symbol.for("react.context"),mu=Symbol.for("react.forward_ref"),Hl=Symbol.for("react.suspense"),Gl=Symbol.for("react.suspense_list"),gu=Symbol.for("react.memo"),Or=Symbol.for("react.lazy"),lp=Symbol.for("react.offscreen"),qd=Symbol.iterator;function Ds(e){return e===null||typeof e!="object"?null:(e=qd&&e[qd]||e["@@iterator"],typeof e=="function"?e:null)}var xe=Object.assign,Ga;function ei(e){if(Ga===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ga=t&&t[1]||""}return`
`+Ga+e}var Ja=!1;function Qa(e,t){if(!e||Ja)return"";Ja=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Ja=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ei(e):""}function Y0(e){switch(e.tag){case 5:return ei(e.type);case 16:return ei("Lazy");case 13:return ei("Suspense");case 19:return ei("SuspenseList");case 0:case 2:case 15:return e=Qa(e.type,!1),e;case 11:return e=Qa(e.type.render,!1),e;case 1:return e=Qa(e.type,!0),e;default:return""}}function Jl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case rs:return"Fragment";case ts:return"Portal";case Vl:return"Profiler";case pu:return"StrictMode";case Hl:return"Suspense";case Gl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ap:return(e.displayName||"Context")+".Consumer";case op:return(e._context.displayName||"Context")+".Provider";case mu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gu:return t=e.displayName||null,t!==null?t:Jl(e.type)||"Memo";case Or:t=e._payload,e=e._init;try{return Jl(e(t))}catch{}}return null}function X0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jl(t);case 8:return t===pu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Xr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function cp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Z0(e){var t=cp(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function so(e){e._valueTracker||(e._valueTracker=Z0(e))}function up(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=cp(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function zo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ql(e,t){var r=t.checked;return xe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Kd(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Xr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function dp(e,t){t=t.checked,t!=null&&fu(e,"checked",t,!1)}function Yl(e,t){dp(e,t);var r=Xr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xl(e,t.type,r):t.hasOwnProperty("defaultValue")&&Xl(e,t.type,Xr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Vd(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Xl(e,t,r){(t!=="number"||zo(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ti=Array.isArray;function ps(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Xr(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Zl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(P(91));return xe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Hd(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(P(92));if(ti(r)){if(1<r.length)throw Error(P(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Xr(r)}}function hp(e,t){var r=Xr(t.value),n=Xr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Gd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function fp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ec(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?fp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var io,pp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(io=io||document.createElement("div"),io.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=io.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function wi(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var oi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ey=["Webkit","ms","Moz","O"];Object.keys(oi).forEach(function(e){ey.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),oi[t]=oi[e]})});function mp(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||oi.hasOwnProperty(e)&&oi[e]?(""+t).trim():t+"px"}function gp(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=mp(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var ty=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tc(e,t){if(t){if(ty[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(P(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(P(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(P(61))}if(t.style!=null&&typeof t.style!="object")throw Error(P(62))}}function rc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nc=null;function vu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var sc=null,ms=null,gs=null;function Jd(e){if(e=Ji(e)){if(typeof sc!="function")throw Error(P(280));var t=e.stateNode;t&&(t=Ea(t),sc(e.stateNode,e.type,t))}}function vp(e){ms?gs?gs.push(e):gs=[e]:ms=e}function yp(){if(ms){var e=ms,t=gs;if(gs=ms=null,Jd(e),t)for(e=0;e<t.length;e++)Jd(t[e])}}function wp(e,t){return e(t)}function xp(){}var Ya=!1;function _p(e,t,r){if(Ya)return e(t,r);Ya=!0;try{return wp(e,t,r)}finally{Ya=!1,(ms!==null||gs!==null)&&(xp(),yp())}}function xi(e,t){var r=e.stateNode;if(r===null)return null;var n=Ea(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(P(231,t,typeof r));return r}var ic=!1;if(_r)try{var zs={};Object.defineProperty(zs,"passive",{get:function(){ic=!0}}),window.addEventListener("test",zs,zs),window.removeEventListener("test",zs,zs)}catch{ic=!1}function ry(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var ai=!1,Fo=null,Bo=!1,oc=null,ny={onError:function(e){ai=!0,Fo=e}};function sy(e,t,r,n,s,i,o,l,c){ai=!1,Fo=null,ry.apply(ny,arguments)}function iy(e,t,r,n,s,i,o,l,c){if(sy.apply(this,arguments),ai){if(ai){var u=Fo;ai=!1,Fo=null}else throw Error(P(198));Bo||(Bo=!0,oc=u)}}function Mn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function bp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Qd(e){if(Mn(e)!==e)throw Error(P(188))}function oy(e){var t=e.alternate;if(!t){if(t=Mn(e),t===null)throw Error(P(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Qd(s),e;if(i===n)return Qd(s),t;i=i.sibling}throw Error(P(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(P(189))}}if(r.alternate!==n)throw Error(P(190))}if(r.tag!==3)throw Error(P(188));return r.stateNode.current===r?e:t}function kp(e){return e=oy(e),e!==null?Sp(e):null}function Sp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Sp(e);if(t!==null)return t;e=e.sibling}return null}var jp=Pt.unstable_scheduleCallback,Yd=Pt.unstable_cancelCallback,ay=Pt.unstable_shouldYield,ly=Pt.unstable_requestPaint,Ne=Pt.unstable_now,cy=Pt.unstable_getCurrentPriorityLevel,yu=Pt.unstable_ImmediatePriority,Ep=Pt.unstable_UserBlockingPriority,Wo=Pt.unstable_NormalPriority,uy=Pt.unstable_LowPriority,Np=Pt.unstable_IdlePriority,ba=null,or=null;function dy(e){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(ba,e,void 0,(e.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:py,hy=Math.log,fy=Math.LN2;function py(e){return e>>>=0,e===0?32:31-(hy(e)/fy|0)|0}var oo=64,ao=4194304;function ri(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qo(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=ri(l):(i&=o,i!==0&&(n=ri(i)))}else o=r&~s,o!==0?n=ri(o):i!==0&&(n=ri(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Xt(t),s=1<<r,n|=e[r],t&=~s;return n}function my(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gy(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Xt(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=my(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function ac(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Cp(){var e=oo;return oo<<=1,!(oo&4194240)&&(oo=64),e}function Xa(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Hi(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Xt(t),e[t]=r}function vy(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Xt(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function wu(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Xt(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var se=0;function Tp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Pp,xu,Rp,Ap,Op,lc=!1,lo=[],Wr=null,qr=null,Kr=null,_i=new Map,bi=new Map,Mr=[],yy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xd(e,t){switch(e){case"focusin":case"focusout":Wr=null;break;case"dragenter":case"dragleave":qr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":_i.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bi.delete(t.pointerId)}}function Fs(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ji(t),t!==null&&xu(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function wy(e,t,r,n,s){switch(t){case"focusin":return Wr=Fs(Wr,e,t,r,n,s),!0;case"dragenter":return qr=Fs(qr,e,t,r,n,s),!0;case"mouseover":return Kr=Fs(Kr,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return _i.set(i,Fs(_i.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,bi.set(i,Fs(bi.get(i)||null,e,t,r,n,s)),!0}return!1}function Ip(e){var t=_n(e.target);if(t!==null){var r=Mn(t);if(r!==null){if(t=r.tag,t===13){if(t=bp(r),t!==null){e.blockedOn=t,Op(e.priority,function(){Rp(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Co(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=cc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);nc=n,r.target.dispatchEvent(n),nc=null}else return t=Ji(r),t!==null&&xu(t),e.blockedOn=r,!1;t.shift()}return!0}function Zd(e,t,r){Co(e)&&r.delete(t)}function xy(){lc=!1,Wr!==null&&Co(Wr)&&(Wr=null),qr!==null&&Co(qr)&&(qr=null),Kr!==null&&Co(Kr)&&(Kr=null),_i.forEach(Zd),bi.forEach(Zd)}function Bs(e,t){e.blockedOn===t&&(e.blockedOn=null,lc||(lc=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,xy)))}function ki(e){function t(s){return Bs(s,e)}if(0<lo.length){Bs(lo[0],e);for(var r=1;r<lo.length;r++){var n=lo[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Wr!==null&&Bs(Wr,e),qr!==null&&Bs(qr,e),Kr!==null&&Bs(Kr,e),_i.forEach(t),bi.forEach(t),r=0;r<Mr.length;r++)n=Mr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Mr.length&&(r=Mr[0],r.blockedOn===null);)Ip(r),r.blockedOn===null&&Mr.shift()}var vs=jr.ReactCurrentBatchConfig,Ko=!0;function _y(e,t,r,n){var s=se,i=vs.transition;vs.transition=null;try{se=1,_u(e,t,r,n)}finally{se=s,vs.transition=i}}function by(e,t,r,n){var s=se,i=vs.transition;vs.transition=null;try{se=4,_u(e,t,r,n)}finally{se=s,vs.transition=i}}function _u(e,t,r,n){if(Ko){var s=cc(e,t,r,n);if(s===null)ll(e,t,n,Vo,r),Xd(e,n);else if(wy(s,e,t,r,n))n.stopPropagation();else if(Xd(e,n),t&4&&-1<yy.indexOf(e)){for(;s!==null;){var i=Ji(s);if(i!==null&&Pp(i),i=cc(e,t,r,n),i===null&&ll(e,t,n,Vo,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else ll(e,t,n,null,r)}}var Vo=null;function cc(e,t,r,n){if(Vo=null,e=vu(n),e=_n(e),e!==null)if(t=Mn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=bp(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Vo=e,null}function $p(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cy()){case yu:return 1;case Ep:return 4;case Wo:case uy:return 16;case Np:return 536870912;default:return 16}default:return 16}}var zr=null,bu=null,To=null;function Lp(){if(To)return To;var e,t=bu,r=t.length,n,s="value"in zr?zr.value:zr.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return To=s.slice(e,1<n?1-n:void 0)}function Po(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function co(){return!0}function eh(){return!1}function At(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?co:eh,this.isPropagationStopped=eh,this}return xe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=co)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=co)},persist:function(){},isPersistent:co}),t}var Is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ku=At(Is),Gi=xe({},Is,{view:0,detail:0}),ky=At(Gi),Za,el,Ws,ka=xe({},Gi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Su,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ws&&(Ws&&e.type==="mousemove"?(Za=e.screenX-Ws.screenX,el=e.screenY-Ws.screenY):el=Za=0,Ws=e),Za)},movementY:function(e){return"movementY"in e?e.movementY:el}}),th=At(ka),Sy=xe({},ka,{dataTransfer:0}),jy=At(Sy),Ey=xe({},Gi,{relatedTarget:0}),tl=At(Ey),Ny=xe({},Is,{animationName:0,elapsedTime:0,pseudoElement:0}),Cy=At(Ny),Ty=xe({},Is,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Py=At(Ty),Ry=xe({},Is,{data:0}),rh=At(Ry),Ay={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Oy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $y(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Iy[e])?!!t[e]:!1}function Su(){return $y}var Ly=xe({},Gi,{key:function(e){if(e.key){var t=Ay[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Po(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Oy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Su,charCode:function(e){return e.type==="keypress"?Po(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Po(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),My=At(Ly),Uy=xe({},ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nh=At(Uy),Dy=xe({},Gi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Su}),zy=At(Dy),Fy=xe({},Is,{propertyName:0,elapsedTime:0,pseudoElement:0}),By=At(Fy),Wy=xe({},ka,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qy=At(Wy),Ky=[9,13,27,32],ju=_r&&"CompositionEvent"in window,li=null;_r&&"documentMode"in document&&(li=document.documentMode);var Vy=_r&&"TextEvent"in window&&!li,Mp=_r&&(!ju||li&&8<li&&11>=li),sh=" ",ih=!1;function Up(e,t){switch(e){case"keyup":return Ky.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ns=!1;function Hy(e,t){switch(e){case"compositionend":return Dp(t);case"keypress":return t.which!==32?null:(ih=!0,sh);case"textInput":return e=t.data,e===sh&&ih?null:e;default:return null}}function Gy(e,t){if(ns)return e==="compositionend"||!ju&&Up(e,t)?(e=Lp(),To=bu=zr=null,ns=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mp&&t.locale!=="ko"?null:t.data;default:return null}}var Jy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Jy[e.type]:t==="textarea"}function zp(e,t,r,n){vp(n),t=Ho(t,"onChange"),0<t.length&&(r=new ku("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ci=null,Si=null;function Qy(e){Yp(e,0)}function Sa(e){var t=os(e);if(up(t))return e}function Yy(e,t){if(e==="change")return t}var Fp=!1;if(_r){var rl;if(_r){var nl="oninput"in document;if(!nl){var ah=document.createElement("div");ah.setAttribute("oninput","return;"),nl=typeof ah.oninput=="function"}rl=nl}else rl=!1;Fp=rl&&(!document.documentMode||9<document.documentMode)}function lh(){ci&&(ci.detachEvent("onpropertychange",Bp),Si=ci=null)}function Bp(e){if(e.propertyName==="value"&&Sa(Si)){var t=[];zp(t,Si,e,vu(e)),_p(Qy,t)}}function Xy(e,t,r){e==="focusin"?(lh(),ci=t,Si=r,ci.attachEvent("onpropertychange",Bp)):e==="focusout"&&lh()}function Zy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sa(Si)}function ew(e,t){if(e==="click")return Sa(t)}function tw(e,t){if(e==="input"||e==="change")return Sa(t)}function rw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var er=typeof Object.is=="function"?Object.is:rw;function ji(e,t){if(er(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Kl.call(t,s)||!er(e[s],t[s]))return!1}return!0}function ch(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function uh(e,t){var r=ch(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ch(r)}}function Wp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qp(){for(var e=window,t=zo();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=zo(e.document)}return t}function Eu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function nw(e){var t=qp(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Wp(r.ownerDocument.documentElement,r)){if(n!==null&&Eu(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=uh(r,i);var o=uh(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sw=_r&&"documentMode"in document&&11>=document.documentMode,ss=null,uc=null,ui=null,dc=!1;function dh(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;dc||ss==null||ss!==zo(n)||(n=ss,"selectionStart"in n&&Eu(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ui&&ji(ui,n)||(ui=n,n=Ho(uc,"onSelect"),0<n.length&&(t=new ku("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ss)))}function uo(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var is={animationend:uo("Animation","AnimationEnd"),animationiteration:uo("Animation","AnimationIteration"),animationstart:uo("Animation","AnimationStart"),transitionend:uo("Transition","TransitionEnd")},sl={},Kp={};_r&&(Kp=document.createElement("div").style,"AnimationEvent"in window||(delete is.animationend.animation,delete is.animationiteration.animation,delete is.animationstart.animation),"TransitionEvent"in window||delete is.transitionend.transition);function ja(e){if(sl[e])return sl[e];if(!is[e])return e;var t=is[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Kp)return sl[e]=t[r];return e}var Vp=ja("animationend"),Hp=ja("animationiteration"),Gp=ja("animationstart"),Jp=ja("transitionend"),Qp=new Map,hh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tn(e,t){Qp.set(e,t),Ln(t,[e])}for(var il=0;il<hh.length;il++){var ol=hh[il],iw=ol.toLowerCase(),ow=ol[0].toUpperCase()+ol.slice(1);tn(iw,"on"+ow)}tn(Vp,"onAnimationEnd");tn(Hp,"onAnimationIteration");tn(Gp,"onAnimationStart");tn("dblclick","onDoubleClick");tn("focusin","onFocus");tn("focusout","onBlur");tn(Jp,"onTransitionEnd");ks("onMouseEnter",["mouseout","mouseover"]);ks("onMouseLeave",["mouseout","mouseover"]);ks("onPointerEnter",["pointerout","pointerover"]);ks("onPointerLeave",["pointerout","pointerover"]);Ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ln("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ni));function fh(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,iy(n,t,void 0,e),e.currentTarget=null}function Yp(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;fh(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;fh(s,l,u),i=c}}}if(Bo)throw e=oc,Bo=!1,oc=null,e}function ce(e,t){var r=t[gc];r===void 0&&(r=t[gc]=new Set);var n=e+"__bubble";r.has(n)||(Xp(t,e,2,!1),r.add(n))}function al(e,t,r){var n=0;t&&(n|=4),Xp(r,e,n,t)}var ho="_reactListening"+Math.random().toString(36).slice(2);function Ei(e){if(!e[ho]){e[ho]=!0,ip.forEach(function(r){r!=="selectionchange"&&(aw.has(r)||al(r,!1,e),al(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ho]||(t[ho]=!0,al("selectionchange",!1,t))}}function Xp(e,t,r,n){switch($p(t)){case 1:var s=_y;break;case 4:s=by;break;default:s=_u}r=s.bind(null,t,r,e),s=void 0,!ic||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function ll(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=_n(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}_p(function(){var u=i,d=vu(r),h=[];e:{var f=Qp.get(e);if(f!==void 0){var y=ku,v=e;switch(e){case"keypress":if(Po(r)===0)break e;case"keydown":case"keyup":y=My;break;case"focusin":v="focus",y=tl;break;case"focusout":v="blur",y=tl;break;case"beforeblur":case"afterblur":y=tl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=th;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=jy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=zy;break;case Vp:case Hp:case Gp:y=Cy;break;case Jp:y=By;break;case"scroll":y=ky;break;case"wheel":y=qy;break;case"copy":case"cut":case"paste":y=Py;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=nh}var m=(t&4)!==0,x=!m&&e==="scroll",g=m?f!==null?f+"Capture":null:f;m=[];for(var p=u,w;p!==null;){w=p;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,g!==null&&(_=xi(p,g),_!=null&&m.push(Ni(p,_,w)))),x)break;p=p.return}0<m.length&&(f=new y(f,v,null,r,d),h.push({event:f,listeners:m}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",f&&r!==nc&&(v=r.relatedTarget||r.fromElement)&&(_n(v)||v[br]))break e;if((y||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,y?(v=r.relatedTarget||r.toElement,y=u,v=v?_n(v):null,v!==null&&(x=Mn(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(m=th,_="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(m=nh,_="onPointerLeave",g="onPointerEnter",p="pointer"),x=y==null?f:os(y),w=v==null?f:os(v),f=new m(_,p+"leave",y,r,d),f.target=x,f.relatedTarget=w,_=null,_n(d)===u&&(m=new m(g,p+"enter",v,r,d),m.target=w,m.relatedTarget=x,_=m),x=_,y&&v)t:{for(m=y,g=v,p=0,w=m;w;w=Bn(w))p++;for(w=0,_=g;_;_=Bn(_))w++;for(;0<p-w;)m=Bn(m),p--;for(;0<w-p;)g=Bn(g),w--;for(;p--;){if(m===g||g!==null&&m===g.alternate)break t;m=Bn(m),g=Bn(g)}m=null}else m=null;y!==null&&ph(h,f,y,m,!1),v!==null&&x!==null&&ph(h,x,v,m,!0)}}e:{if(f=u?os(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var N=Yy;else if(oh(f))if(Fp)N=tw;else{N=Zy;var C=Xy}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=ew);if(N&&(N=N(e,u))){zp(h,N,r,d);break e}C&&C(e,f,u),e==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Xl(f,"number",f.value)}switch(C=u?os(u):window,e){case"focusin":(oh(C)||C.contentEditable==="true")&&(ss=C,uc=u,ui=null);break;case"focusout":ui=uc=ss=null;break;case"mousedown":dc=!0;break;case"contextmenu":case"mouseup":case"dragend":dc=!1,dh(h,r,d);break;case"selectionchange":if(sw)break;case"keydown":case"keyup":dh(h,r,d)}var R;if(ju)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ns?Up(e,r)&&(T="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(Mp&&r.locale!=="ko"&&(ns||T!=="onCompositionStart"?T==="onCompositionEnd"&&ns&&(R=Lp()):(zr=d,bu="value"in zr?zr.value:zr.textContent,ns=!0)),C=Ho(u,T),0<C.length&&(T=new rh(T,e,null,r,d),h.push({event:T,listeners:C}),R?T.data=R:(R=Dp(r),R!==null&&(T.data=R)))),(R=Vy?Hy(e,r):Gy(e,r))&&(u=Ho(u,"onBeforeInput"),0<u.length&&(d=new rh("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=R))}Yp(h,t)})}function Ni(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ho(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=xi(e,r),i!=null&&n.unshift(Ni(e,i,s)),i=xi(e,t),i!=null&&n.push(Ni(e,i,s))),e=e.return}return n}function Bn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ph(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=xi(r,i),c!=null&&o.unshift(Ni(r,c,l))):s||(c=xi(r,i),c!=null&&o.push(Ni(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var lw=/\r\n?/g,cw=/\u0000|\uFFFD/g;function mh(e){return(typeof e=="string"?e:""+e).replace(lw,`
`).replace(cw,"")}function fo(e,t,r){if(t=mh(t),mh(e)!==t&&r)throw Error(P(425))}function Go(){}var hc=null,fc=null;function pc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var mc=typeof setTimeout=="function"?setTimeout:void 0,uw=typeof clearTimeout=="function"?clearTimeout:void 0,gh=typeof Promise=="function"?Promise:void 0,dw=typeof queueMicrotask=="function"?queueMicrotask:typeof gh<"u"?function(e){return gh.resolve(null).then(e).catch(hw)}:mc;function hw(e){setTimeout(function(){throw e})}function cl(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),ki(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);ki(t)}function Vr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var $s=Math.random().toString(36).slice(2),ir="__reactFiber$"+$s,Ci="__reactProps$"+$s,br="__reactContainer$"+$s,gc="__reactEvents$"+$s,fw="__reactListeners$"+$s,pw="__reactHandles$"+$s;function _n(e){var t=e[ir];if(t)return t;for(var r=e.parentNode;r;){if(t=r[br]||r[ir]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=vh(e);e!==null;){if(r=e[ir])return r;e=vh(e)}return t}e=r,r=e.parentNode}return null}function Ji(e){return e=e[ir]||e[br],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function os(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(P(33))}function Ea(e){return e[Ci]||null}var vc=[],as=-1;function rn(e){return{current:e}}function de(e){0>as||(e.current=vc[as],vc[as]=null,as--)}function ae(e,t){as++,vc[as]=e.current,e.current=t}var Zr={},tt=rn(Zr),pt=rn(!1),Tn=Zr;function Ss(e,t){var r=e.type.contextTypes;if(!r)return Zr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function mt(e){return e=e.childContextTypes,e!=null}function Jo(){de(pt),de(tt)}function yh(e,t,r){if(tt.current!==Zr)throw Error(P(168));ae(tt,t),ae(pt,r)}function Zp(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(P(108,X0(e)||"Unknown",s));return xe({},r,n)}function Qo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Zr,Tn=tt.current,ae(tt,e),ae(pt,pt.current),!0}function wh(e,t,r){var n=e.stateNode;if(!n)throw Error(P(169));r?(e=Zp(e,t,Tn),n.__reactInternalMemoizedMergedChildContext=e,de(pt),de(tt),ae(tt,e)):de(pt),ae(pt,r)}var mr=null,Na=!1,ul=!1;function em(e){mr===null?mr=[e]:mr.push(e)}function mw(e){Na=!0,em(e)}function nn(){if(!ul&&mr!==null){ul=!0;var e=0,t=se;try{var r=mr;for(se=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}mr=null,Na=!1}catch(s){throw mr!==null&&(mr=mr.slice(e+1)),jp(yu,nn),s}finally{se=t,ul=!1}}return null}var ls=[],cs=0,Yo=null,Xo=0,It=[],$t=0,Pn=null,vr=1,yr="";function mn(e,t){ls[cs++]=Xo,ls[cs++]=Yo,Yo=e,Xo=t}function tm(e,t,r){It[$t++]=vr,It[$t++]=yr,It[$t++]=Pn,Pn=e;var n=vr;e=yr;var s=32-Xt(n)-1;n&=~(1<<s),r+=1;var i=32-Xt(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,vr=1<<32-Xt(t)+s|r<<s|n,yr=i+e}else vr=1<<i|r<<s|n,yr=e}function Nu(e){e.return!==null&&(mn(e,1),tm(e,1,0))}function Cu(e){for(;e===Yo;)Yo=ls[--cs],ls[cs]=null,Xo=ls[--cs],ls[cs]=null;for(;e===Pn;)Pn=It[--$t],It[$t]=null,yr=It[--$t],It[$t]=null,vr=It[--$t],It[$t]=null}var Tt=null,Nt=null,pe=!1,Yt=null;function rm(e,t){var r=Mt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function xh(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Tt=e,Nt=Vr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Tt=e,Nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Pn!==null?{id:vr,overflow:yr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Mt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Tt=e,Nt=null,!0):!1;default:return!1}}function yc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function wc(e){if(pe){var t=Nt;if(t){var r=t;if(!xh(e,t)){if(yc(e))throw Error(P(418));t=Vr(r.nextSibling);var n=Tt;t&&xh(e,t)?rm(n,r):(e.flags=e.flags&-4097|2,pe=!1,Tt=e)}}else{if(yc(e))throw Error(P(418));e.flags=e.flags&-4097|2,pe=!1,Tt=e}}}function _h(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Tt=e}function po(e){if(e!==Tt)return!1;if(!pe)return _h(e),pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!pc(e.type,e.memoizedProps)),t&&(t=Nt)){if(yc(e))throw nm(),Error(P(418));for(;t;)rm(e,t),t=Vr(t.nextSibling)}if(_h(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Nt=Vr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Nt=null}}else Nt=Tt?Vr(e.stateNode.nextSibling):null;return!0}function nm(){for(var e=Nt;e;)e=Vr(e.nextSibling)}function js(){Nt=Tt=null,pe=!1}function Tu(e){Yt===null?Yt=[e]:Yt.push(e)}var gw=jr.ReactCurrentBatchConfig;function qs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(P(309));var n=r.stateNode}if(!n)throw Error(P(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(P(284));if(!r._owner)throw Error(P(290,e))}return e}function mo(e,t){throw e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bh(e){var t=e._init;return t(e._payload)}function sm(e){function t(g,p){if(e){var w=g.deletions;w===null?(g.deletions=[p],g.flags|=16):w.push(p)}}function r(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function n(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function s(g,p){return g=Qr(g,p),g.index=0,g.sibling=null,g}function i(g,p,w){return g.index=w,e?(w=g.alternate,w!==null?(w=w.index,w<p?(g.flags|=2,p):w):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,p,w,_){return p===null||p.tag!==6?(p=vl(w,g.mode,_),p.return=g,p):(p=s(p,w),p.return=g,p)}function c(g,p,w,_){var N=w.type;return N===rs?d(g,p,w.props.children,_,w.key):p!==null&&(p.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Or&&bh(N)===p.type)?(_=s(p,w.props),_.ref=qs(g,p,w),_.return=g,_):(_=Mo(w.type,w.key,w.props,null,g.mode,_),_.ref=qs(g,p,w),_.return=g,_)}function u(g,p,w,_){return p===null||p.tag!==4||p.stateNode.containerInfo!==w.containerInfo||p.stateNode.implementation!==w.implementation?(p=yl(w,g.mode,_),p.return=g,p):(p=s(p,w.children||[]),p.return=g,p)}function d(g,p,w,_,N){return p===null||p.tag!==7?(p=En(w,g.mode,_,N),p.return=g,p):(p=s(p,w),p.return=g,p)}function h(g,p,w){if(typeof p=="string"&&p!==""||typeof p=="number")return p=vl(""+p,g.mode,w),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case no:return w=Mo(p.type,p.key,p.props,null,g.mode,w),w.ref=qs(g,null,p),w.return=g,w;case ts:return p=yl(p,g.mode,w),p.return=g,p;case Or:var _=p._init;return h(g,_(p._payload),w)}if(ti(p)||Ds(p))return p=En(p,g.mode,w,null),p.return=g,p;mo(g,p)}return null}function f(g,p,w,_){var N=p!==null?p.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return N!==null?null:l(g,p,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case no:return w.key===N?c(g,p,w,_):null;case ts:return w.key===N?u(g,p,w,_):null;case Or:return N=w._init,f(g,p,N(w._payload),_)}if(ti(w)||Ds(w))return N!==null?null:d(g,p,w,_,null);mo(g,w)}return null}function y(g,p,w,_,N){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(w)||null,l(p,g,""+_,N);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case no:return g=g.get(_.key===null?w:_.key)||null,c(p,g,_,N);case ts:return g=g.get(_.key===null?w:_.key)||null,u(p,g,_,N);case Or:var C=_._init;return y(g,p,w,C(_._payload),N)}if(ti(_)||Ds(_))return g=g.get(w)||null,d(p,g,_,N,null);mo(p,_)}return null}function v(g,p,w,_){for(var N=null,C=null,R=p,T=p=0,q=null;R!==null&&T<w.length;T++){R.index>T?(q=R,R=null):q=R.sibling;var L=f(g,R,w[T],_);if(L===null){R===null&&(R=q);break}e&&R&&L.alternate===null&&t(g,R),p=i(L,p,T),C===null?N=L:C.sibling=L,C=L,R=q}if(T===w.length)return r(g,R),pe&&mn(g,T),N;if(R===null){for(;T<w.length;T++)R=h(g,w[T],_),R!==null&&(p=i(R,p,T),C===null?N=R:C.sibling=R,C=R);return pe&&mn(g,T),N}for(R=n(g,R);T<w.length;T++)q=y(R,g,T,w[T],_),q!==null&&(e&&q.alternate!==null&&R.delete(q.key===null?T:q.key),p=i(q,p,T),C===null?N=q:C.sibling=q,C=q);return e&&R.forEach(function(ee){return t(g,ee)}),pe&&mn(g,T),N}function m(g,p,w,_){var N=Ds(w);if(typeof N!="function")throw Error(P(150));if(w=N.call(w),w==null)throw Error(P(151));for(var C=N=null,R=p,T=p=0,q=null,L=w.next();R!==null&&!L.done;T++,L=w.next()){R.index>T?(q=R,R=null):q=R.sibling;var ee=f(g,R,L.value,_);if(ee===null){R===null&&(R=q);break}e&&R&&ee.alternate===null&&t(g,R),p=i(ee,p,T),C===null?N=ee:C.sibling=ee,C=ee,R=q}if(L.done)return r(g,R),pe&&mn(g,T),N;if(R===null){for(;!L.done;T++,L=w.next())L=h(g,L.value,_),L!==null&&(p=i(L,p,T),C===null?N=L:C.sibling=L,C=L);return pe&&mn(g,T),N}for(R=n(g,R);!L.done;T++,L=w.next())L=y(R,g,T,L.value,_),L!==null&&(e&&L.alternate!==null&&R.delete(L.key===null?T:L.key),p=i(L,p,T),C===null?N=L:C.sibling=L,C=L);return e&&R.forEach(function(G){return t(g,G)}),pe&&mn(g,T),N}function x(g,p,w,_){if(typeof w=="object"&&w!==null&&w.type===rs&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case no:e:{for(var N=w.key,C=p;C!==null;){if(C.key===N){if(N=w.type,N===rs){if(C.tag===7){r(g,C.sibling),p=s(C,w.props.children),p.return=g,g=p;break e}}else if(C.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Or&&bh(N)===C.type){r(g,C.sibling),p=s(C,w.props),p.ref=qs(g,C,w),p.return=g,g=p;break e}r(g,C);break}else t(g,C);C=C.sibling}w.type===rs?(p=En(w.props.children,g.mode,_,w.key),p.return=g,g=p):(_=Mo(w.type,w.key,w.props,null,g.mode,_),_.ref=qs(g,p,w),_.return=g,g=_)}return o(g);case ts:e:{for(C=w.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===w.containerInfo&&p.stateNode.implementation===w.implementation){r(g,p.sibling),p=s(p,w.children||[]),p.return=g,g=p;break e}else{r(g,p);break}else t(g,p);p=p.sibling}p=yl(w,g.mode,_),p.return=g,g=p}return o(g);case Or:return C=w._init,x(g,p,C(w._payload),_)}if(ti(w))return v(g,p,w,_);if(Ds(w))return m(g,p,w,_);mo(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,p!==null&&p.tag===6?(r(g,p.sibling),p=s(p,w),p.return=g,g=p):(r(g,p),p=vl(w,g.mode,_),p.return=g,g=p),o(g)):r(g,p)}return x}var Es=sm(!0),im=sm(!1),Zo=rn(null),ea=null,us=null,Pu=null;function Ru(){Pu=us=ea=null}function Au(e){var t=Zo.current;de(Zo),e._currentValue=t}function xc(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ys(e,t){ea=e,Pu=us=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ft=!0),e.firstContext=null)}function zt(e){var t=e._currentValue;if(Pu!==e)if(e={context:e,memoizedValue:t,next:null},us===null){if(ea===null)throw Error(P(308));us=e,ea.dependencies={lanes:0,firstContext:e}}else us=us.next=e;return t}var bn=null;function Ou(e){bn===null?bn=[e]:bn.push(e)}function om(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Ou(t)):(r.next=s.next,s.next=r),t.interleaved=r,kr(e,n)}function kr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ir=!1;function Iu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function am(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,te&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,kr(e,r)}return s=n.interleaved,s===null?(t.next=t,Ou(n)):(t.next=s.next,s.next=t),n.interleaved=t,kr(e,r)}function Ro(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,wu(e,r)}}function kh(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ta(e,t,r,n){var s=e.updateQueue;Ir=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,y=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,m=l;switch(f=t,y=r,m.tag){case 1:if(v=m.payload,typeof v=="function"){h=v.call(y,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=m.payload,f=typeof v=="function"?v.call(y,h,f):v,f==null)break e;h=xe({},h,f);break e;case 2:Ir=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else y={eventTime:y,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=y,c=h):d=d.next=y,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);An|=o,e.lanes=o,e.memoizedState=h}}function Sh(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(P(191,s));s.call(n)}}}var Qi={},ar=rn(Qi),Ti=rn(Qi),Pi=rn(Qi);function kn(e){if(e===Qi)throw Error(P(174));return e}function $u(e,t){switch(ae(Pi,t),ae(Ti,e),ae(ar,Qi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ec(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ec(t,e)}de(ar),ae(ar,t)}function Ns(){de(ar),de(Ti),de(Pi)}function lm(e){kn(Pi.current);var t=kn(ar.current),r=ec(t,e.type);t!==r&&(ae(Ti,e),ae(ar,r))}function Lu(e){Ti.current===e&&(de(ar),de(Ti))}var ve=rn(0);function ra(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var dl=[];function Mu(){for(var e=0;e<dl.length;e++)dl[e]._workInProgressVersionPrimary=null;dl.length=0}var Ao=jr.ReactCurrentDispatcher,hl=jr.ReactCurrentBatchConfig,Rn=0,we=null,$e=null,Fe=null,na=!1,di=!1,Ri=0,vw=0;function Ye(){throw Error(P(321))}function Uu(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!er(e[r],t[r]))return!1;return!0}function Du(e,t,r,n,s,i){if(Rn=i,we=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ao.current=e===null||e.memoizedState===null?_w:bw,e=r(n,s),di){i=0;do{if(di=!1,Ri=0,25<=i)throw Error(P(301));i+=1,Fe=$e=null,t.updateQueue=null,Ao.current=kw,e=r(n,s)}while(di)}if(Ao.current=sa,t=$e!==null&&$e.next!==null,Rn=0,Fe=$e=we=null,na=!1,t)throw Error(P(300));return e}function zu(){var e=Ri!==0;return Ri=0,e}function nr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?we.memoizedState=Fe=e:Fe=Fe.next=e,Fe}function Ft(){if($e===null){var e=we.alternate;e=e!==null?e.memoizedState:null}else e=$e.next;var t=Fe===null?we.memoizedState:Fe.next;if(t!==null)Fe=t,$e=e;else{if(e===null)throw Error(P(310));$e=e,e={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Fe===null?we.memoizedState=Fe=e:Fe=Fe.next=e}return Fe}function Ai(e,t){return typeof t=="function"?t(e):t}function fl(e){var t=Ft(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var n=$e,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Rn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,we.lanes|=d,An|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,er(n,t.memoizedState)||(ft=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,we.lanes|=i,An|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function pl(e){var t=Ft(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);er(i,t.memoizedState)||(ft=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function cm(){}function um(e,t){var r=we,n=Ft(),s=t(),i=!er(n.memoizedState,s);if(i&&(n.memoizedState=s,ft=!0),n=n.queue,Fu(fm.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Fe!==null&&Fe.memoizedState.tag&1){if(r.flags|=2048,Oi(9,hm.bind(null,r,n,s,t),void 0,null),We===null)throw Error(P(349));Rn&30||dm(r,t,s)}return s}function dm(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=we.updateQueue,t===null?(t={lastEffect:null,stores:null},we.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function hm(e,t,r,n){t.value=r,t.getSnapshot=n,pm(t)&&mm(e)}function fm(e,t,r){return r(function(){pm(t)&&mm(e)})}function pm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!er(e,r)}catch{return!0}}function mm(e){var t=kr(e,1);t!==null&&Zt(t,e,1,-1)}function jh(e){var t=nr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:e},t.queue=e,e=e.dispatch=xw.bind(null,we,e),[t.memoizedState,e]}function Oi(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=we.updateQueue,t===null?(t={lastEffect:null,stores:null},we.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function gm(){return Ft().memoizedState}function Oo(e,t,r,n){var s=nr();we.flags|=e,s.memoizedState=Oi(1|t,r,void 0,n===void 0?null:n)}function Ca(e,t,r,n){var s=Ft();n=n===void 0?null:n;var i=void 0;if($e!==null){var o=$e.memoizedState;if(i=o.destroy,n!==null&&Uu(n,o.deps)){s.memoizedState=Oi(t,r,i,n);return}}we.flags|=e,s.memoizedState=Oi(1|t,r,i,n)}function Eh(e,t){return Oo(8390656,8,e,t)}function Fu(e,t){return Ca(2048,8,e,t)}function vm(e,t){return Ca(4,2,e,t)}function ym(e,t){return Ca(4,4,e,t)}function wm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xm(e,t,r){return r=r!=null?r.concat([e]):null,Ca(4,4,wm.bind(null,t,e),r)}function Bu(){}function _m(e,t){var r=Ft();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Uu(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function bm(e,t){var r=Ft();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Uu(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function km(e,t,r){return Rn&21?(er(r,t)||(r=Cp(),we.lanes|=r,An|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ft=!0),e.memoizedState=r)}function yw(e,t){var r=se;se=r!==0&&4>r?r:4,e(!0);var n=hl.transition;hl.transition={};try{e(!1),t()}finally{se=r,hl.transition=n}}function Sm(){return Ft().memoizedState}function ww(e,t,r){var n=Jr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},jm(e))Em(t,r);else if(r=om(e,t,r,n),r!==null){var s=it();Zt(r,e,n,s),Nm(r,t,n)}}function xw(e,t,r){var n=Jr(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(jm(e))Em(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,er(l,o)){var c=t.interleaved;c===null?(s.next=s,Ou(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=om(e,t,s,n),r!==null&&(s=it(),Zt(r,e,n,s),Nm(r,t,n))}}function jm(e){var t=e.alternate;return e===we||t!==null&&t===we}function Em(e,t){di=na=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Nm(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,wu(e,r)}}var sa={readContext:zt,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},_w={readContext:zt,useCallback:function(e,t){return nr().memoizedState=[e,t===void 0?null:t],e},useContext:zt,useEffect:Eh,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Oo(4194308,4,wm.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oo(4,2,e,t)},useMemo:function(e,t){var r=nr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=nr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ww.bind(null,we,e),[n.memoizedState,e]},useRef:function(e){var t=nr();return e={current:e},t.memoizedState=e},useState:jh,useDebugValue:Bu,useDeferredValue:function(e){return nr().memoizedState=e},useTransition:function(){var e=jh(!1),t=e[0];return e=yw.bind(null,e[1]),nr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=we,s=nr();if(pe){if(r===void 0)throw Error(P(407));r=r()}else{if(r=t(),We===null)throw Error(P(349));Rn&30||dm(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Eh(fm.bind(null,n,i,e),[e]),n.flags|=2048,Oi(9,hm.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=nr(),t=We.identifierPrefix;if(pe){var r=yr,n=vr;r=(n&~(1<<32-Xt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ri++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=vw++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},bw={readContext:zt,useCallback:_m,useContext:zt,useEffect:Fu,useImperativeHandle:xm,useInsertionEffect:vm,useLayoutEffect:ym,useMemo:bm,useReducer:fl,useRef:gm,useState:function(){return fl(Ai)},useDebugValue:Bu,useDeferredValue:function(e){var t=Ft();return km(t,$e.memoizedState,e)},useTransition:function(){var e=fl(Ai)[0],t=Ft().memoizedState;return[e,t]},useMutableSource:cm,useSyncExternalStore:um,useId:Sm,unstable_isNewReconciler:!1},kw={readContext:zt,useCallback:_m,useContext:zt,useEffect:Fu,useImperativeHandle:xm,useInsertionEffect:vm,useLayoutEffect:ym,useMemo:bm,useReducer:pl,useRef:gm,useState:function(){return pl(Ai)},useDebugValue:Bu,useDeferredValue:function(e){var t=Ft();return $e===null?t.memoizedState=e:km(t,$e.memoizedState,e)},useTransition:function(){var e=pl(Ai)[0],t=Ft().memoizedState;return[e,t]},useMutableSource:cm,useSyncExternalStore:um,useId:Sm,unstable_isNewReconciler:!1};function Ht(e,t){if(e&&e.defaultProps){t=xe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function _c(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:xe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ta={isMounted:function(e){return(e=e._reactInternals)?Mn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=it(),s=Jr(e),i=xr(n,s);i.payload=t,r!=null&&(i.callback=r),t=Hr(e,i,s),t!==null&&(Zt(t,e,s,n),Ro(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=it(),s=Jr(e),i=xr(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Hr(e,i,s),t!==null&&(Zt(t,e,s,n),Ro(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=it(),n=Jr(e),s=xr(r,n);s.tag=2,t!=null&&(s.callback=t),t=Hr(e,s,n),t!==null&&(Zt(t,e,n,r),Ro(t,e,n))}};function Nh(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!ji(r,n)||!ji(s,i):!0}function Cm(e,t,r){var n=!1,s=Zr,i=t.contextType;return typeof i=="object"&&i!==null?i=zt(i):(s=mt(t)?Tn:tt.current,n=t.contextTypes,i=(n=n!=null)?Ss(e,s):Zr),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ta,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Ch(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Ta.enqueueReplaceState(t,t.state,null)}function bc(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Iu(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=zt(i):(i=mt(t)?Tn:tt.current,s.context=Ss(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(_c(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ta.enqueueReplaceState(s,s.state,null),ta(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Cs(e,t){try{var r="",n=t;do r+=Y0(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function ml(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function kc(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Sw=typeof WeakMap=="function"?WeakMap:Map;function Tm(e,t,r){r=xr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){oa||(oa=!0,Oc=n),kc(e,t)},r}function Pm(e,t,r){r=xr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){kc(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){kc(e,t),typeof n!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Th(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Sw;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Uw.bind(null,e,t,r),t.then(e,e))}function Ph(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Rh(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=xr(-1,1),t.tag=2,Hr(r,t,1))),r.lanes|=1),e)}var jw=jr.ReactCurrentOwner,ft=!1;function nt(e,t,r,n){t.child=e===null?im(t,null,r,n):Es(t,e.child,r,n)}function Ah(e,t,r,n,s){r=r.render;var i=t.ref;return ys(t,s),n=Du(e,t,r,n,i,s),r=zu(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Sr(e,t,s)):(pe&&r&&Nu(t),t.flags|=1,nt(e,t,n,s),t.child)}function Oh(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Qu(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Rm(e,t,i,n,s)):(e=Mo(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:ji,r(o,n)&&e.ref===t.ref)return Sr(e,t,s)}return t.flags|=1,e=Qr(i,n),e.ref=t.ref,e.return=t,t.child=e}function Rm(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(ji(i,n)&&e.ref===t.ref)if(ft=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(ft=!0);else return t.lanes=e.lanes,Sr(e,t,s)}return Sc(e,t,r,n,s)}function Am(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae(hs,St),St|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ae(hs,St),St|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ae(hs,St),St|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,ae(hs,St),St|=n;return nt(e,t,s,r),t.child}function Om(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Sc(e,t,r,n,s){var i=mt(r)?Tn:tt.current;return i=Ss(t,i),ys(t,s),r=Du(e,t,r,n,i,s),n=zu(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Sr(e,t,s)):(pe&&n&&Nu(t),t.flags|=1,nt(e,t,r,s),t.child)}function Ih(e,t,r,n,s){if(mt(r)){var i=!0;Qo(t)}else i=!1;if(ys(t,s),t.stateNode===null)Io(e,t),Cm(t,r,n),bc(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=zt(u):(u=mt(r)?Tn:tt.current,u=Ss(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Ch(t,o,n,u),Ir=!1;var f=t.memoizedState;o.state=f,ta(t,n,o,s),c=t.memoizedState,l!==n||f!==c||pt.current||Ir?(typeof d=="function"&&(_c(t,r,d,n),c=t.memoizedState),(l=Ir||Nh(t,r,l,n,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,am(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Ht(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=zt(c):(c=mt(r)?Tn:tt.current,c=Ss(t,c));var y=r.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Ch(t,o,n,c),Ir=!1,f=t.memoizedState,o.state=f,ta(t,n,o,s);var v=t.memoizedState;l!==h||f!==v||pt.current||Ir?(typeof y=="function"&&(_c(t,r,y,n),v=t.memoizedState),(u=Ir||Nh(t,r,u,n,f,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return jc(e,t,r,n,i,s)}function jc(e,t,r,n,s,i){Om(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&wh(t,r,!1),Sr(e,t,i);n=t.stateNode,jw.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Es(t,e.child,null,i),t.child=Es(t,null,l,i)):nt(e,t,l,i),t.memoizedState=n.state,s&&wh(t,r,!0),t.child}function Im(e){var t=e.stateNode;t.pendingContext?yh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yh(e,t.context,!1),$u(e,t.containerInfo)}function $h(e,t,r,n,s){return js(),Tu(s),t.flags|=256,nt(e,t,r,n),t.child}var Ec={dehydrated:null,treeContext:null,retryLane:0};function Nc(e){return{baseLanes:e,cachePool:null,transitions:null}}function $m(e,t,r){var n=t.pendingProps,s=ve.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ae(ve,s&1),e===null)return wc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Aa(o,n,0,null),e=En(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Nc(r),t.memoizedState=Ec,e):Wu(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Ew(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Qr(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Qr(l,i):(i=En(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Nc(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Ec,n}return i=e.child,e=i.sibling,n=Qr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Wu(e,t){return t=Aa({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function go(e,t,r,n){return n!==null&&Tu(n),Es(t,e.child,null,r),e=Wu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ew(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=ml(Error(P(422))),go(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Aa({mode:"visible",children:n.children},s,0,null),i=En(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Es(t,e.child,null,o),t.child.memoizedState=Nc(o),t.memoizedState=Ec,i);if(!(t.mode&1))return go(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(P(419)),n=ml(i,n,void 0),go(e,t,o,n)}if(l=(o&e.childLanes)!==0,ft||l){if(n=We,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,kr(e,s),Zt(n,e,s,-1))}return Ju(),n=ml(Error(P(421))),go(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Dw.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Nt=Vr(s.nextSibling),Tt=t,pe=!0,Yt=null,e!==null&&(It[$t++]=vr,It[$t++]=yr,It[$t++]=Pn,vr=e.id,yr=e.overflow,Pn=t),t=Wu(t,n.children),t.flags|=4096,t)}function Lh(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),xc(e.return,t,r)}function gl(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Lm(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(nt(e,t,n.children,r),n=ve.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lh(e,r,t);else if(e.tag===19)Lh(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ae(ve,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&ra(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),gl(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ra(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}gl(t,!0,r,null,i);break;case"together":gl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Io(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Sr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),An|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,r=Qr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Qr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Nw(e,t,r){switch(t.tag){case 3:Im(t),js();break;case 5:lm(t);break;case 1:mt(t.type)&&Qo(t);break;case 4:$u(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;ae(Zo,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ae(ve,ve.current&1),t.flags|=128,null):r&t.child.childLanes?$m(e,t,r):(ae(ve,ve.current&1),e=Sr(e,t,r),e!==null?e.sibling:null);ae(ve,ve.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Lm(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ae(ve,ve.current),n)break;return null;case 22:case 23:return t.lanes=0,Am(e,t,r)}return Sr(e,t,r)}var Mm,Cc,Um,Dm;Mm=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Cc=function(){};Um=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,kn(ar.current);var i=null;switch(r){case"input":s=Ql(e,s),n=Ql(e,n),i=[];break;case"select":s=xe({},s,{value:void 0}),n=xe({},n,{value:void 0}),i=[];break;case"textarea":s=Zl(e,s),n=Zl(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Go)}tc(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(yi.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(yi.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ce("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Dm=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ks(e,t){if(!pe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Cw(e,t,r){var n=t.pendingProps;switch(Cu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return mt(t.type)&&Jo(),Xe(t),null;case 3:return n=t.stateNode,Ns(),de(pt),de(tt),Mu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(po(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Yt!==null&&(Lc(Yt),Yt=null))),Cc(e,t),Xe(t),null;case 5:Lu(t);var s=kn(Pi.current);if(r=t.type,e!==null&&t.stateNode!=null)Um(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(P(166));return Xe(t),null}if(e=kn(ar.current),po(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ir]=t,n[Ci]=i,e=(t.mode&1)!==0,r){case"dialog":ce("cancel",n),ce("close",n);break;case"iframe":case"object":case"embed":ce("load",n);break;case"video":case"audio":for(s=0;s<ni.length;s++)ce(ni[s],n);break;case"source":ce("error",n);break;case"img":case"image":case"link":ce("error",n),ce("load",n);break;case"details":ce("toggle",n);break;case"input":Kd(n,i),ce("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ce("invalid",n);break;case"textarea":Hd(n,i),ce("invalid",n)}tc(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&fo(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&fo(n.textContent,l,e),s=["children",""+l]):yi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ce("scroll",n)}switch(r){case"input":so(n),Vd(n,i,!0);break;case"textarea":so(n),Gd(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Go)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=fp(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ir]=t,e[Ci]=n,Mm(e,t,!1,!1),t.stateNode=e;e:{switch(o=rc(r,n),r){case"dialog":ce("cancel",e),ce("close",e),s=n;break;case"iframe":case"object":case"embed":ce("load",e),s=n;break;case"video":case"audio":for(s=0;s<ni.length;s++)ce(ni[s],e);s=n;break;case"source":ce("error",e),s=n;break;case"img":case"image":case"link":ce("error",e),ce("load",e),s=n;break;case"details":ce("toggle",e),s=n;break;case"input":Kd(e,n),s=Ql(e,n),ce("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=xe({},n,{value:void 0}),ce("invalid",e);break;case"textarea":Hd(e,n),s=Zl(e,n),ce("invalid",e);break;default:s=n}tc(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?gp(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&pp(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&wi(e,c):typeof c=="number"&&wi(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(yi.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ce("scroll",e):c!=null&&fu(e,i,c,o))}switch(r){case"input":so(e),Vd(e,n,!1);break;case"textarea":so(e),Gd(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Xr(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?ps(e,!!n.multiple,i,!1):n.defaultValue!=null&&ps(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Go)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xe(t),null;case 6:if(e&&t.stateNode!=null)Dm(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(P(166));if(r=kn(Pi.current),kn(ar.current),po(t)){if(n=t.stateNode,r=t.memoizedProps,n[ir]=t,(i=n.nodeValue!==r)&&(e=Tt,e!==null))switch(e.tag){case 3:fo(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fo(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ir]=t,t.stateNode=n}return Xe(t),null;case 13:if(de(ve),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pe&&Nt!==null&&t.mode&1&&!(t.flags&128))nm(),js(),t.flags|=98560,i=!1;else if(i=po(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(P(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));i[ir]=t}else js(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xe(t),i=!1}else Yt!==null&&(Lc(Yt),Yt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ve.current&1?Me===0&&(Me=3):Ju())),t.updateQueue!==null&&(t.flags|=4),Xe(t),null);case 4:return Ns(),Cc(e,t),e===null&&Ei(t.stateNode.containerInfo),Xe(t),null;case 10:return Au(t.type._context),Xe(t),null;case 17:return mt(t.type)&&Jo(),Xe(t),null;case 19:if(de(ve),i=t.memoizedState,i===null)return Xe(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Ks(i,!1);else{if(Me!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ra(e),o!==null){for(t.flags|=128,Ks(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ae(ve,ve.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ne()>Ts&&(t.flags|=128,n=!0,Ks(i,!1),t.lanes=4194304)}else{if(!n)if(e=ra(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ks(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!pe)return Xe(t),null}else 2*Ne()-i.renderingStartTime>Ts&&r!==1073741824&&(t.flags|=128,n=!0,Ks(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ne(),t.sibling=null,r=ve.current,ae(ve,n?r&1|2:r&1),t):(Xe(t),null);case 22:case 23:return Gu(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?St&1073741824&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),null;case 24:return null;case 25:return null}throw Error(P(156,t.tag))}function Tw(e,t){switch(Cu(t),t.tag){case 1:return mt(t.type)&&Jo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ns(),de(pt),de(tt),Mu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Lu(t),null;case 13:if(de(ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));js()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return de(ve),null;case 4:return Ns(),null;case 10:return Au(t.type._context),null;case 22:case 23:return Gu(),null;case 24:return null;default:return null}}var vo=!1,et=!1,Pw=typeof WeakSet=="function"?WeakSet:Set,I=null;function ds(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){be(e,t,n)}else r.current=null}function Tc(e,t,r){try{r()}catch(n){be(e,t,n)}}var Mh=!1;function Rw(e,t){if(hc=Ko,e=qp(),Eu(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var y;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)f=h,h=y;for(;;){if(h===e)break t;if(f===r&&++u===s&&(l=o),f===i&&++d===n&&(c=o),(y=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=y}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(fc={focusedElem:e,selectionRange:r},Ko=!1,I=t;I!==null;)if(t=I,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,I=e;else for(;I!==null;){t=I;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var m=v.memoizedProps,x=v.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:Ht(t.type,m),x);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(_){be(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,I=e;break}I=t.return}return v=Mh,Mh=!1,v}function hi(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Tc(t,r,i)}s=s.next}while(s!==n)}}function Pa(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Pc(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function zm(e){var t=e.alternate;t!==null&&(e.alternate=null,zm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ir],delete t[Ci],delete t[gc],delete t[fw],delete t[pw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Fm(e){return e.tag===5||e.tag===3||e.tag===4}function Uh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Fm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rc(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Go));else if(n!==4&&(e=e.child,e!==null))for(Rc(e,t,r),e=e.sibling;e!==null;)Rc(e,t,r),e=e.sibling}function Ac(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Ac(e,t,r),e=e.sibling;e!==null;)Ac(e,t,r),e=e.sibling}var He=null,Jt=!1;function Nr(e,t,r){for(r=r.child;r!==null;)Bm(e,t,r),r=r.sibling}function Bm(e,t,r){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(ba,r)}catch{}switch(r.tag){case 5:et||ds(r,t);case 6:var n=He,s=Jt;He=null,Nr(e,t,r),He=n,Jt=s,He!==null&&(Jt?(e=He,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):He.removeChild(r.stateNode));break;case 18:He!==null&&(Jt?(e=He,r=r.stateNode,e.nodeType===8?cl(e.parentNode,r):e.nodeType===1&&cl(e,r),ki(e)):cl(He,r.stateNode));break;case 4:n=He,s=Jt,He=r.stateNode.containerInfo,Jt=!0,Nr(e,t,r),He=n,Jt=s;break;case 0:case 11:case 14:case 15:if(!et&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Tc(r,t,o),s=s.next}while(s!==n)}Nr(e,t,r);break;case 1:if(!et&&(ds(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){be(r,t,l)}Nr(e,t,r);break;case 21:Nr(e,t,r);break;case 22:r.mode&1?(et=(n=et)||r.memoizedState!==null,Nr(e,t,r),et=n):Nr(e,t,r);break;default:Nr(e,t,r)}}function Dh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Pw),t.forEach(function(n){var s=zw.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Kt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:He=l.stateNode,Jt=!1;break e;case 3:He=l.stateNode.containerInfo,Jt=!0;break e;case 4:He=l.stateNode.containerInfo,Jt=!0;break e}l=l.return}if(He===null)throw Error(P(160));Bm(i,o,s),He=null,Jt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){be(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Wm(t,e),t=t.sibling}function Wm(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Kt(t,e),rr(e),n&4){try{hi(3,e,e.return),Pa(3,e)}catch(m){be(e,e.return,m)}try{hi(5,e,e.return)}catch(m){be(e,e.return,m)}}break;case 1:Kt(t,e),rr(e),n&512&&r!==null&&ds(r,r.return);break;case 5:if(Kt(t,e),rr(e),n&512&&r!==null&&ds(r,r.return),e.flags&32){var s=e.stateNode;try{wi(s,"")}catch(m){be(e,e.return,m)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&dp(s,i),rc(l,o);var u=rc(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?gp(s,h):d==="dangerouslySetInnerHTML"?pp(s,h):d==="children"?wi(s,h):fu(s,d,h,u)}switch(l){case"input":Yl(s,i);break;case"textarea":hp(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?ps(s,!!i.multiple,y,!1):f!==!!i.multiple&&(i.defaultValue!=null?ps(s,!!i.multiple,i.defaultValue,!0):ps(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ci]=i}catch(m){be(e,e.return,m)}}break;case 6:if(Kt(t,e),rr(e),n&4){if(e.stateNode===null)throw Error(P(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(m){be(e,e.return,m)}}break;case 3:if(Kt(t,e),rr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ki(t.containerInfo)}catch(m){be(e,e.return,m)}break;case 4:Kt(t,e),rr(e);break;case 13:Kt(t,e),rr(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Vu=Ne())),n&4&&Dh(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(et=(u=et)||d,Kt(t,e),et=u):Kt(t,e),rr(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(I=e,d=e.child;d!==null;){for(h=I=d;I!==null;){switch(f=I,y=f.child,f.tag){case 0:case 11:case 14:case 15:hi(4,f,f.return);break;case 1:ds(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){be(n,r,m)}}break;case 5:ds(f,f.return);break;case 22:if(f.memoizedState!==null){Fh(h);continue}}y!==null?(y.return=f,I=y):Fh(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=mp("display",o))}catch(m){be(e,e.return,m)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){be(e,e.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Kt(t,e),rr(e),n&4&&Dh(e);break;case 21:break;default:Kt(t,e),rr(e)}}function rr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Fm(r)){var n=r;break e}r=r.return}throw Error(P(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(wi(s,""),n.flags&=-33);var i=Uh(e);Ac(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Uh(e);Rc(e,l,o);break;default:throw Error(P(161))}}catch(c){be(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Aw(e,t,r){I=e,qm(e)}function qm(e,t,r){for(var n=(e.mode&1)!==0;I!==null;){var s=I,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||vo;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||et;l=vo;var u=et;if(vo=o,(et=c)&&!u)for(I=s;I!==null;)o=I,c=o.child,o.tag===22&&o.memoizedState!==null?Bh(s):c!==null?(c.return=o,I=c):Bh(s);for(;i!==null;)I=i,qm(i),i=i.sibling;I=s,vo=l,et=u}zh(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,I=i):zh(e)}}function zh(e){for(;I!==null;){var t=I;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:et||Pa(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!et)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Ht(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Sh(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Sh(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ki(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}et||t.flags&512&&Pc(t)}catch(f){be(t,t.return,f)}}if(t===e){I=null;break}if(r=t.sibling,r!==null){r.return=t.return,I=r;break}I=t.return}}function Fh(e){for(;I!==null;){var t=I;if(t===e){I=null;break}var r=t.sibling;if(r!==null){r.return=t.return,I=r;break}I=t.return}}function Bh(e){for(;I!==null;){var t=I;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Pa(4,t)}catch(c){be(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){be(t,s,c)}}var i=t.return;try{Pc(t)}catch(c){be(t,i,c)}break;case 5:var o=t.return;try{Pc(t)}catch(c){be(t,o,c)}}}catch(c){be(t,t.return,c)}if(t===e){I=null;break}var l=t.sibling;if(l!==null){l.return=t.return,I=l;break}I=t.return}}var Ow=Math.ceil,ia=jr.ReactCurrentDispatcher,qu=jr.ReactCurrentOwner,Ut=jr.ReactCurrentBatchConfig,te=0,We=null,Ae=null,Ge=0,St=0,hs=rn(0),Me=0,Ii=null,An=0,Ra=0,Ku=0,fi=null,ht=null,Vu=0,Ts=1/0,fr=null,oa=!1,Oc=null,Gr=null,yo=!1,Fr=null,aa=0,pi=0,Ic=null,$o=-1,Lo=0;function it(){return te&6?Ne():$o!==-1?$o:$o=Ne()}function Jr(e){return e.mode&1?te&2&&Ge!==0?Ge&-Ge:gw.transition!==null?(Lo===0&&(Lo=Cp()),Lo):(e=se,e!==0||(e=window.event,e=e===void 0?16:$p(e.type)),e):1}function Zt(e,t,r,n){if(50<pi)throw pi=0,Ic=null,Error(P(185));Hi(e,r,n),(!(te&2)||e!==We)&&(e===We&&(!(te&2)&&(Ra|=r),Me===4&&Ur(e,Ge)),gt(e,n),r===1&&te===0&&!(t.mode&1)&&(Ts=Ne()+500,Na&&nn()))}function gt(e,t){var r=e.callbackNode;gy(e,t);var n=qo(e,e===We?Ge:0);if(n===0)r!==null&&Yd(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Yd(r),t===1)e.tag===0?mw(Wh.bind(null,e)):em(Wh.bind(null,e)),dw(function(){!(te&6)&&nn()}),r=null;else{switch(Tp(n)){case 1:r=yu;break;case 4:r=Ep;break;case 16:r=Wo;break;case 536870912:r=Np;break;default:r=Wo}r=Xm(r,Km.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Km(e,t){if($o=-1,Lo=0,te&6)throw Error(P(327));var r=e.callbackNode;if(ws()&&e.callbackNode!==r)return null;var n=qo(e,e===We?Ge:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=la(e,n);else{t=n;var s=te;te|=2;var i=Hm();(We!==e||Ge!==t)&&(fr=null,Ts=Ne()+500,jn(e,t));do try{Lw();break}catch(l){Vm(e,l)}while(!0);Ru(),ia.current=i,te=s,Ae!==null?t=0:(We=null,Ge=0,t=Me)}if(t!==0){if(t===2&&(s=ac(e),s!==0&&(n=s,t=$c(e,s))),t===1)throw r=Ii,jn(e,0),Ur(e,n),gt(e,Ne()),r;if(t===6)Ur(e,n);else{if(s=e.current.alternate,!(n&30)&&!Iw(s)&&(t=la(e,n),t===2&&(i=ac(e),i!==0&&(n=i,t=$c(e,i))),t===1))throw r=Ii,jn(e,0),Ur(e,n),gt(e,Ne()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(P(345));case 2:gn(e,ht,fr);break;case 3:if(Ur(e,n),(n&130023424)===n&&(t=Vu+500-Ne(),10<t)){if(qo(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){it(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=mc(gn.bind(null,e,ht,fr),t);break}gn(e,ht,fr);break;case 4:if(Ur(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-Xt(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=Ne()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ow(n/1960))-n,10<n){e.timeoutHandle=mc(gn.bind(null,e,ht,fr),n);break}gn(e,ht,fr);break;case 5:gn(e,ht,fr);break;default:throw Error(P(329))}}}return gt(e,Ne()),e.callbackNode===r?Km.bind(null,e):null}function $c(e,t){var r=fi;return e.current.memoizedState.isDehydrated&&(jn(e,t).flags|=256),e=la(e,t),e!==2&&(t=ht,ht=r,t!==null&&Lc(t)),e}function Lc(e){ht===null?ht=e:ht.push.apply(ht,e)}function Iw(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!er(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ur(e,t){for(t&=~Ku,t&=~Ra,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Xt(t),n=1<<r;e[r]=-1,t&=~n}}function Wh(e){if(te&6)throw Error(P(327));ws();var t=qo(e,0);if(!(t&1))return gt(e,Ne()),null;var r=la(e,t);if(e.tag!==0&&r===2){var n=ac(e);n!==0&&(t=n,r=$c(e,n))}if(r===1)throw r=Ii,jn(e,0),Ur(e,t),gt(e,Ne()),r;if(r===6)throw Error(P(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gn(e,ht,fr),gt(e,Ne()),null}function Hu(e,t){var r=te;te|=1;try{return e(t)}finally{te=r,te===0&&(Ts=Ne()+500,Na&&nn())}}function On(e){Fr!==null&&Fr.tag===0&&!(te&6)&&ws();var t=te;te|=1;var r=Ut.transition,n=se;try{if(Ut.transition=null,se=1,e)return e()}finally{se=n,Ut.transition=r,te=t,!(te&6)&&nn()}}function Gu(){St=hs.current,de(hs)}function jn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,uw(r)),Ae!==null)for(r=Ae.return;r!==null;){var n=r;switch(Cu(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Jo();break;case 3:Ns(),de(pt),de(tt),Mu();break;case 5:Lu(n);break;case 4:Ns();break;case 13:de(ve);break;case 19:de(ve);break;case 10:Au(n.type._context);break;case 22:case 23:Gu()}r=r.return}if(We=e,Ae=e=Qr(e.current,null),Ge=St=t,Me=0,Ii=null,Ku=Ra=An=0,ht=fi=null,bn!==null){for(t=0;t<bn.length;t++)if(r=bn[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}bn=null}return e}function Vm(e,t){do{var r=Ae;try{if(Ru(),Ao.current=sa,na){for(var n=we.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}na=!1}if(Rn=0,Fe=$e=we=null,di=!1,Ri=0,qu.current=null,r===null||r.return===null){Me=1,Ii=t,Ae=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Ge,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Ph(o);if(y!==null){y.flags&=-257,Rh(y,o,l,i,t),y.mode&1&&Th(i,u,t),t=y,c=u;var v=t.updateQueue;if(v===null){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}else{if(!(t&1)){Th(i,u,t),Ju();break e}c=Error(P(426))}}else if(pe&&l.mode&1){var x=Ph(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Rh(x,o,l,i,t),Tu(Cs(c,l));break e}}i=c=Cs(c,l),Me!==4&&(Me=2),fi===null?fi=[i]:fi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Tm(i,c,t);kh(i,g);break e;case 1:l=c;var p=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Gr===null||!Gr.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=Pm(i,l,t);kh(i,_);break e}}i=i.return}while(i!==null)}Jm(r)}catch(N){t=N,Ae===r&&r!==null&&(Ae=r=r.return);continue}break}while(!0)}function Hm(){var e=ia.current;return ia.current=sa,e===null?sa:e}function Ju(){(Me===0||Me===3||Me===2)&&(Me=4),We===null||!(An&268435455)&&!(Ra&268435455)||Ur(We,Ge)}function la(e,t){var r=te;te|=2;var n=Hm();(We!==e||Ge!==t)&&(fr=null,jn(e,t));do try{$w();break}catch(s){Vm(e,s)}while(!0);if(Ru(),te=r,ia.current=n,Ae!==null)throw Error(P(261));return We=null,Ge=0,Me}function $w(){for(;Ae!==null;)Gm(Ae)}function Lw(){for(;Ae!==null&&!ay();)Gm(Ae)}function Gm(e){var t=Ym(e.alternate,e,St);e.memoizedProps=e.pendingProps,t===null?Jm(e):Ae=t,qu.current=null}function Jm(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Tw(r,t),r!==null){r.flags&=32767,Ae=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Me=6,Ae=null;return}}else if(r=Cw(r,t,St),r!==null){Ae=r;return}if(t=t.sibling,t!==null){Ae=t;return}Ae=t=e}while(t!==null);Me===0&&(Me=5)}function gn(e,t,r){var n=se,s=Ut.transition;try{Ut.transition=null,se=1,Mw(e,t,r,n)}finally{Ut.transition=s,se=n}return null}function Mw(e,t,r,n){do ws();while(Fr!==null);if(te&6)throw Error(P(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(P(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(vy(e,i),e===We&&(Ae=We=null,Ge=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||yo||(yo=!0,Xm(Wo,function(){return ws(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ut.transition,Ut.transition=null;var o=se;se=1;var l=te;te|=4,qu.current=null,Rw(e,r),Wm(r,e),nw(fc),Ko=!!hc,fc=hc=null,e.current=r,Aw(r),ly(),te=l,se=o,Ut.transition=i}else e.current=r;if(yo&&(yo=!1,Fr=e,aa=s),i=e.pendingLanes,i===0&&(Gr=null),dy(r.stateNode),gt(e,Ne()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(oa)throw oa=!1,e=Oc,Oc=null,e;return aa&1&&e.tag!==0&&ws(),i=e.pendingLanes,i&1?e===Ic?pi++:(pi=0,Ic=e):pi=0,nn(),null}function ws(){if(Fr!==null){var e=Tp(aa),t=Ut.transition,r=se;try{if(Ut.transition=null,se=16>e?16:e,Fr===null)var n=!1;else{if(e=Fr,Fr=null,aa=0,te&6)throw Error(P(331));var s=te;for(te|=4,I=e.current;I!==null;){var i=I,o=i.child;if(I.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(I=u;I!==null;){var d=I;switch(d.tag){case 0:case 11:case 15:hi(8,d,i)}var h=d.child;if(h!==null)h.return=d,I=h;else for(;I!==null;){d=I;var f=d.sibling,y=d.return;if(zm(d),d===u){I=null;break}if(f!==null){f.return=y,I=f;break}I=y}}}var v=i.alternate;if(v!==null){var m=v.child;if(m!==null){v.child=null;do{var x=m.sibling;m.sibling=null,m=x}while(m!==null)}}I=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,I=o;else e:for(;I!==null;){if(i=I,i.flags&2048)switch(i.tag){case 0:case 11:case 15:hi(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,I=g;break e}I=i.return}}var p=e.current;for(I=p;I!==null;){o=I;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,I=w;else e:for(o=p;I!==null;){if(l=I,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Pa(9,l)}}catch(N){be(l,l.return,N)}if(l===o){I=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,I=_;break e}I=l.return}}if(te=s,nn(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(ba,e)}catch{}n=!0}return n}finally{se=r,Ut.transition=t}}return!1}function qh(e,t,r){t=Cs(r,t),t=Tm(e,t,1),e=Hr(e,t,1),t=it(),e!==null&&(Hi(e,1,t),gt(e,t))}function be(e,t,r){if(e.tag===3)qh(e,e,r);else for(;t!==null;){if(t.tag===3){qh(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Gr===null||!Gr.has(n))){e=Cs(r,e),e=Pm(t,e,1),t=Hr(t,e,1),e=it(),t!==null&&(Hi(t,1,e),gt(t,e));break}}t=t.return}}function Uw(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=it(),e.pingedLanes|=e.suspendedLanes&r,We===e&&(Ge&r)===r&&(Me===4||Me===3&&(Ge&130023424)===Ge&&500>Ne()-Vu?jn(e,0):Ku|=r),gt(e,t)}function Qm(e,t){t===0&&(e.mode&1?(t=ao,ao<<=1,!(ao&130023424)&&(ao=4194304)):t=1);var r=it();e=kr(e,t),e!==null&&(Hi(e,t,r),gt(e,r))}function Dw(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Qm(e,r)}function zw(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(P(314))}n!==null&&n.delete(t),Qm(e,r)}var Ym;Ym=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||pt.current)ft=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ft=!1,Nw(e,t,r);ft=!!(e.flags&131072)}else ft=!1,pe&&t.flags&1048576&&tm(t,Xo,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Io(e,t),e=t.pendingProps;var s=Ss(t,tt.current);ys(t,r),s=Du(null,t,n,e,s,r);var i=zu();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mt(n)?(i=!0,Qo(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Iu(t),s.updater=Ta,t.stateNode=s,s._reactInternals=t,bc(t,n,e,r),t=jc(null,t,n,!0,i,r)):(t.tag=0,pe&&i&&Nu(t),nt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Io(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Bw(n),e=Ht(n,e),s){case 0:t=Sc(null,t,n,e,r);break e;case 1:t=Ih(null,t,n,e,r);break e;case 11:t=Ah(null,t,n,e,r);break e;case 14:t=Oh(null,t,n,Ht(n.type,e),r);break e}throw Error(P(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ht(n,s),Sc(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ht(n,s),Ih(e,t,n,s,r);case 3:e:{if(Im(t),e===null)throw Error(P(387));n=t.pendingProps,i=t.memoizedState,s=i.element,am(e,t),ta(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Cs(Error(P(423)),t),t=$h(e,t,n,r,s);break e}else if(n!==s){s=Cs(Error(P(424)),t),t=$h(e,t,n,r,s);break e}else for(Nt=Vr(t.stateNode.containerInfo.firstChild),Tt=t,pe=!0,Yt=null,r=im(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(js(),n===s){t=Sr(e,t,r);break e}nt(e,t,n,r)}t=t.child}return t;case 5:return lm(t),e===null&&wc(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,pc(n,s)?o=null:i!==null&&pc(n,i)&&(t.flags|=32),Om(e,t),nt(e,t,o,r),t.child;case 6:return e===null&&wc(t),null;case 13:return $m(e,t,r);case 4:return $u(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Es(t,null,n,r):nt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ht(n,s),Ah(e,t,n,s,r);case 7:return nt(e,t,t.pendingProps,r),t.child;case 8:return nt(e,t,t.pendingProps.children,r),t.child;case 12:return nt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,ae(Zo,n._currentValue),n._currentValue=o,i!==null)if(er(i.value,o)){if(i.children===s.children&&!pt.current){t=Sr(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=xr(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),xc(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(P(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),xc(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}nt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,ys(t,r),s=zt(s),n=n(s),t.flags|=1,nt(e,t,n,r),t.child;case 14:return n=t.type,s=Ht(n,t.pendingProps),s=Ht(n.type,s),Oh(e,t,n,s,r);case 15:return Rm(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ht(n,s),Io(e,t),t.tag=1,mt(n)?(e=!0,Qo(t)):e=!1,ys(t,r),Cm(t,n,s),bc(t,n,s,r),jc(null,t,n,!0,e,r);case 19:return Lm(e,t,r);case 22:return Am(e,t,r)}throw Error(P(156,t.tag))};function Xm(e,t){return jp(e,t)}function Fw(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(e,t,r,n){return new Fw(e,t,r,n)}function Qu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bw(e){if(typeof e=="function")return Qu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===mu)return 11;if(e===gu)return 14}return 2}function Qr(e,t){var r=e.alternate;return r===null?(r=Mt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Mo(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")Qu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case rs:return En(r.children,s,i,t);case pu:o=8,s|=8;break;case Vl:return e=Mt(12,r,t,s|2),e.elementType=Vl,e.lanes=i,e;case Hl:return e=Mt(13,r,t,s),e.elementType=Hl,e.lanes=i,e;case Gl:return e=Mt(19,r,t,s),e.elementType=Gl,e.lanes=i,e;case lp:return Aa(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case op:o=10;break e;case ap:o=9;break e;case mu:o=11;break e;case gu:o=14;break e;case Or:o=16,n=null;break e}throw Error(P(130,e==null?e:typeof e,""))}return t=Mt(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function En(e,t,r,n){return e=Mt(7,e,n,t),e.lanes=r,e}function Aa(e,t,r,n){return e=Mt(22,e,n,t),e.elementType=lp,e.lanes=r,e.stateNode={isHidden:!1},e}function vl(e,t,r){return e=Mt(6,e,null,t),e.lanes=r,e}function yl(e,t,r){return t=Mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ww(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xa(0),this.expirationTimes=Xa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xa(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Yu(e,t,r,n,s,i,o,l,c){return e=new Ww(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Mt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Iu(i),e}function qw(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ts,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Zm(e){if(!e)return Zr;e=e._reactInternals;e:{if(Mn(e)!==e||e.tag!==1)throw Error(P(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(P(171))}if(e.tag===1){var r=e.type;if(mt(r))return Zp(e,r,t)}return t}function eg(e,t,r,n,s,i,o,l,c){return e=Yu(r,n,!0,e,s,i,o,l,c),e.context=Zm(null),r=e.current,n=it(),s=Jr(r),i=xr(n,s),i.callback=t??null,Hr(r,i,s),e.current.lanes=s,Hi(e,s,n),gt(e,n),e}function Oa(e,t,r,n){var s=t.current,i=it(),o=Jr(s);return r=Zm(r),t.context===null?t.context=r:t.pendingContext=r,t=xr(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Hr(s,t,o),e!==null&&(Zt(e,s,o,i),Ro(e,s,o)),o}function ca(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Kh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Xu(e,t){Kh(e,t),(e=e.alternate)&&Kh(e,t)}function Kw(){return null}var tg=typeof reportError=="function"?reportError:function(e){console.error(e)};function Zu(e){this._internalRoot=e}Ia.prototype.render=Zu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));Oa(e,t,null,null)};Ia.prototype.unmount=Zu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;On(function(){Oa(null,e,null,null)}),t[br]=null}};function Ia(e){this._internalRoot=e}Ia.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ap();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Mr.length&&t!==0&&t<Mr[r].priority;r++);Mr.splice(r,0,e),r===0&&Ip(e)}};function ed(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Vh(){}function Vw(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=ca(o);i.call(u)}}var o=eg(t,n,e,0,null,!1,!1,"",Vh);return e._reactRootContainer=o,e[br]=o.current,Ei(e.nodeType===8?e.parentNode:e),On(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=ca(c);l.call(u)}}var c=Yu(e,0,!1,null,null,!1,!1,"",Vh);return e._reactRootContainer=c,e[br]=c.current,Ei(e.nodeType===8?e.parentNode:e),On(function(){Oa(t,c,r,n)}),c}function La(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=ca(o);l.call(c)}}Oa(t,o,e,s)}else o=Vw(r,t,e,s,n);return ca(o)}Pp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ri(t.pendingLanes);r!==0&&(wu(t,r|1),gt(t,Ne()),!(te&6)&&(Ts=Ne()+500,nn()))}break;case 13:On(function(){var n=kr(e,1);if(n!==null){var s=it();Zt(n,e,1,s)}}),Xu(e,1)}};xu=function(e){if(e.tag===13){var t=kr(e,134217728);if(t!==null){var r=it();Zt(t,e,134217728,r)}Xu(e,134217728)}};Rp=function(e){if(e.tag===13){var t=Jr(e),r=kr(e,t);if(r!==null){var n=it();Zt(r,e,t,n)}Xu(e,t)}};Ap=function(){return se};Op=function(e,t){var r=se;try{return se=e,t()}finally{se=r}};sc=function(e,t,r){switch(t){case"input":if(Yl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Ea(n);if(!s)throw Error(P(90));up(n),Yl(n,s)}}}break;case"textarea":hp(e,r);break;case"select":t=r.value,t!=null&&ps(e,!!r.multiple,t,!1)}};wp=Hu;xp=On;var Hw={usingClientEntryPoint:!1,Events:[Ji,os,Ea,vp,yp,Hu]},Vs={findFiberByHostInstance:_n,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gw={bundleType:Vs.bundleType,version:Vs.version,rendererPackageName:Vs.rendererPackageName,rendererConfig:Vs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=kp(e),e===null?null:e.stateNode},findFiberByHostInstance:Vs.findFiberByHostInstance||Kw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wo.isDisabled&&wo.supportsFiber)try{ba=wo.inject(Gw),or=wo}catch{}}Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hw;Rt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ed(t))throw Error(P(200));return qw(e,t,null,r)};Rt.createRoot=function(e,t){if(!ed(e))throw Error(P(299));var r=!1,n="",s=tg;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Yu(e,1,!1,null,null,r,!1,n,s),e[br]=t.current,Ei(e.nodeType===8?e.parentNode:e),new Zu(t)};Rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=kp(t),e=e===null?null:e.stateNode,e};Rt.flushSync=function(e){return On(e)};Rt.hydrate=function(e,t,r){if(!$a(t))throw Error(P(200));return La(null,e,t,!0,r)};Rt.hydrateRoot=function(e,t,r){if(!ed(e))throw Error(P(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=tg;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=eg(t,null,e,1,r??null,s,!1,i,o),e[br]=t.current,Ei(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Ia(t)};Rt.render=function(e,t,r){if(!$a(t))throw Error(P(200));return La(null,e,t,!1,r)};Rt.unmountComponentAtNode=function(e){if(!$a(e))throw Error(P(40));return e._reactRootContainer?(On(function(){La(null,null,e,!1,function(){e._reactRootContainer=null,e[br]=null})}),!0):!1};Rt.unstable_batchedUpdates=Hu;Rt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!$a(r))throw Error(P(200));if(e==null||e._reactInternals===void 0)throw Error(P(38));return La(e,t,r,!1,n)};Rt.version="18.3.1-next-f1338f8080-20240426";function rg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rg)}catch(e){console.error(e)}}rg(),rp.exports=Rt;var Jw=rp.exports,Hh=Jw;ql.createRoot=Hh.createRoot,ql.hydrateRoot=Hh.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $i(){return $i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$i.apply(this,arguments)}var Br;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Br||(Br={}));const Gh="popstate";function Qw(e){e===void 0&&(e={});function t(s,i){let{pathname:o="/",search:l="",hash:c=""}=Un(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Mc("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof i=="string"?i:ua(i))}function n(s,i){Ma(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return Xw(t,r,n,e)}function Ce(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ma(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Yw(){return Math.random().toString(36).substr(2,8)}function Jh(e,t){return{usr:e.state,key:e.key,idx:t}}function Mc(e,t,r,n){return r===void 0&&(r=null),$i({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Un(t):t,{state:r,key:t&&t.key||n||Yw()})}function ua(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Un(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Xw(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=Br.Pop,c=null,u=d();u==null&&(u=0,o.replaceState($i({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Br.Pop;let x=d(),g=x==null?null:x-u;u=x,c&&c({action:l,location:m.location,delta:g})}function f(x,g){l=Br.Push;let p=Mc(m.location,x,g);r&&r(p,x),u=d()+1;let w=Jh(p,u),_=m.createHref(p);try{o.pushState(w,"",_)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(_)}i&&c&&c({action:l,location:m.location,delta:1})}function y(x,g){l=Br.Replace;let p=Mc(m.location,x,g);r&&r(p,x),u=d();let w=Jh(p,u),_=m.createHref(p);o.replaceState(w,"",_),i&&c&&c({action:l,location:m.location,delta:0})}function v(x){let g=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof x=="string"?x:ua(x);return p=p.replace(/ $/,"%20"),Ce(g,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,g)}let m={get action(){return l},get location(){return e(s,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Gh,h),c=x,()=>{s.removeEventListener(Gh,h),c=null}},createHref(x){return t(s,x)},createURL:v,encodeLocation(x){let g=v(x);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:y,go(x){return o.go(x)}};return m}var Qh;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Qh||(Qh={}));function Zw(e,t,r){return r===void 0&&(r="/"),ex(e,t,r)}function ex(e,t,r,n){let s=typeof t=="string"?Un(t):t,i=td(s.pathname||"/",r);if(i==null)return null;let o=ng(e);tx(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=fx(i);l=ux(o[c],u)}return l}function ng(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ce(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Yr([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Ce(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),ng(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:lx(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of sg(i.path))s(i,o,c)}),t}function sg(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=sg(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function tx(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:cx(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const rx=/^:[\w-]+$/,nx=3,sx=2,ix=1,ox=10,ax=-2,Yh=e=>e==="*";function lx(e,t){let r=e.split("/"),n=r.length;return r.some(Yh)&&(n+=ax),t&&(n+=sx),r.filter(s=>!Yh(s)).reduce((s,i)=>s+(rx.test(i)?nx:i===""?ix:ox),n)}function cx(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function ux(e,t,r){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=dx({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Yr([i,h.pathname]),pathnameBase:yx(Yr([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Yr([i,h.pathnameBase]))}return o}function dx(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=hx(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:y}=d;if(f==="*"){let m=l[h]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const v=l[h];return y&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function hx(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Ma(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function fx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ma(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function td(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const px=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mx=e=>px.test(e);function gx(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Un(e):e,i;if(r)if(mx(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),Ma(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=Xh(r.substring(1),"/"):i=Xh(r,t)}else i=t;return{pathname:i,search:wx(n),hash:xx(s)}}function Xh(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function wl(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vx(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function rd(e,t){let r=vx(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function nd(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Un(e):(s=$i({},e),Ce(!s.pathname||!s.pathname.includes("?"),wl("?","pathname","search",s)),Ce(!s.pathname||!s.pathname.includes("#"),wl("#","pathname","hash",s)),Ce(!s.search||!s.search.includes("#"),wl("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=gx(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Yr=e=>e.join("/").replace(/\/\/+/g,"/"),yx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),wx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,xx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _x(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ig=["post","put","patch","delete"];new Set(ig);const bx=["get",...ig];new Set(bx);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Li(){return Li=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Li.apply(this,arguments)}const sd=k.createContext(null),kx=k.createContext(null),sn=k.createContext(null),Ua=k.createContext(null),on=k.createContext({outlet:null,matches:[],isDataRoute:!1}),og=k.createContext(null);function Sx(e,t){let{relative:r}=t===void 0?{}:t;Ls()||Ce(!1);let{basename:n,navigator:s}=k.useContext(sn),{hash:i,pathname:o,search:l}=lg(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Yr([n,o])),s.createHref({pathname:c,search:l,hash:i})}function Ls(){return k.useContext(Ua)!=null}function an(){return Ls()||Ce(!1),k.useContext(Ua).location}function ag(e){k.useContext(sn).static||k.useLayoutEffect(e)}function ln(){let{isDataRoute:e}=k.useContext(on);return e?Mx():jx()}function jx(){Ls()||Ce(!1);let e=k.useContext(sd),{basename:t,future:r,navigator:n}=k.useContext(sn),{matches:s}=k.useContext(on),{pathname:i}=an(),o=JSON.stringify(rd(s,r.v7_relativeSplatPath)),l=k.useRef(!1);return ag(()=>{l.current=!0}),k.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=nd(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Yr([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,o,i,e])}function lg(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=k.useContext(sn),{matches:s}=k.useContext(on),{pathname:i}=an(),o=JSON.stringify(rd(s,n.v7_relativeSplatPath));return k.useMemo(()=>nd(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function Ex(e,t){return Nx(e,t)}function Nx(e,t,r,n){Ls()||Ce(!1);let{navigator:s}=k.useContext(sn),{matches:i}=k.useContext(on),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=an(),d;if(t){var h;let x=typeof t=="string"?Un(t):t;c==="/"||(h=x.pathname)!=null&&h.startsWith(c)||Ce(!1),d=x}else d=u;let f=d.pathname||"/",y=f;if(c!=="/"){let x=c.replace(/^\//,"").split("/");y="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=Zw(e,{pathname:y}),m=Ax(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Yr([c,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Yr([c,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,r,n);return t&&m?k.createElement(Ua.Provider,{value:{location:Li({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Br.Pop}},m):m}function Cx(){let e=Lx(),t=_x(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),r?k.createElement("pre",{style:s},r):null,null)}const Tx=k.createElement(Cx,null);class Px extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?k.createElement(on.Provider,{value:this.props.routeContext},k.createElement(og.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Rx(e){let{routeContext:t,match:r,children:n}=e,s=k.useContext(sd);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),k.createElement(on.Provider,{value:t},n)}function Ax(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Ce(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:y}=r,v=h.route.loader&&f[h.route.id]===void 0&&(!y||y[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let y,v=!1,m=null,x=null;r&&(y=l&&h.route.id?l[h.route.id]:void 0,m=h.route.errorElement||Tx,c&&(u<0&&f===0?(Ux("route-fallback"),v=!0,x=null):u===f&&(v=!0,x=h.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,f+1)),p=()=>{let w;return y?w=m:v?w=x:h.route.Component?w=k.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,k.createElement(Rx,{match:h,routeContext:{outlet:d,matches:g,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?k.createElement(Px,{location:r.location,revalidation:r.revalidation,component:m,error:y,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()},null)}var cg=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(cg||{}),ug=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ug||{});function Ox(e){let t=k.useContext(sd);return t||Ce(!1),t}function Ix(e){let t=k.useContext(kx);return t||Ce(!1),t}function $x(e){let t=k.useContext(on);return t||Ce(!1),t}function dg(e){let t=$x(),r=t.matches[t.matches.length-1];return r.route.id||Ce(!1),r.route.id}function Lx(){var e;let t=k.useContext(og),r=Ix(),n=dg();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Mx(){let{router:e}=Ox(cg.UseNavigateStable),t=dg(ug.UseNavigateStable),r=k.useRef(!1);return ag(()=>{r.current=!0}),k.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Li({fromRouteId:t},i)))},[e,t])}const Zh={};function Ux(e,t,r){Zh[e]||(Zh[e]=!0)}function Dx(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ef(e){let{to:t,replace:r,state:n,relative:s}=e;Ls()||Ce(!1);let{future:i,static:o}=k.useContext(sn),{matches:l}=k.useContext(on),{pathname:c}=an(),u=ln(),d=nd(t,rd(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return k.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function ut(e){Ce(!1)}function zx(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Br.Pop,navigator:i,static:o=!1,future:l}=e;Ls()&&Ce(!1);let c=t.replace(/^\/*/,"/"),u=k.useMemo(()=>({basename:c,navigator:i,static:o,future:Li({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Un(n));let{pathname:d="/",search:h="",hash:f="",state:y=null,key:v="default"}=n,m=k.useMemo(()=>{let x=td(d,c);return x==null?null:{location:{pathname:x,search:h,hash:f,state:y,key:v},navigationType:s}},[c,d,h,f,y,v,s]);return m==null?null:k.createElement(sn.Provider,{value:u},k.createElement(Ua.Provider,{children:r,value:m}))}function Fx(e){let{children:t,location:r}=e;return Ex(Uc(t),r)}new Promise(()=>{});function Uc(e,t){t===void 0&&(t=[]);let r=[];return k.Children.forEach(e,(n,s)=>{if(!k.isValidElement(n))return;let i=[...t,s];if(n.type===k.Fragment){r.push.apply(r,Uc(n.props.children,i));return}n.type!==ut&&Ce(!1),!n.props.index||!n.props.children||Ce(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Uc(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dc(){return Dc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dc.apply(this,arguments)}function Bx(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Wx(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function qx(e,t){return e.button===0&&(!t||t==="_self")&&!Wx(e)}const Kx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Vx="6";try{window.__reactRouterVersion=Vx}catch{}const Hx="startTransition",tf=U0[Hx];function Gx(e){let{basename:t,children:r,future:n,window:s}=e,i=k.useRef();i.current==null&&(i.current=Qw({window:s,v5Compat:!0}));let o=i.current,[l,c]=k.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=k.useCallback(h=>{u&&tf?tf(()=>c(h)):c(h)},[c,u]);return k.useLayoutEffect(()=>o.listen(d),[o,d]),k.useEffect(()=>Dx(n),[n]),k.createElement(zx,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const Jx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Qx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,st=k.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=Bx(t,Kx),{basename:y}=k.useContext(sn),v,m=!1;if(typeof u=="string"&&Qx.test(u)&&(v=u,Jx))try{let w=new URL(window.location.href),_=u.startsWith("//")?new URL(w.protocol+u):new URL(u),N=td(_.pathname,y);_.origin===w.origin&&N!=null?u=N+_.search+_.hash:m=!0}catch{}let x=Sx(u,{relative:s}),g=Yx(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function p(w){n&&n(w),w.defaultPrevented||g(w)}return k.createElement("a",Dc({},f,{href:v||x,onClick:m||i?n:p,ref:r,target:c}))});var rf;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(rf||(rf={}));var nf;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(nf||(nf={}));function Yx(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=ln(),u=an(),d=lg(e,{relative:o});return k.useCallback(h=>{if(qx(h,r)){h.preventDefault();let f=n!==void 0?n:ua(u)===ua(d);c(e,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,s,r,e,i,o,l])}function Da(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function Xx(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}const Zx=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class id extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class e_ extends id{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class sf extends id{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class of extends id{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var zc;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(zc||(zc={}));class t_{constructor(t,{headers:r={},customFetch:n,region:s=zc.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=Zx(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Xx(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:l,method:c,body:u,signal:d,timeout:h}=n;let f={},{region:y}=n;y||(y=this.region);const v=new URL(`${this.url}/${r}`);y&&y!=="any"&&(f["x-region"]=y,v.searchParams.set("forceFunctionRegion",y));let m;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",m=u):typeof u=="string"?(f["Content-Type"]="text/plain",m=u):typeof FormData<"u"&&u instanceof FormData?m=u:(f["Content-Type"]="application/json",m=JSON.stringify(u)):m=u;let x=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(x=o.signal,d.addEventListener("abort",()=>o.abort())):x=o.signal);const g=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:m,signal:x}).catch(N=>{throw new e_(N)}),p=g.headers.get("x-relay-error");if(p&&p==="true")throw new sf(g);if(!g.ok)throw new of(g);let w=((s=g.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return w==="application/json"?_=yield g.json():w==="application/octet-stream"||w==="application/pdf"?_=yield g.blob():w==="text/event-stream"?_=g:w==="multipart/form-data"?_=yield g.formData():_=yield g.text(),{data:_,error:null,response:g}}catch(l){return{data:null,error:l,response:l instanceof of||l instanceof sf?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var r_=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},n_=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,u=i.status,d=i.statusText;if(i.ok){var h,f;if(r.method!=="HEAD"){var y;const g=await i.text();g===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((y=r.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?l=g:l=JSON.parse(g))}const m=(h=r.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),x=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");m&&x&&x.length>1&&(c=parseInt(x[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var v;const m=await i.text();try{o=JSON.parse(m),Array.isArray(o)&&i.status===404&&(l=[],o=null,u=200,d="OK")}catch{i.status===404&&m===""?(u=204,d="No Content"):o={message:m}}if(o&&r.isMaybeSingle&&(!(o==null||(v=o.details)===null||v===void 0)&&v.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&r.shouldThrowOnError)throw new r_(o)}return{error:o,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let l="";const c=i==null?void 0:i.cause;if(c){var u,d,h,f;const v=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",m=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";l=`${(h=i==null?void 0:i.name)!==null&&h!==void 0?h:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"Error"}: ${v}`,m&&(l+=` (${m})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var y;l=(y=i==null?void 0:i.stack)!==null&&y!==void 0?y:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},s_=class extends n_{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const af=new RegExp("[,()]");var Xn=class extends s_{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&af.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&af.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},i_=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new Xn({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(i.length>0){const o=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Xn({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer",`count=${n}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Xn({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Xn({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Xn({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},o_=class hg{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new i_(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new hg(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(l="POST",u=r);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new Xn({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class a_{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const l_="2.89.0",c_=`realtime-js/${l_}`,fg="1.0.0",u_="2.0.0",lf=fg,Fc=1e4,d_=1e3,h_=100;var $r;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})($r||($r={}));var Oe;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Oe||(Oe={}));var Qt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Qt||(Qt={}));var Bc;(function(e){e.websocket="websocket"})(Bc||(Bc={}));var wn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(wn||(wn={}));class f_{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var s,i;const o=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+h.length,y=new ArrayBuffer(this.HEADER_LENGTH+f);let v=new DataView(y),m=0;v.setUint8(m++,this.KINDS.userBroadcastPush),v.setUint8(m++,c.length),v.setUint8(m++,l.length),v.setUint8(m++,o.length),v.setUint8(m++,u.length),v.setUint8(m++,h.length),v.setUint8(m++,r),Array.from(c,g=>v.setUint8(m++,g.charCodeAt(0))),Array.from(l,g=>v.setUint8(m++,g.charCodeAt(0))),Array.from(o,g=>v.setUint8(m++,g.charCodeAt(0))),Array.from(u,g=>v.setUint8(m++,g.charCodeAt(0))),Array.from(h,g=>v.setUint8(m++,g.charCodeAt(0)));var x=new Uint8Array(y.byteLength+n.byteLength);return x.set(new Uint8Array(y),0),x.set(new Uint8Array(n),y.byteLength),x.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,o,l,c]=n;return r({join_ref:s,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+s));c=c+s;const d=n.decode(t.slice(c,c+i));c=c+i;const h=n.decode(t.slice(c,c+o));c=c+o;const f=t.slice(c,t.byteLength),y=l===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,v={type:this.BROADCAST_EVENT,event:d,payload:y};return o>0&&(v.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}let pg=class{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ie;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ie||(ie={}));const cf=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=p_(o,e,t,s),i),{}):{}},p_=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?mg(i,o):Wc(o)},mg=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return y_(t,r)}switch(e){case ie.bool:return m_(t);case ie.float4:case ie.float8:case ie.int2:case ie.int4:case ie.int8:case ie.numeric:case ie.oid:return g_(t);case ie.json:case ie.jsonb:return v_(t);case ie.timestamp:return w_(t);case ie.abstime:case ie.date:case ie.daterange:case ie.int4range:case ie.int8range:case ie.money:case ie.reltime:case ie.text:case ie.time:case ie.timestamptz:case ie.timetz:case ie.tsrange:case ie.tstzrange:return Wc(t);default:return Wc(t)}},Wc=e=>e,m_=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},g_=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},v_=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},y_=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>mg(t,l))}return e},w_=e=>typeof e=="string"?e.replace(" ","T"):e,gg=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class xl{constructor(t,r,n={},s=Fc){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var uf;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(uf||(uf={}));class mi{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=mi.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=mi.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=mi.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(x=>x.presence_ref),y=h.map(x=>x.presence_ref),v=d.filter(x=>y.indexOf(x.presence_ref)<0),m=h.filter(x=>f.indexOf(x.presence_ref)<0);v.length>0&&(l[u]=v),m.length>0&&(c[u]=m)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(y=>y.presence_ref),f=d.filter(y=>h.indexOf(y.presence_ref)<0);t[l].unshift(...f)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var df;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(df||(df={}));var gi;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(gi||(gi={}));var pr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(pr||(pr={}));class fs{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Oe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new xl(this,Qt.join,this.params,this.timeout),this.rejoinTimer=new pg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Oe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Oe.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Oe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Oe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Oe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Qt.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new mi(this),this.broadcastEndpointURL=gg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Oe.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(y=>y.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[gi.PRESENCE]&&this.bindings[gi.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(y=>t==null?void 0:t(pr.CHANNEL_ERROR,y)),this._onClose(()=>t==null?void 0:t(pr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:y})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),y===void 0){t==null||t(pr.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,x=(v=m==null?void 0:m.length)!==null&&v!==void 0?v:0,g=[];for(let p=0;p<x;p++){const w=m[p],{filter:{event:_,schema:N,table:C,filter:R}}=w,T=y&&y[p];if(T&&T.event===_&&fs.isFilterValueEqual(T.schema,N)&&fs.isFilterValueEqual(T.table,C)&&fs.isFilterValueEqual(T.filter,R))g.push(Object.assign(Object.assign({},w),{id:T.id}));else{this.unsubscribe(),this.state=Oe.errored,t==null||t(pr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(pr.SUBSCRIBED);return}}).receive("error",y=>{this.state=Oe.errored,t==null||t(pr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(pr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Oe.joined&&t===gi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Oe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Qt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new xl(this,Qt.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Oe.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new xl(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>h_){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Qt;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var v,m,x;return((v=y.filter)===null||v===void 0?void 0:v.event)==="*"||((x=(m=y.filter)===null||m===void 0?void 0:m.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(y=>y.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var v,m,x,g,p,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const _=y.id,N=(v=y.filter)===null||v===void 0?void 0:v.event;return _&&((m=r.ids)===null||m===void 0?void 0:m.includes(_))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const _=(p=(g=y==null?void 0:y.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return _==="*"||_===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:m,table:x,commit_timestamp:g,type:p,errors:w}=v;f=Object.assign(Object.assign({},{schema:m,table:x,commit_timestamp:g,eventType:p,new:{},old:{},errors:w}),this._getPayloadRecords(v))}y.callback(f,n)})}_isClosed(){return this.state===Oe.closed}_isJoined(){return this.state===Oe.joined}_isJoining(){return this.state===Oe.joining}_isLeaving(){return this.state===Oe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&fs.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Qt.close,{},t)}_onError(t){this._on(Qt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Oe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=cf(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=cf(t.columns,t.old_record)),r}}const _l=()=>{},xo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},x_=[1e3,2e3,5e3,1e4],__=1e4,b_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class k_{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Fc,this.transport=null,this.heartbeatIntervalMs=xo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=_l,this.ref=0,this.reconnectTimer=null,this.vsn=lf,this.logger=_l,this.conn=null,this.sendBuffer=[],this.serializer=new f_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Bc.websocket}`,this.httpEndpoint=gg(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=a_.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case $r.connecting:return wn.Connecting;case $r.open:return wn.Open;case $r.closing:return wn.Closing;default:return wn.Closed}}isConnected(){return this.connectionState()===wn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new fs(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(d_,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},xo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===$r.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===$r.open||this.conn.readyState===$r.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Qt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([b_],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:c_};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Qt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new pg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},xo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,l,c,u,d,h,f,y;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Fc,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:xo.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:_l,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:lf,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:v=>x_[v-1]||__,this.vsn){case fg:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(v,m)=>m(JSON.stringify(v)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(v,m)=>m(JSON.parse(v));break;case u_:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(y=t==null?void 0:t.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Mi=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function S_(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function j_(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function E_(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const l=S_(e.baseUrl,n,s),c=await j_(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const y=h?f:void 0,v=y==null?void 0:y.error;throw new Mi((v==null?void 0:v.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:y})}return{status:u.status,headers:u.headers,data:f}}}}function _o(e){return e.join("")}var N_=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:_o(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${_o(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_o(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${_o(e.namespace)}`}),!0}catch(t){if(t instanceof Mi&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Mi&&r.status===409)return;throw r}}};function Wn(e){return e.join("")}var C_=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wn(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wn(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wn(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Wn(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wn(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Wn(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Mi&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Mi&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},T_=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=E_({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new N_(this.client,t),this.tableOps=new C_(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},za=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function ge(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var P_=class extends za{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},qc=class extends za{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const od=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),R_=()=>Response,Kc=e=>{if(Array.isArray(e))return e.map(r=>Kc(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Kc(n)}),t},A_=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},O_=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Ui(e){"@babel/helpers - typeof";return Ui=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ui(e)}function I_(e,t){if(Ui(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ui(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $_(e){var t=I_(e,"string");return Ui(t)=="symbol"?t:t+""}function L_(e,t,r){return(t=$_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hf(Object(r),!0).forEach(function(n){L_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const bl=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},M_=async(e,t,r)=>{e instanceof await R_()&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{const s=e.status||500,i=(n==null?void 0:n.statusCode)||s+"";t(new P_(bl(n),s,i))}).catch(n=>{t(new qc(bl(n),n))}):t(new qc(bl(e),e))},U_=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(A_(n)?(s.headers=B({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),B(B({},s),r))};async function Yi(e,t,r,n,s,i){return new Promise((o,l)=>{e(r,U_(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>M_(c,l,n))})}async function Di(e,t,r,n){return Yi(e,"GET",t,r,n)}async function Gt(e,t,r,n,s){return Yi(e,"POST",t,n,s,r)}async function Vc(e,t,r,n,s){return Yi(e,"PUT",t,n,s,r)}async function D_(e,t,r,n){return Yi(e,"HEAD",t,B(B({},r),{},{noResolveJson:!0}),n)}async function ad(e,t,r,n,s){return Yi(e,"DELETE",t,n,s,r)}var z_=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ge(t))return{data:null,error:t};throw t}}};let vg;vg=Symbol.toStringTag;var F_=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[vg]="BlobDownloadBuilder",this.promise=null}asStream(){return new z_(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ge(t))return{data:null,error:t};throw t}}};const B_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ff={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var W_=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=od(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){var s=this;try{let i;const o=B(B({},ff),n);let l=B(B({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",s.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=B(B({},l),n.headers));const u=s._removeEmptyFolders(t),d=s._getFinalPath(u),h=await(e=="PUT"?Vc:Gt)(s.fetch,`${s.url}/object/${d}`,i,B({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(ge(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const i=s._removeEmptyFolders(e),o=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const u=B({upsert:ff.upsert},n),d=B(B({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:i,fullPath:(await Vc(s.fetch,l.toString(),c,{headers:d})).Key},error:null}}catch(c){if(s.shouldThrowOnError)throw c;if(ge(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var r=this;try{let n=r._getFinalPath(e);const s=B({},r.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await Gt(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new za("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ge(n))return{data:null,error:n};throw n}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;try{return{data:await Gt(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ge(s))return{data:null,error:s};throw s}}async copy(e,t,r){var n=this;try{return{data:{path:(await Gt(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ge(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,r){var n=this;try{let s=n._getFinalPath(e),i=await Gt(n.fetch,`${n.url}/object/sign/${s}`,B({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ge(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,r){var n=this;try{const s=await Gt(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>B(B({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ge(s))return{data:null,error:s};throw s}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>Di(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new F_(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:Kc(await Di(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ge(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await D_(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ge(n)&&n instanceof qc){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;try{return{data:await ad(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ge(r))return{data:null,error:r};throw r}}async list(e,t,r){var n=this;try{const s=B(B(B({},B_),t),{},{prefix:e||""});return{data:await Gt(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ge(s))return{data:null,error:s};throw s}}async listV2(e,t){var r=this;try{const n=B({},e);return{data:await Gt(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ge(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const yg="2.89.0",wg={"X-Client-Info":`storage-js/${yg}`};var q_=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const s=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=B(B({},wg),t),this.fetch=od(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await Di(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ge(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await Di(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ge(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await Gt(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ge(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var r=this;try{return{data:await Vc(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ge(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await Gt(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ge(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await ad(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ge(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},K_=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=B(B({},wg),t),this.fetch=od(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Gt(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ge(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await Di(t.fetch,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ge(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await ad(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ge(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!O_(e))throw new za("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new T_({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(s,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}};const ld={"X-Client-Info":`storage-js/${yg}`,"Content-Type":"application/json"};var xg=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function jt(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var kl=class extends xg{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},V_=class extends xg{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const cd=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),H_=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},pf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),G_=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const n=e.status||500,s=e;if(typeof s.json=="function")s.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";t(new kl(pf(i),n,o))}).catch(()=>{const i=n+"";t(new kl(s.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";t(new kl(s.statusText||`HTTP ${n} error`,n,i))}}else t(new V_(pf(e),e))},J_=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(H_(n)?(s.headers=B({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,B(B({},s),r)):s};async function Q_(e,t,r,n,s,i){return new Promise((o,l)=>{e(r,J_(t,n,s,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>G_(c,l,n))})}async function Et(e,t,r,n,s){return Q_(e,"POST",t,n,s,r)}var Y_=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=B(B({},ld),t),this.fetch=cd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await Et(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await Et(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(jt(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await Et(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await Et(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(jt(n))return{data:null,error:n};throw n}}},X_=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=B(B({},ld),t),this.fetch=cd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Et(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await Et(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await Et(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await Et(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Et(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}}},Z_=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=B(B({},ld),t),this.fetch=cd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Et(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await Et(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await Et(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Et(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}}},eb=class extends Z_{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new tb(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},tb=class extends Y_{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,B(B({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,B(B({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new rb(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},rb=class extends X_{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,B(B({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,B(B({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,B(B({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,B(B({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,B(B({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},nb=class extends q_{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new W_(this.url,this.headers,e,this.fetch)}get vectors(){return new eb(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new K_(this.url+"/iceberg",this.headers,this.fetch)}};const _g="2.89.0",Zn=30*1e3,Hc=3,Sl=Hc*Zn,sb="http://localhost:9999",ib="supabase.auth.token",ob={"X-Client-Info":`gotrue-js/${_g}`},Gc="X-Supabase-Api-Version",bg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ab=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,lb=10*60*1e3;class zi extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function $(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class cb extends zi{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function ub(e){return $(e)&&e.name==="AuthApiError"}class xn extends zi{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Er extends zi{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class bt extends Er{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function db(e){return $(e)&&e.name==="AuthSessionMissingError"}class qn extends Er{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bo extends Er{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ko extends Er{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function hb(e){return $(e)&&e.name==="AuthImplicitGrantRedirectError"}class mf extends Er{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fb extends Er{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Jc extends Er{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function jl(e){return $(e)&&e.name==="AuthRetryableFetchError"}class gf extends Er{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Qc extends Er{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const da="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),vf=` 	
\r=`.split(""),pb=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<vf.length;t+=1)e[vf[t].charCodeAt(0)]=-2;for(let t=0;t<da.length;t+=1)e[da[t].charCodeAt(0)]=t;return e})();function yf(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(da[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(da[n]),t.queuedBits-=6}}function kg(e,t,r){const n=pb[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function wf(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{vb(o,n,r)};for(let o=0;o<e.length;o+=1)kg(e.charCodeAt(o),s,i);return t.join("")}function mb(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function gb(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}mb(n,t)}}function vb(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function xs(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)kg(e.charCodeAt(s),r,n);return new Uint8Array(t)}function yb(e){const t=[];return gb(e,r=>t.push(r)),new Uint8Array(t)}function Sn(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>yf(s,r,n)),yf(null,r,n),t.join("")}function wb(e){return Math.round(Date.now()/1e3)+e}function xb(){return Symbol("auth-callback")}const Ve=()=>typeof window<"u"&&typeof document<"u",hn={tested:!1,writable:!1},Sg=()=>{if(!Ve())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(hn.tested)return hn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),hn.tested=!0,hn.writable=!0}catch{hn.tested=!0,hn.writable=!1}return hn.writable};function _b(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const jg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),bb=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",es=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},fn=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},qe=async(e,t)=>{await e.removeItem(t)};class Fa{constructor(){this.promise=new Fa.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Fa.promiseConstructor=Promise;function El(e){const t=e.split(".");if(t.length!==3)throw new Qc("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!ab.test(t[n]))throw new Qc("JWT not in base64url format");return{header:JSON.parse(wf(t[0])),payload:JSON.parse(wf(t[1])),signature:xs(t[2]),raw:{header:t[0],payload:t[1]}}}async function kb(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Sb(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function jb(e){return("0"+e.toString(16)).substr(-2)}function Eb(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,jb).join("")}async function Nb(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Cb(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Nb(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Kn(e,t,r=!1){const n=Eb();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await es(e,`${t}-code-verifier`,s);const i=await Cb(n);return[i,n===i?"plain":"s256"]}const Tb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Pb(e){const t=e.headers.get(Gc);if(!t||!t.match(Tb))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Rb(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Ab(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ob=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vn(e){if(!Ob.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Nl(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ib(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function xf(e){return JSON.parse(JSON.stringify(e))}const vn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),$b=[502,503,504];async function _f(e){var t;if(!bb(e))throw new Jc(vn(e),0);if($b.includes(e.status))throw new Jc(vn(e),e.status);let r;try{r=await e.json()}catch(i){throw new xn(vn(i),i)}let n;const s=Pb(e);if(s&&s.getTime()>=bg["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new gf(vn(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new bt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new gf(vn(r),e.status,r.weak_password.reasons);throw new cb(vn(r),e.status||500,n)}const Lb=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function F(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Gc]||(i[Gc]=bg["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Mb(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Mb(e,t,r,n,s,i){const o=Lb(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Jc(vn(c),0)}if(l.ok||await _f(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await _f(c)}}function Vt(e){var t;let r=null;zb(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=wb(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function bf(e){const t=Vt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Dr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Ub(e){return{data:e,error:null}}function Db(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=Da(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function kf(e){return e}function zb(e){return e.access_token&&e.refresh_token&&e.expires_in}const Cl=["global","local","others"];class Fb{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=jg(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Cl[0]){if(Cl.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Cl.join(", ")}`);try{return await F(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if($(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await F(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Dr})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Da(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await F(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Db,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if($(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await F(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Dr})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await F(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:kf});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(v=>{const m=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);u[`${x}Page`]=m}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if($(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Vn(t);try{return await F(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Dr})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Vn(t);try{return await F(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Dr})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Vn(t);try{return await F(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Dr})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Vn(t.userId);try{const{data:r,error:n}=await F(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if($(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Vn(t.userId),Vn(t.id);try{return{data:await F(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await F(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:kf});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(v=>{const m=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);u[`${x}Page`]=m}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if($(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await F(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await F(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await F(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await F(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await F(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($(r))return{data:null,error:r};throw r}}}function Sf(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Hn={debug:!!(globalThis&&Sg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Eg extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Bb extends Eg{}async function Wb(e,t,r){Hn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Hn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Hn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Hn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Hn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Bb(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Hn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function qb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ng(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Kb(e){return parseInt(e,16)}function Vb(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function Hb(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=Ng(e.address),v=d?`${d}://${n}`:n,m=e.statement?`${e.statement}
`:"",x=`${v} wants you to sign in with your Ethereum account:
${y}

${m}`;let g=`URI: ${h}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(g+=`
Expiration Time: ${s.toISOString()}`),l&&(g+=`
Not Before: ${l.toISOString()}`),c&&(g+=`
Request ID: ${c}`),u){let p=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);p+=`
- ${w}`}g+=p}return`${x}
${g}`}class Re extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class ha extends Re{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function Gb({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Re({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Re({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Re({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Re({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Re({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Re({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Re({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Re({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(Cg(o)){if(i.rp.id!==o)return new Re({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Re({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Re({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Re({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Re({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Jb({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Re({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Re({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(Cg(n)){if(r.rpId!==n)return new Re({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Re({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Re({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Re({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Qb{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Yb=new Qb;function Xb(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=Da(e,["challenge","user","excludeCredentials"]),i=xs(t).buffer,o=Object.assign(Object.assign({},r),{id:xs(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:xs(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function Zb(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Da(e,["challenge","allowCredentials"]),s=xs(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:xs(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function e1(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Sn(new Uint8Array(e.response.attestationObject)),clientDataJSON:Sn(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function t1(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Sn(new Uint8Array(s.authenticatorData)),clientDataJSON:Sn(new Uint8Array(s.clientDataJSON)),signature:Sn(new Uint8Array(s.signature)),userHandle:s.userHandle?Sn(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Cg(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function jf(){var e,t;return!!(Ve()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function r1(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ha("Browser returned unexpected credential type",t)}:{data:null,error:new ha("Empty credential response",t)}}catch(t){return{data:null,error:Gb({error:t,options:e})}}}async function n1(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ha("Browser returned unexpected credential type",t)}:{data:null,error:new ha("Empty credential response",t)}}catch(t){return{data:null,error:Jb({error:t,options:e})}}}const s1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},i1={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function fa(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=fa(l,o):n[i]=fa(o)}else n[i]=o}return n}function o1(e,t){return fa(s1,e,t||{})}function a1(e,t){return fa(i1,e,t||{})}class l1{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=s??Yb.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=o1(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await r1({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=a1(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await n1(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return $(o)?{data:null,error:o}:{data:null,error:new xn("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new zi("rpId is required for WebAuthn authentication")};try{if(!jf())return{data:null,error:new xn("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return $(o)?{data:null,error:o}:{data:null,error:new xn("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new zi("rpId is required for WebAuthn registration")};try{if(!jf())return{data:null,error:new xn("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return $(o)?{data:null,error:o}:{data:null,error:new xn("Unexpected error in register",o)}}}}qb();const c1={url:sb,storageKey:ib,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ob,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Ef(e,t,r){return await r()}const Gn={};class Fi{get jwks(){var t,r;return(r=(t=Gn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Gn[this.storageKey]=Object.assign(Object.assign({},Gn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Gn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Gn[this.storageKey]=Object.assign(Object.assign({},Gn[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},c1),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Fi.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Fi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Ve()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Fb({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=jg(i.fetch),this.lock=i.lock||Ef,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Ve()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Wb:this.lock=Ef,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new l1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Sg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Sf(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Sf(this.memoryStorage)),Ve()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${_g}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Ve()&&(r=_b(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Ve()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),hb(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return $(r)?this._returnResult({error:r}):this._returnResult({error:new xn("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Vt}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if($(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await Kn(this.storage,this.storageKey)),i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:y,code_challenge_method:v},xform:Vt})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Vt})}else throw new bo("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await qe(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await qe(this.storage,`${this.storageKey}-code-verifier`),$(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:bf})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:bf})}else throw new bo("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new qn;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if($(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,l,c,u,d,h,f;let y,v;if("message"in t)y=t.message,v=t.signature;else{const{chain:m,wallet:x,statement:g,options:p}=t;let w;if(Ve())if(typeof x=="object")w=x;else{const q=window;if("ethereum"in q&&typeof q.ethereum=="object"&&"request"in q.ethereum&&typeof q.ethereum.request=="function")w=q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=x}const _=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href),N=await w.request({method:"eth_requestAccounts"}).then(q=>q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=Ng(N[0]);let R=(n=p==null?void 0:p.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!R){const q=await w.request({method:"eth_chainId"});R=Kb(q)}const T={domain:_.host,address:C,statement:g,uri:_.href,version:"1",chainId:R,nonce:(s=p==null?void 0:p.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=p==null?void 0:p.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=p==null?void 0:p.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=p==null?void 0:p.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=p==null?void 0:p.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=p==null?void 0:p.signInWithEthereum)===null||d===void 0?void 0:d.resources};y=Hb(T),v=await w.request({method:"personal_sign",params:[Vb(y),C]})}try{const{data:m,error:x}=await F(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:v},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Vt});if(x)throw x;if(!m||!m.session||!m.user){const g=new qn;return this._returnResult({data:{user:null,session:null},error:g})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:x})}catch(m){if($(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithSolana(t){var r,n,s,i,o,l,c,u,d,h,f,y;let v,m;if("message"in t)v=t.message,m=t.signature;else{const{chain:x,wallet:g,statement:p,options:w}=t;let _;if(Ve())if(typeof g=="object")_=g;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))_=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=g}const N=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const C=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),p?{statement:p}:null));let R;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")R=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)R=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)v=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),m=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${N.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const C=await _.signMessage(new TextEncoder().encode(v),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=C}}try{const{data:x,error:g}=await F(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Sn(m)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Vt});if(g)throw g;if(!x||!x.session||!x.user){const p=new qn;return this._returnResult({data:{user:null,session:null},error:p})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:g})}catch(x){if($(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(t){const r=await fn(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new fb;const{data:i,error:o}=await F(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Vt});if(await qe(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new qn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await qe(this.storage,`${this.storageKey}-code-verifier`),$(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await F(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Vt}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new qn;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if($(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Kn(this.storage,this.storageKey));const{error:h}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new bo("You must provide either an email or phone number.")}catch(l){if(await qe(this.storage,`${this.storageKey}-code-verifier`),$(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await F(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Vt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if($(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Kn(this.storage,this.storageKey));const u=await F(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:Ub});return!((i=u.data)===null||i===void 0)&&i.url&&Ve()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await qe(this.storage,`${this.storageKey}-code-verifier`),$(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new bt;const{error:s}=await F(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if($(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await F(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await F(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new bo("You must provide either an email or phone number and a type")}catch(r){if($(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await fn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Sl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await fn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Nl()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=Ib(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Dr}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bt}:await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Dr})})}catch(r){if($(r))return db(r)&&(await this._removeSession(),await qe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new bt;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Kn(this.storage,this.storageKey));const{data:u,error:d}=await F(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Dr});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await qe(this.storage,`${this.storageKey}-code-verifier`),$(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new bt;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=El(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if($(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new bt;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if($(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Ve())throw new ko("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ko(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new mf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ko("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new mf("No code detected.");const{data:p,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new ko("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const y=f-d;y*1e3<=Zn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${h}s`);const v=f-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,d);const{data:m,error:x}=await this._getUser(i);if(x)throw x;const g={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:t.type},error:null})}catch(n){if($(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await fn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(ub(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await qe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=xb(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Kn(this.storage,this.storageKey,!0));try{return await F(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await qe(this.storage,`${this.storageKey}-code-verifier`),$(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await F(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Ve()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if($(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,h=await F(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Vt}),{data:f,error:y}=h;return y?this._returnResult({data:{user:null,session:null},error:y}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new qn}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:y}))}catch(s){if(await qe(this.storage,`${this.storageKey}-code-verifier`),$(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await F(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Sb(async s=>(s>0&&await kb(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await F(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Vt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&jl(i)&&Date.now()+o-n<Zn})}catch(n){if(this._debug(r,"error",n),$(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ve()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await fn(this.storage,this.storageKey);if(s&&this.userStorage){let o=await fn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await es(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Nl()}else if(s&&!s.user&&!s.user){const o=await fn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await qe(this.storage,this.storageKey+"-user"),await es(this.storage,this.storageKey,s)):s.user=Nl()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Sl;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Sl}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),jl(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new bt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Fa;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new bt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),$(i)){const o={data:null,error:i};return jl(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await qe(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await es(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=xf(s);await es(this.storage,this.storageKey,i)}else{const s=xf(r);await es(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await qe(this.storage,this.storageKey),await qe(this.storage,this.storageKey+"-code-verifier"),await qe(this.storage,this.storageKey+"-user"),this.userStorage&&await qe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ve()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Zn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Zn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Zn}ms, refresh threshold is ${Hc} ticks`),s<=Hc&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Eg)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ve()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Kn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await F(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await F(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?e1(t.webauthn.credential_response):t1(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await F(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await F(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Xb(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Zb(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=El(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await F(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new bt})})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new bt});const o=await F(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Ve()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if($(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new bt});const o=await F(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Ve()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if($(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await F(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new bt})})}catch(t){if($(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await F(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new bt})})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+lb>s)return n;const{data:i,error:o}=await F(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:y,error:v}=await this.getSession();if(v||!y.session)return this._returnResult({data:null,error:v});n=y.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=El(n);r!=null&&r.allowExpired||Rb(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:i,header:s,signature:o},error:null}}const d=Ab(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,yb(`${l}.${c}`)))throw new Qc("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if($(n))return this._returnResult({data:null,error:n});throw n}}}Fi.nextInstanceID={};const u1=Fi,d1="2.89.0";let si="";typeof Deno<"u"?si="deno":typeof document<"u"?si="web":typeof navigator<"u"&&navigator.product==="ReactNative"?si="react-native":si="node";const h1={"X-Client-Info":`supabase-js-${si}/${d1}`},f1={headers:h1},p1={schema:"public"},m1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},g1={};function Bi(e){"@babel/helpers - typeof";return Bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bi(e)}function v1(e,t){if(Bi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y1(e){var t=v1(e,"string");return Bi(t)=="symbol"?t:t+""}function w1(e,t,r){return(t=y1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nf(Object(r),!0).forEach(function(n){w1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const x1=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),_1=()=>Headers,b1=(e,t,r)=>{const n=x1(r),s=_1();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,_e(_e({},o),{},{headers:u}))}};function k1(e){return e.endsWith("/")?e:e+"/"}function S1(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:_e(_e({},c),s),auth:_e(_e({},u),i),realtime:_e(_e({},d),o),storage:{},global:_e(_e(_e({},h),l),{},{headers:_e(_e({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function j1(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(k1(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var E1=class extends u1{constructor(e){super(e)}},N1=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const i=j1(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:p1,realtime:g1,auth:_e(_e({},m1),{},{storageKey:o}),global:f1},c=S1(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=b1(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(_e({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new o_(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new nb(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new t_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new E1({url:this.authUrl.href,headers:_e(_e({},f),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:l,debug:c,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new k_(this.realtimeUrl.href,_e(_e({},e),{},{params:_e(_e({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const C1=(e,t,r)=>new N1(e,t,r);function T1(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}T1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const _s={},P1=_s==null?void 0:_s.VITE_SUPABASE_URL,R1=_s==null?void 0:_s.VITE_SUPABASE_ANON_KEY,A1=P1||"https://hejgvnlkkslybzqsbuxm.supabase.co",O1=R1||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imhlamd2bmxra3NseWJ6cXNidXhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU1NzQxODgsImV4cCI6MjA4MTE1MDE4OH0.eCrjZyUi7bG278d7JK3lKLHK-nvX9IXGbJjS_-lodeQ";console.log("Supabase Init:","URL Found");const Y=C1(A1,O1),Tg=k.createContext({user:null,loading:!0,signOut:async()=>{}}),I1=({children:e})=>{const[t,r]=k.useState(null),[n,s]=k.useState(!0);k.useEffect(()=>{Y.auth.getSession().then(({data:{session:l}})=>{r((l==null?void 0:l.user)??null),s(!1)});const{data:{subscription:o}}=Y.auth.onAuthStateChange((l,c)=>{r((c==null?void 0:c.user)??null),s(!1)});return()=>o.unsubscribe()},[]);const i=async()=>{await Y.auth.signOut()};return a.jsx(Tg.Provider,{value:{user:t,loading:n,signOut:i},children:e})},Xi=()=>k.useContext(Tg);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Q=(e,t)=>{const r=k.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>k.createElement("svg",{ref:d,...$1,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${L1(e)}`,l].join(" "),...u},[...t.map(([h,f])=>k.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=Q("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=Q("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=Q("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=Q("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=Q("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=Q("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=Q("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=Q("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=Q("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=Q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=Q("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=Q("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=Q("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=Q("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=Q("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=Q("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=Q("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=Q("Frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=Q("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=Q("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=Q("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=Q("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=Q("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=Q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=Q("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=Q("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=Q("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=Q("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=Q("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=Q("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=Q("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=Q("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=Q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=Q("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=Q("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=Q("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=Q("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=Q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=Q("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=Q("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=Q("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function zg(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=zg(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function nk(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=zg(e))&&(n&&(n+=" "),n+=t);return n}const ud="-",sk=e=>{const t=ok(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(ud);return l[0]===""&&l.length!==1&&l.shift(),Fg(l,t)||ik(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},Fg=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?Fg(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(ud);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},Tf=/^\[(.+)\]$/,ik=e=>{if(Tf.test(e)){const t=Tf.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},ok=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return lk(Object.entries(e.classGroups),r).forEach(([i,o])=>{Xc(o,n,i,t)}),n},Xc=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:Pf(t,s);i.classGroupId=r;return}if(typeof s=="function"){if(ak(s)){Xc(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,o])=>{Xc(o,Pf(t,i),r,n)})})},Pf=(e,t)=>{let r=e;return t.split(ud).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},ak=e=>e.isThemeGetter,lk=(e,t)=>t?e.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,s]}):e,ck=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){r.has(i)?r.set(i,o):s(i,o)}}},Bg="!",uk=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],i=t.length,o=l=>{const c=[];let u=0,d=0,h;for(let x=0;x<l.length;x++){let g=l[x];if(u===0){if(g===s&&(n||l.slice(x,x+i)===t)){c.push(l.slice(d,x)),d=x+i;continue}if(g==="/"){h=x;continue}}g==="["?u++:g==="]"&&u--}const f=c.length===0?l:l.substring(d),y=f.startsWith(Bg),v=y?f.substring(1):f,m=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:m}};return r?l=>r({className:l,parseClassName:o}):o},dk=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},hk=e=>({cache:ck(e.cacheSize),parseClassName:uk(e),...sk(e)}),fk=/\s+/,pk=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,i=[],o=e.trim().split(fk);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:y}=r(u);let v=!!y,m=n(v?f.substring(0,y):f);if(!m){if(!v){l=u+(l.length>0?" "+l:l);continue}if(m=n(f),!m){l=u+(l.length>0?" "+l:l);continue}v=!1}const x=dk(d).join(":"),g=h?x+Bg:x,p=g+m;if(i.includes(p))continue;i.push(p);const w=s(m,v);for(let _=0;_<w.length;++_){const N=w[_];i.push(g+N)}l=u+(l.length>0?" "+l:l)}return l};function mk(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Wg(t))&&(n&&(n+=" "),n+=r);return n}const Wg=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Wg(e[n]))&&(r&&(r+=" "),r+=t);return r};function gk(e,...t){let r,n,s,i=o;function o(c){const u=t.reduce((d,h)=>h(d),e());return r=hk(u),n=r.cache.get,s=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=pk(c,r);return s(c,d),d}return function(){return i(mk.apply(null,arguments))}}const le=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},qg=/^\[(?:([a-z-]+):)?(.+)\]$/i,vk=/^\d+\/\d+$/,yk=new Set(["px","full","screen"]),wk=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xk=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_k=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,bk=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,kk=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,dr=e=>bs(e)||yk.has(e)||vk.test(e),Cr=e=>Ms(e,"length",Rk),bs=e=>!!e&&!Number.isNaN(Number(e)),Rl=e=>Ms(e,"number",bs),Hs=e=>!!e&&Number.isInteger(Number(e)),Sk=e=>e.endsWith("%")&&bs(e.slice(0,-1)),J=e=>qg.test(e),Tr=e=>wk.test(e),jk=new Set(["length","size","percentage"]),Ek=e=>Ms(e,jk,Kg),Nk=e=>Ms(e,"position",Kg),Ck=new Set(["image","url"]),Tk=e=>Ms(e,Ck,Ok),Pk=e=>Ms(e,"",Ak),Gs=()=>!0,Ms=(e,t,r)=>{const n=qg.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},Rk=e=>xk.test(e)&&!_k.test(e),Kg=()=>!1,Ak=e=>bk.test(e),Ok=e=>kk.test(e),Ik=()=>{const e=le("colors"),t=le("spacing"),r=le("blur"),n=le("brightness"),s=le("borderColor"),i=le("borderRadius"),o=le("borderSpacing"),l=le("borderWidth"),c=le("contrast"),u=le("grayscale"),d=le("hueRotate"),h=le("invert"),f=le("gap"),y=le("gradientColorStops"),v=le("gradientColorStopPositions"),m=le("inset"),x=le("margin"),g=le("opacity"),p=le("padding"),w=le("saturate"),_=le("scale"),N=le("sepia"),C=le("skew"),R=le("space"),T=le("translate"),q=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],ee=()=>["auto",J,t],G=()=>[J,t],ct=()=>["",dr,Cr],_t=()=>["auto",bs,J],cr=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],me=()=>["solid","dashed","dotted","double","none"],he=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",J],V=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[bs,J];return{cacheSize:500,separator:":",theme:{colors:[Gs],spacing:[dr,Cr],blur:["none","",Tr,J],brightness:X(),borderColor:[e],borderRadius:["none","","full",Tr,J],borderSpacing:G(),borderWidth:ct(),contrast:X(),grayscale:D(),hueRotate:X(),invert:D(),gap:G(),gradientColorStops:[e],gradientColorStopPositions:[Sk,Cr],inset:ee(),margin:ee(),opacity:X(),padding:G(),saturate:X(),scale:X(),sepia:D(),skew:X(),space:G(),translate:G()},classGroups:{aspect:[{aspect:["auto","square","video",J]}],container:["container"],columns:[{columns:[Tr]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...cr(),J]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:q()}],"overscroll-x":[{"overscroll-x":q()}],"overscroll-y":[{"overscroll-y":q()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Hs,J]}],basis:[{basis:ee()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",J]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",Hs,J]}],"grid-cols":[{"grid-cols":[Gs]}],"col-start-end":[{col:["auto",{span:["full",Hs,J]},J]}],"col-start":[{"col-start":_t()}],"col-end":[{"col-end":_t()}],"grid-rows":[{"grid-rows":[Gs]}],"row-start-end":[{row:["auto",{span:[Hs,J]},J]}],"row-start":[{"row-start":_t()}],"row-end":[{"row-end":_t()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",J]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",J]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...A()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...A(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...A(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[p]}],px:[{px:[p]}],py:[{py:[p]}],ps:[{ps:[p]}],pe:[{pe:[p]}],pt:[{pt:[p]}],pr:[{pr:[p]}],pb:[{pb:[p]}],pl:[{pl:[p]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",J,t]}],"min-w":[{"min-w":[J,t,"min","max","fit"]}],"max-w":[{"max-w":[J,t,"none","full","min","max","fit","prose",{screen:[Tr]},Tr]}],h:[{h:[J,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[J,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[J,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[J,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Tr,Cr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Rl]}],"font-family":[{font:[Gs]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",J]}],"line-clamp":[{"line-clamp":["none",bs,Rl]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",dr,J]}],"list-image":[{"list-image":["none",J]}],"list-style-type":[{list:["none","disc","decimal",J]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...me(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",dr,Cr]}],"underline-offset":[{"underline-offset":["auto",dr,J]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:G()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",J]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",J]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...cr(),Nk]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ek]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Tk]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...me(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:me()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...me()]}],"outline-offset":[{"outline-offset":[dr,J]}],"outline-w":[{outline:[dr,Cr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:ct()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[dr,Cr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Tr,Pk]}],"shadow-color":[{shadow:[Gs]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...he(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":he()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Tr,J]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",J]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",J]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",J]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Hs,J]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",J]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",J]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":G()}],"scroll-mx":[{"scroll-mx":G()}],"scroll-my":[{"scroll-my":G()}],"scroll-ms":[{"scroll-ms":G()}],"scroll-me":[{"scroll-me":G()}],"scroll-mt":[{"scroll-mt":G()}],"scroll-mr":[{"scroll-mr":G()}],"scroll-mb":[{"scroll-mb":G()}],"scroll-ml":[{"scroll-ml":G()}],"scroll-p":[{"scroll-p":G()}],"scroll-px":[{"scroll-px":G()}],"scroll-py":[{"scroll-py":G()}],"scroll-ps":[{"scroll-ps":G()}],"scroll-pe":[{"scroll-pe":G()}],"scroll-pt":[{"scroll-pt":G()}],"scroll-pr":[{"scroll-pr":G()}],"scroll-pb":[{"scroll-pb":G()}],"scroll-pl":[{"scroll-pl":G()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",J]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[dr,Cr,Rl]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},$k=gk(Ik);function Te(...e){return $k(nk(e))}const en=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),H=yt.forwardRef(({className:e,variant:t="default",size:r="default",...n},s)=>a.jsx("button",{className:Te("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-primary text-primary-foreground hover:bg-primary/90":t==="default","bg-destructive text-destructive-foreground hover:bg-destructive/90":t==="destructive","border border-input bg-background hover:bg-accent hover:text-accent-foreground":t==="outline","bg-secondary text-secondary-foreground hover:bg-secondary/80":t==="secondary","hover:bg-accent hover:text-accent-foreground":t==="ghost","text-primary underline-offset-4 hover:underline":t==="link","h-10 px-4 py-2":r==="default","h-9 rounded-md px-3":r==="sm","h-11 rounded-md px-8":r==="lg","h-10 w-10":r==="icon"},e),ref:s,...n}));H.displayName="Button";const Jn=()=>{an();const e=ln(),{user:t}=Xi();return a.jsx("nav",{className:"bg-[#020617] border-b border-white/5 sticky top-0 z-50",children:a.jsxs("div",{className:"container flex h-20 items-center justify-between mx-auto px-6 max-w-7xl",children:[a.jsxs("div",{className:"flex items-center gap-8",children:[a.jsxs(st,{to:"/",className:"flex items-center gap-2 font-bold text-xl tracking-tight text-white group",children:[a.jsx(Wi,{className:"w-6 h-6 text-primary group-hover:rotate-12 transition-transform"}),a.jsxs("span",{children:["CheckMate ",a.jsx("span",{className:"text-primary font-black",children:"Jackpot"})]})]}),a.jsxs("div",{className:"hidden md:flex items-center gap-8 text-sm font-medium text-gray-400",children:[a.jsx(st,{to:"/play",className:"hover:text-white transition-colors",children:"Play"}),a.jsx(st,{to:"/rules",className:"hover:text-white transition-colors",children:"How It Works"}),a.jsx(st,{to:"/admin/winners",className:"hover:text-white transition-colors",children:"Winners"}),a.jsx(st,{to:"/rules#tiers",className:"hover:text-white transition-colors",children:"Tiers"})]})]}),a.jsxs("div",{className:"flex items-center gap-6",children:[t?a.jsxs(st,{to:"/dashboard",className:"flex items-center gap-2 text-sm font-medium text-white hover:text-primary transition-colors",children:[a.jsx(Nn,{className:"w-4 h-4"}),a.jsx("span",{children:"Dashboard"})]}):a.jsxs(st,{to:"/auth",className:"flex items-center gap-2 text-sm font-medium text-white hover:text-primary transition-colors",children:[a.jsx(Nn,{className:"w-4 h-4"}),a.jsx("span",{children:"Sign In"})]}),a.jsxs(H,{onClick:()=>e("/play"),className:"bg-primary hover:bg-primary/90 text-black font-bold gap-2 px-6 rounded-md shadow-[0_0_15px_rgba(234,179,8,0.3)]",children:[a.jsx(lr,{className:"w-4 h-4"}),"Play Now"]})]})]})})},Qn=()=>a.jsx("footer",{className:"border-t border-border bg-secondary/20 py-8 mt-auto",children:a.jsxs("div",{className:"container mx-auto px-4 max-w-7xl flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-muted-foreground",children:[a.jsx("p",{children:" 2025 CheckMate Jackpot. All rights reserved."}),a.jsxs("div",{className:"flex gap-6",children:[a.jsx(st,{to:"/rules",className:"hover:text-foreground transition-colors",children:"Rules"}),a.jsx(st,{to:"/terms",className:"hover:text-foreground transition-colors",children:"Terms of Service"}),a.jsx("a",{href:"#",className:"hover:text-foreground transition-colors",children:"Contact"})]})]})}),Yn={starter:{base:5,cap:1e3},world:{base:5}},Vg=async()=>{try{const{data:e,error:t}=await Y.from("jackpots").select("tier, amount");if(t)throw t;let r=Yn.starter.base,n=Yn.world.base;if(e){const s=e.find(o=>o.tier==="starter"),i=e.find(o=>o.tier==="world");s&&(r=Number(s.amount)),i&&(n=Number(i.amount))}return{starter:r,starterCap:Yn.starter.cap,world:n}}catch(e){return console.error("Error fetching jackpot:",e),{starter:Yn.starter.base,starterCap:Yn.starter.cap,world:Yn.world.base}}},Lk=()=>{const e=ln(),[t,r]=k.useState(null),[n,s]=k.useState(null),[i,o]=k.useState({winners:0,gamesToday:0});return k.useEffect(()=>{(async()=>{const u=await Vg();r(u),u&&s(u.world);const{count:d}=await Y.from("winners").select("*",{count:"exact",head:!0}),h=new Date;h.setHours(0,0,0,0);const{count:f}=await Y.from("games").select("*",{count:"exact",head:!0}).gte("created_at",h.toISOString());o({winners:(d||0)+12847,gamesToday:(f||0)+3421})})();const c=Y.channel("jackpot-realtime").on("postgres_changes",{event:"UPDATE",schema:"public",table:"jackpots",filter:"tier=eq.world"},u=>{var h;const d=(h=u.new)==null?void 0:h.amount;typeof d=="number"?s(d):d!=null&&s(Number(d))}).subscribe();return()=>{Y.removeChannel(c)}},[]),a.jsxs("div",{className:"relative min-h-screen bg-[#020617] overflow-hidden flex flex-col font-sans",children:[a.jsx("div",{className:"absolute top-0 left-0 p-12 opacity-10",children:a.jsx(Wi,{className:"w-32 h-32 -rotate-12"})}),a.jsx("div",{className:"absolute bottom-0 right-0 p-12 opacity-10",children:a.jsx(Wi,{className:"w-48 h-48 rotate-12"})}),a.jsxs("main",{className:"flex-1 flex flex-col items-center justify-center px-4 text-center z-10 py-12",children:[a.jsxs("div",{className:"mb-10 inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 text-xs font-medium text-gray-400",children:[a.jsxs("span",{className:"relative flex h-2 w-2",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),"Live Games Available"]}),a.jsxs("h1",{className:"text-6xl md:text-8xl font-black tracking-tight mb-6 text-white leading-[1.1]",children:["Play Chess.",a.jsx("br",{}),a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-b from-[#FDE047] to-[#EAB308]",children:"Win Big."})]}),a.jsx("p",{className:"text-gray-500 mb-8 text-sm tracking-[0.2em] uppercase font-bold",children:"Current Jackpot"}),a.jsxs("div",{className:"relative mb-14 group",children:[a.jsx("div",{className:"absolute -inset-4 bg-primary/20 blur-3xl rounded-full opacity-50 group-hover:opacity-100 transition-opacity"}),a.jsx("div",{className:"relative bg-transparent border-[3px] border-primary/40 px-12 py-7 rounded-2xl min-w-[340px] shadow-[0_0_40px_rgba(234,179,8,0.15)] flex items-center justify-center",children:a.jsx("span",{className:"text-6xl md:text-8xl font-black text-primary font-serif italic tracking-tight drop-shadow-2xl",children:en(n).split(".")[0]})})]}),a.jsx("p",{className:"max-w-xl text-gray-400 text-lg md:text-xl mb-12 leading-relaxed px-4",children:"Compete against players worldwide in skill-based chess tournaments. Win real money based on your chess mastery."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-5",children:[a.jsxs(H,{size:"lg",onClick:()=>e("/play"),className:"bg-primary hover:bg-primary/90 text-black font-black text-lg px-12 h-16 rounded-xl gap-3 shadow-[0_15px_35px_rgba(234,179,8,0.3)] transition-transform hover:scale-105 active:scale-95",children:[a.jsx(Z1,{className:"w-5 h-5 fill-current"}),"Start Playing"]}),a.jsx(H,{size:"lg",variant:"outline",onClick:()=>e("/rules"),className:"border-primary border-2 text-primary hover:bg-primary/10 font-black text-lg px-12 h-16 rounded-xl transition-all",children:"Learn How It Works"})]})]}),a.jsx("section",{className:"container mx-auto max-w-5xl px-6 pb-16 z-10",children:a.jsxs("div",{className:"grid grid-cols-3 gap-4 md:gap-12 text-center",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(lr,{className:"w-7 h-7 text-primary mx-auto mb-4"}),a.jsx("p",{className:"text-3xl md:text-4xl font-black text-white tabular-nums",children:i.winners.toLocaleString()}),a.jsx("p",{className:"text-[10px] md:text-xs text-gray-500 uppercase tracking-[0.25em] font-bold",children:"Winners"})]}),a.jsxs("div",{className:"space-y-2 border-x border-white/5",children:[a.jsx(rk,{className:"w-7 h-7 text-primary mx-auto mb-4"}),a.jsx("p",{className:"text-3xl md:text-4xl font-black text-white tabular-nums",children:i.gamesToday.toLocaleString()}),a.jsx("p",{className:"text-[10px] md:text-xs text-gray-500 uppercase tracking-[0.25em] font-bold",children:"Games Today"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Mg,{className:"w-7 h-7 text-primary mx-auto mb-4"}),a.jsx("p",{className:"text-3xl md:text-4xl font-black text-white",children:"100%"}),a.jsx("p",{className:"text-[10px] md:text-xs text-gray-500 uppercase tracking-[0.25em] font-bold",children:"Fair Play"})]})]})})]})},oe=yt.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:Te("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));oe.displayName="Card";const ke=yt.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:Te("flex flex-col space-y-1.5 p-6",e),...t}));ke.displayName="CardHeader";const Se=yt.forwardRef(({className:e,...t},r)=>a.jsx("h3",{ref:r,className:Te("text-2xl font-semibold leading-none tracking-tight",e),...t}));Se.displayName="CardTitle";const Rs=yt.forwardRef(({className:e,...t},r)=>a.jsx("p",{ref:r,className:Te("text-sm text-muted-foreground",e),...t}));Rs.displayName="CardDescription";const je=yt.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:Te("p-6 pt-0",e),...t}));je.displayName="CardContent";const Zc=yt.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:Te("flex items-center p-6 pt-0",e),...t}));Zc.displayName="CardFooter";function Be({className:e,variant:t="default",children:r,...n}){return a.jsx("div",{className:Te("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{"border-transparent bg-primary text-primary-foreground hover:bg-primary/80":t==="default","border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80":t==="secondary","border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80":t==="destructive","text-foreground":t==="outline","border-transparent bg-yellow-500 text-black hover:bg-yellow-400":t==="gold"},e),...n,children:r})}const In=yt.forwardRef(({className:e,type:t,...r},n)=>a.jsx("input",{type:t,className:Te("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));In.displayName="Input";const Mk=async(e,t,r,n=0,s="")=>{try{const{data:i,error:o}=await Y.rpc("submit_game",{p_user_id:e,p_tier:t,p_result:r,p_prize:n,p_pgn:s});if(o)throw o;return console.log("Game processed successfully:",i),i}catch(i){return console.error("Error saving game:",i),null}};var dt=(e=>(e.FREE="free",e.STARTER="starter",e.WORLD="world",e))(dt||{});const Uk=()=>{const{user:e,loading:t}=Xi(),r=ln(),[n,s]=k.useState(null),[i,o]=k.useState([]),[l,c]=k.useState(!0),[u,d]=k.useState("100"),[h,f]=k.useState(!1);k.useEffect(()=>{if(!t&&!e){r("/auth");return}e&&y()},[e,t,r]);const y=async()=>{try{c(!0);const{data:x,error:g}=await Y.from("profiles").select("*").eq("id",e==null?void 0:e.id).single();if(g)throw g;s(x);const{data:p,error:w}=await Y.from("games").select("*").eq("user_id",e==null?void 0:e.id).order("created_at",{ascending:!1}).limit(50);if(w)throw w;o(p||[])}catch(x){console.error("Error fetching dashboard data:",x)}finally{c(!1)}},v=async()=>{if(!(!e||!n)){f(!0);try{const x=parseInt(u),{error:g}=await Y.rpc("add_credits",{target_user_id:e.id,amount:x});if(g)throw g;await y(),alert(`Successfully added ${x} credits.`)}catch(x){alert("Error adding credits: "+x.message)}finally{f(!1)}}},m=async x=>{if(e){f(!0);try{await Mk(e.id,x,"win",0),await y(),alert(`Simulated ${x} win! Jackpot should now be reset on the home page.`)}catch(g){alert("Error simulating win: "+g.message)}finally{f(!1)}}};return l||t?a.jsx("div",{className:"flex h-[50vh] items-center justify-center",children:a.jsx(vt,{className:"w-8 h-8 animate-spin text-primary"})}):a.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-5xl space-y-8",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome back, ",(n==null?void 0:n.username)||(e==null?void 0:e.email)]}),(n==null?void 0:n.role)==="admin"&&a.jsxs(Be,{variant:"destructive",className:"flex gap-1 items-center px-2 py-1",children:[a.jsx(pa,{className:"w-3 h-3"})," Admin"]})]}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your credits and view game history."})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(Be,{className:"text-lg py-1 px-3 bg-primary/10 text-primary hover:bg-primary/20 border-0",children:[(n==null?void 0:n.credits)||0," Credits Available"]})})]}),(n==null?void 0:n.role)==="admin"&&a.jsxs(oe,{className:"border-destructive/50 bg-destructive/5",children:[a.jsxs(ke,{className:"pb-3 flex flex-row items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(Se,{className:"text-destructive flex items-center gap-2 text-lg",children:[a.jsx(pa,{className:"w-5 h-5"})," Admin Console"]}),a.jsx(Rs,{children:"Internal tools for testing game economy."})]}),a.jsxs(H,{onClick:()=>r("/admin"),variant:"destructive",className:"gap-2",children:[a.jsx(q1,{className:"w-4 h-4"})," Open Admin Dashboard"]})]}),a.jsxs(je,{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-end gap-4 max-w-sm",children:[a.jsxs("div",{className:"space-y-2 flex-1",children:[a.jsx("label",{className:"text-xs font-medium",children:"Add Credits (Test Mode)"}),a.jsx(In,{type:"number",value:u,onChange:x=>d(x.target.value)})]}),a.jsxs(H,{onClick:v,disabled:h,variant:"destructive",children:[h?a.jsx(vt,{className:"w-4 h-4 animate-spin"}):a.jsx(ek,{className:"w-4 h-4 mr-2"}),"Inject Credits"]})]}),a.jsxs("div",{className:"border-t border-destructive/20 pt-4",children:[a.jsx("label",{className:"text-xs font-medium block mb-2",children:"Simulate Jackpot Reset (Inject Win)"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs(H,{onClick:()=>m(dt.STARTER),disabled:h,variant:"outline",className:"border-destructive/30 hover:bg-destructive/10",children:[a.jsx(lr,{className:"w-4 h-4 mr-2"})," Win Starter"]}),a.jsxs(H,{onClick:()=>m(dt.WORLD),disabled:h,variant:"outline",className:"border-destructive/30 hover:bg-destructive/10",children:[a.jsx(lr,{className:"w-4 h-4 mr-2"})," Win World"]})]})]})]})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[a.jsxs(oe,{className:"md:col-span-2 border-0 bg-secondary/5 shadow-none",children:[a.jsxs(ke,{children:[a.jsxs(Se,{className:"flex items-center gap-2",children:[a.jsx(Dg,{className:"w-5 h-5"})," Buy Credits"]}),a.jsx(Rs,{children:"Credits are used to enter Jackpot games."})]}),a.jsxs(je,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs(H,{variant:"ghost",className:"h-24 flex flex-col gap-2 bg-secondary/20 hover:bg-primary/10 hover:text-primary transition-all",children:[a.jsx("span",{className:"text-2xl font-bold",children:"10 Credits"}),a.jsx("span",{className:"text-muted-foreground",children:"$10.00"})]}),a.jsxs(H,{variant:"ghost",className:"h-24 flex flex-col gap-2 bg-secondary/20 hover:bg-primary/10 hover:text-primary transition-all",children:[a.jsx("span",{className:"text-2xl font-bold",children:"20 Credits"}),a.jsx("span",{className:"text-muted-foreground",children:"$20.00"})]})]}),a.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Secure payment processing via Stripe (Mock)."})]})]}),a.jsxs(oe,{className:"border-0 bg-secondary/5 shadow-none",children:[a.jsx(ke,{children:a.jsxs(Se,{className:"flex items-center gap-2",children:[a.jsx(Ps,{className:"w-5 h-5"})," Eligibility"]})}),a.jsxs(je,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:"Starter Jackpot"}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsxs("span",{className:"text-sm text-muted-foreground",children:[(n==null?void 0:n.monthly_wins)||0,"/1 Wins this month"]}),a.jsx(Be,{variant:((n==null?void 0:n.monthly_wins)||0)===0?"secondary":"destructive",children:((n==null?void 0:n.monthly_wins)||0)===0?"Eligible":"Ineligible"})]})]}),a.jsxs("div",{className:"pt-4 border-t border-border/30",children:[a.jsx("p",{className:"font-medium text-sm",children:"World Jackpot"}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Unlimited Attempts"}),a.jsx(Be,{variant:"gold",children:"Eligible"})]})]})]})]})]}),a.jsxs(oe,{className:"border-0 bg-secondary/5 shadow-none",children:[a.jsx(ke,{children:a.jsxs(Se,{className:"flex items-center gap-2",children:[a.jsx(Og,{className:"w-5 h-5"})," Game History"]})}),a.jsx(je,{children:i.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No games played yet."}):a.jsx("div",{className:"space-y-4 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar",children:i.map(x=>{var g;return a.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-secondary/20 border border-transparent hover:border-primary/10 transition-colors",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium capitalize text-sm",children:[x.tier," Tier"]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[new Date(x.created_at).toLocaleDateString()," ",new Date(x.created_at).toLocaleTimeString()]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx(Be,{variant:x.result==="win"?"gold":"secondary",className:"mb-1",children:(g=x.result)==null?void 0:g.toUpperCase()}),x.prize>0&&a.jsxs("p",{className:"text-xs text-green-500 font-bold",children:["+",en(x.prize)]})]})]},x.id)})})})]})]})};function Dk(e){return e!==null?{comment:e,variations:[]}:{variations:[]}}function zk(e,t,r,n,s){const i={move:e,variations:s};return t&&(i.suffix=t),r&&(i.nag=r),n!==null&&(i.comment=n),i}function Fk(...e){const[t,...r]=e;let n=t;for(const s of r)s!==null&&(n.variations=[s,...s.variations],s.variations=[],n=s);return t}function Bk(e,t){if(t.marker&&t.marker.comment){let r=t.root;for(;;){const n=r.variations[0];if(!n){r.comment=t.marker.comment;break}r=n}}return{headers:e,root:t.root,result:(t.marker&&t.marker.result)??void 0}}function Wk(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function As(e,t,r,n){var s=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(s,As.prototype),s.expected=t,s.found=r,s.location=n,s.name="SyntaxError",s}Wk(As,Error);function Al(e,t,r){return r=r||" ",e.length>t?e:(t-=e.length,r+=r.repeat(t),e+r.slice(0,t))}As.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var r=null,n;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){r=e[n].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,i=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,o=this.location.source+":"+i.line+":"+i.column;if(r){var l=this.location.end,c=Al("",i.line.toString().length," "),u=r[s.line-1],d=s.line===l.line?l.column:u.length+1,h=d-s.column||1;t+=`
 --> `+o+`
`+c+` |
`+i.line+" | "+u+`
`+c+" | "+Al("",s.column-1," ")+Al("",h,"^")}else t+=`
 at `+o}return t};As.buildMessage=function(e,t){var r={literal:function(u){return'"'+s(u.text)+'"'},class:function(u){var d=u.parts.map(function(h){return Array.isArray(h)?i(h[0])+"-"+i(h[1]):i(h)});return"["+(u.inverted?"^":"")+d.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(u){return u.description}};function n(u){return u.charCodeAt(0).toString(16).toUpperCase()}function s(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+n(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+n(d)})}function i(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+n(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+n(d)})}function o(u){return r[u.type](u)}function l(u){var d=u.map(o),h,f;if(d.sort(),d.length>0){for(h=1,f=1;h<d.length;h++)d[h-1]!==d[h]&&(d[f]=d[h],f++);d.length=f}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1]}}function c(u){return u?'"'+s(u)+'"':"end of input"}return"Expected "+l(e)+" but "+c(t)+" found."};function qk(e,t){t=t!==void 0?t:{};var r={},n=t.grammarSource,s={pgn:Od},i=Od,o="[",l='"',c="]",u=".",d="O-O-O",h="O-O",f="0-0-0",y="0-0",v="$",m="{",x="}",g=";",p="(",w=")",_="1-0",N="0-1",C="1/2-1/2",R="*",T=/^[a-zA-Z]/,q=/^[^"]/,L=/^[0-9]/,ee=/^[.]/,G=/^[a-zA-Z1-8\-=]/,ct=/^[+#]/,_t=/^[!?]/,cr=/^[^}]/,me=/^[^\r\n]/,he=/^[ \t\r\n]/,A=Ot("tag pair"),D=De("[",!1),V=De('"',!1),X=De("]",!1),Ee=Ot("tag name"),Bt=tr([["a","z"],["A","Z"]],!1,!1),re=Ot("tag value"),Qe=tr(['"'],!0,!1),Wt=Ot("move number"),ur=tr([["0","9"]],!1,!1),Ev=De(".",!1),jd=tr(["."],!1,!1),Nv=Ot("standard algebraic notation"),Cv=De("O-O-O",!1),Tv=De("O-O",!1),Pv=De("0-0-0",!1),Rv=De("0-0",!1),Ed=tr([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),Av=tr(["+","#"],!1,!1),Ov=Ot("suffix annotation"),Nd=tr(["!","?"],!1,!1),Iv=Ot("NAG"),$v=De("$",!1),Lv=Ot("brace comment"),Mv=De("{",!1),Cd=tr(["}"],!0,!1),Uv=De("}",!1),Dv=Ot("rest of line comment"),zv=De(";",!1),Td=tr(["\r",`
`],!0,!1),Fv=Ot("variation"),Bv=De("(",!1),Wv=De(")",!1),qv=Ot("game termination marker"),Kv=De("1-0",!1),Vv=De("0-1",!1),Hv=De("1/2-1/2",!1),Gv=De("*",!1),Jv=Ot("whitespace"),Pd=tr([" ","	","\r",`
`],!1,!1),Qv=function(b,j){return Bk(b,j)},Yv=function(b){return Object.fromEntries(b)},Xv=function(b,j){return[b,j]},Zv=function(b,j){return{root:b,marker:j}},e0=function(b,j){return Fk(Dk(b),...j.flat())},t0=function(b,j,E,U,z){return zk(b,j,E,U,z)},r0=function(b){return b},n0=function(b){return b.replace(/[\r\n]+/g," ")},s0=function(b){return b.trim()},i0=function(b){return b},o0=function(b,j){return{result:b,comment:j}},S=t.peg$currPos|0,Fn=[{line:1,column:1}],qt=S,eo=t.peg$maxFailExpected||[],O=t.peg$silentFails|0,Us;if(t.startRule){if(!(t.startRule in s))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');i=s[t.startRule]}function De(b,j){return{type:"literal",text:b,ignoreCase:j}}function tr(b,j,E){return{type:"class",parts:b,inverted:j,ignoreCase:E}}function a0(){return{type:"end"}}function Ot(b){return{type:"other",description:b}}function Rd(b){var j=Fn[b],E;if(j)return j;if(b>=Fn.length)E=Fn.length-1;else for(E=b;!Fn[--E];);for(j=Fn[E],j={line:j.line,column:j.column};E<b;)e.charCodeAt(E)===10?(j.line++,j.column=1):j.column++,E++;return Fn[b]=j,j}function Ad(b,j,E){var U=Rd(b),z=Rd(j),ne={source:n,start:{offset:b,line:U.line,column:U.column},end:{offset:j,line:z.line,column:z.column}};return ne}function M(b){S<qt||(S>qt&&(qt=S,eo=[]),eo.push(b))}function l0(b,j,E){return new As(As.buildMessage(b,j),b,j,E)}function Od(){var b,j,E;return b=S,j=c0(),E=h0(),b=Qv(j,E),b}function c0(){var b,j,E;for(b=S,j=[],E=Id();E!==r;)j.push(E),E=Id();return E=rt(),b=Yv(j),b}function Id(){var b,j,E,U,z,ne,dn;return O++,b=S,rt(),e.charCodeAt(S)===91?(j=o,S++):(j=r,O===0&&M(D)),j!==r?(rt(),E=u0(),E!==r?(rt(),e.charCodeAt(S)===34?(U=l,S++):(U=r,O===0&&M(V)),U!==r?(z=d0(),e.charCodeAt(S)===34?(ne=l,S++):(ne=r,O===0&&M(V)),ne!==r?(rt(),e.charCodeAt(S)===93?(dn=c,S++):(dn=r,O===0&&M(X)),dn!==r?b=Xv(E,z):(S=b,b=r)):(S=b,b=r)):(S=b,b=r)):(S=b,b=r)):(S=b,b=r),O--,b===r&&O===0&&M(A),b}function u0(){var b,j,E;if(O++,b=S,j=[],E=e.charAt(S),T.test(E)?S++:(E=r,O===0&&M(Bt)),E!==r)for(;E!==r;)j.push(E),E=e.charAt(S),T.test(E)?S++:(E=r,O===0&&M(Bt));else j=r;return j!==r?b=e.substring(b,S):b=j,O--,b===r&&(j=r,O===0&&M(Ee)),b}function d0(){var b,j,E;for(O++,b=S,j=[],E=e.charAt(S),q.test(E)?S++:(E=r,O===0&&M(Qe));E!==r;)j.push(E),E=e.charAt(S),q.test(E)?S++:(E=r,O===0&&M(Qe));return b=e.substring(b,S),O--,j=r,O===0&&M(re),b}function h0(){var b,j,E;return b=S,j=$d(),rt(),E=y0(),E===r&&(E=null),rt(),b=Zv(j,E),b}function $d(){var b,j,E,U;for(b=S,j=Va(),j===r&&(j=null),E=[],U=Ld();U!==r;)E.push(U),U=Ld();return b=e0(j,E),b}function Ld(){var b,j,E,U,z,ne,dn,to;if(b=S,rt(),f0(),rt(),j=p0(),j!==r){for(E=m0(),E===r&&(E=null),U=[],z=Md();z!==r;)U.push(z),z=Md();for(z=rt(),ne=Va(),ne===r&&(ne=null),dn=[],to=Ud();to!==r;)dn.push(to),to=Ud();b=t0(j,E,U,ne,dn)}else S=b,b=r;return b}function f0(){var b,j,E,U,z,ne;for(O++,b=S,j=[],E=e.charAt(S),L.test(E)?S++:(E=r,O===0&&M(ur));E!==r;)j.push(E),E=e.charAt(S),L.test(E)?S++:(E=r,O===0&&M(ur));if(e.charCodeAt(S)===46?(E=u,S++):(E=r,O===0&&M(Ev)),E!==r){for(U=rt(),z=[],ne=e.charAt(S),ee.test(ne)?S++:(ne=r,O===0&&M(jd));ne!==r;)z.push(ne),ne=e.charAt(S),ee.test(ne)?S++:(ne=r,O===0&&M(jd));j=[j,E,U,z],b=j}else S=b,b=r;return O--,b===r&&(j=r,O===0&&M(Wt)),b}function p0(){var b,j,E,U,z,ne;if(O++,b=S,j=S,e.substr(S,5)===d?(E=d,S+=5):(E=r,O===0&&M(Cv)),E===r&&(e.substr(S,3)===h?(E=h,S+=3):(E=r,O===0&&M(Tv)),E===r&&(e.substr(S,5)===f?(E=f,S+=5):(E=r,O===0&&M(Pv)),E===r&&(e.substr(S,3)===y?(E=y,S+=3):(E=r,O===0&&M(Rv)),E===r))))if(E=S,U=e.charAt(S),T.test(U)?S++:(U=r,O===0&&M(Bt)),U!==r){if(z=[],ne=e.charAt(S),G.test(ne)?S++:(ne=r,O===0&&M(Ed)),ne!==r)for(;ne!==r;)z.push(ne),ne=e.charAt(S),G.test(ne)?S++:(ne=r,O===0&&M(Ed));else z=r;z!==r?(U=[U,z],E=U):(S=E,E=r)}else S=E,E=r;return E!==r?(U=e.charAt(S),ct.test(U)?S++:(U=r,O===0&&M(Av)),U===r&&(U=null),E=[E,U],j=E):(S=j,j=r),j!==r?b=e.substring(b,S):b=j,O--,b===r&&(j=r,O===0&&M(Nv)),b}function m0(){var b,j,E;for(O++,b=S,j=[],E=e.charAt(S),_t.test(E)?S++:(E=r,O===0&&M(Nd));E!==r;)j.push(E),j.length>=2?E=r:(E=e.charAt(S),_t.test(E)?S++:(E=r,O===0&&M(Nd)));return j.length<1?(S=b,b=r):b=j,O--,b===r&&(j=r,O===0&&M(Ov)),b}function Md(){var b,j,E,U,z;if(O++,b=S,rt(),e.charCodeAt(S)===36?(j=v,S++):(j=r,O===0&&M($v)),j!==r){if(E=S,U=[],z=e.charAt(S),L.test(z)?S++:(z=r,O===0&&M(ur)),z!==r)for(;z!==r;)U.push(z),z=e.charAt(S),L.test(z)?S++:(z=r,O===0&&M(ur));else U=r;U!==r?E=e.substring(E,S):E=U,E!==r?b=r0(E):(S=b,b=r)}else S=b,b=r;return O--,b===r&&O===0&&M(Iv),b}function Va(){var b;return b=g0(),b===r&&(b=v0()),b}function g0(){var b,j,E,U,z;if(O++,b=S,e.charCodeAt(S)===123?(j=m,S++):(j=r,O===0&&M(Mv)),j!==r){for(E=S,U=[],z=e.charAt(S),cr.test(z)?S++:(z=r,O===0&&M(Cd));z!==r;)U.push(z),z=e.charAt(S),cr.test(z)?S++:(z=r,O===0&&M(Cd));E=e.substring(E,S),e.charCodeAt(S)===125?(U=x,S++):(U=r,O===0&&M(Uv)),U!==r?b=n0(E):(S=b,b=r)}else S=b,b=r;return O--,b===r&&(j=r,O===0&&M(Lv)),b}function v0(){var b,j,E,U,z;if(O++,b=S,e.charCodeAt(S)===59?(j=g,S++):(j=r,O===0&&M(zv)),j!==r){for(E=S,U=[],z=e.charAt(S),me.test(z)?S++:(z=r,O===0&&M(Td));z!==r;)U.push(z),z=e.charAt(S),me.test(z)?S++:(z=r,O===0&&M(Td));E=e.substring(E,S),b=s0(E)}else S=b,b=r;return O--,b===r&&(j=r,O===0&&M(Dv)),b}function Ud(){var b,j,E,U;return O++,b=S,rt(),e.charCodeAt(S)===40?(j=p,S++):(j=r,O===0&&M(Bv)),j!==r?(E=$d(),E!==r?(rt(),e.charCodeAt(S)===41?(U=w,S++):(U=r,O===0&&M(Wv)),U!==r?b=i0(E):(S=b,b=r)):(S=b,b=r)):(S=b,b=r),O--,b===r&&O===0&&M(Fv),b}function y0(){var b,j,E;return O++,b=S,e.substr(S,3)===_?(j=_,S+=3):(j=r,O===0&&M(Kv)),j===r&&(e.substr(S,3)===N?(j=N,S+=3):(j=r,O===0&&M(Vv)),j===r&&(e.substr(S,7)===C?(j=C,S+=7):(j=r,O===0&&M(Hv)),j===r&&(e.charCodeAt(S)===42?(j=R,S++):(j=r,O===0&&M(Gv))))),j!==r?(rt(),E=Va(),E===r&&(E=null),b=o0(j,E)):(S=b,b=r),O--,b===r&&(j=r,O===0&&M(qv)),b}function rt(){var b,j;for(O++,b=[],j=e.charAt(S),he.test(j)?S++:(j=r,O===0&&M(Pd));j!==r;)b.push(j),j=e.charAt(S),he.test(j)?S++:(j=r,O===0&&M(Pd));return O--,j=r,O===0&&M(Jv),b}if(Us=i(),t.peg$library)return{peg$result:Us,peg$currPos:S,peg$FAILED:r,peg$maxFailExpected:eo,peg$maxFailPos:qt};if(Us!==r&&S===e.length)return Us;throw Us!==r&&S<e.length&&M(a0()),l0(eo,qt<e.length?e.charAt(qt):null,qt<e.length?Ad(qt,qt+1):Ad(qt,qt))}/**
 * @license
 * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const Uo=0xffffffffffffffffn;function Ol(e,t){return(e<<t|e>>64n-t)&0xffffffffffffffffn}function Rf(e,t){return e*t&Uo}function Kk(e){return function(){let t=BigInt(e&Uo),r=BigInt(e>>64n&Uo);const n=Rf(Ol(Rf(t,5n),7n),9n);return r^=t,t=(Ol(t,24n)^r^r<<16n)&Uo,r=Ol(r,37n),e=r<<64n|t,n}}const Ba=Kk(0xa187eb39cdcaed8f31c4b365b102e01en),Vk=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>Ba()))),Hk=Array.from({length:8},()=>Ba()),Gk=Array.from({length:16},()=>Ba()),Il=Ba(),Ze="w",kt="b",Pe="p",eu="n",Do="b",ii="r",Lr="q",Ie="k",$l="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class So{constructor(t,r){fe(this,"color");fe(this,"from");fe(this,"to");fe(this,"piece");fe(this,"captured");fe(this,"promotion");fe(this,"flags");fe(this,"san");fe(this,"lan");fe(this,"before");fe(this,"after");const{color:n,piece:s,from:i,to:o,flags:l,captured:c,promotion:u}=r,d=ze(i),h=ze(o);this.color=n,this.piece=s,this.from=d,this.to=h,this.san=t._moveToSan(r,t._moves({legal:!0})),this.lan=d+h,this.before=t.fen(),t._makeMove(r),this.after=t.fen(),t._undoMove(),this.flags="";for(const f in K)K[f]&l&&(this.flags+=pn[f]);c&&(this.captured=c),u&&(this.promotion=u,this.lan+=u)}isCapture(){return this.flags.indexOf(pn.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(pn.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(pn.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(pn.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(pn.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(pn.BIG_PAWN)>-1}}const Ke=-1,pn={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},K={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},tu={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},Jk={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},Qk={...tu,...Jk},W={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Ll={b:[16,32,17,15],w:[-16,-32,-17,-15]},Af={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},Yk=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],Xk=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],Zk={p:1,n:2,b:4,r:8,q:16,k:32},eS="pnbrqkPNBRQK",Of=[eu,Do,ii,Lr],tS=7,rS=6,nS=1,sS=0,jo={[Ie]:K.KSIDE_CASTLE,[Lr]:K.QSIDE_CASTLE},Pr={w:[{square:W.a1,flag:K.QSIDE_CASTLE},{square:W.h1,flag:K.KSIDE_CASTLE}],b:[{square:W.a8,flag:K.QSIDE_CASTLE},{square:W.h8,flag:K.KSIDE_CASTLE}]},iS={b:nS,w:rS},Ml="--";function Cn(e){return e>>4}function qi(e){return e&15}function Hg(e){return"0123456789".indexOf(e)!==-1}function ze(e){const t=qi(e),r=Cn(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(r,r+1)}function Js(e){return e===Ze?kt:Ze}function oS(e){const t=e.split(/\s+/);if(t.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const r=parseInt(t[5],10);if(isNaN(r)||r<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const n=parseInt(t[4],10);if(isNaN(n)||n<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const s=t[0].split("/");if(s.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let o=0;o<s.length;o++){let l=0,c=!1;for(let u=0;u<s[o].length;u++)if(Hg(s[o][u])){if(c)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};l+=parseInt(s[o][u],10),c=!0}else{if(!/^[prnbqkPRNBQK]$/.test(s[o][u]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};l+=1,c=!1}if(l!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(t[3][1]=="3"&&t[1]=="w"||t[3][1]=="6"&&t[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const i=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:o,regex:l}of i){if(!l.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${o} king`};if((t[0].match(l)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${o} kings`}}return Array.from(s[0]+s[7]).some(o=>o.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function aS(e,t){const r=e.from,n=e.to,s=e.piece;let i=0,o=0,l=0;for(let c=0,u=t.length;c<u;c++){const d=t[c].from,h=t[c].to,f=t[c].piece;s===f&&r!==d&&n===h&&(i++,Cn(r)===Cn(d)&&o++,qi(r)===qi(d)&&l++)}return i>0?o>0&&l>0?ze(r):l>0?ze(r).charAt(1):ze(r).charAt(0):""}function Rr(e,t,r,n,s,i=void 0,o=K.NORMAL){const l=Cn(n);if(s===Pe&&(l===tS||l===sS))for(let c=0;c<Of.length;c++){const u=Of[c];e.push({color:t,from:r,to:n,piece:s,captured:i,promotion:u,flags:o|K.PROMOTION})}else e.push({color:t,from:r,to:n,piece:s,captured:i,flags:o})}function If(e){let t=e.charAt(0);return t>="a"&&t<="h"?e.match(/[a-h]\d.*[a-h]\d/)?void 0:Pe:(t=t.toLowerCase(),t==="o"?Ie:t)}function Ul(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class gr{constructor(t=$l,{skipValidation:r=!1}={}){fe(this,"_board",new Array(128));fe(this,"_turn",Ze);fe(this,"_header",{});fe(this,"_kings",{w:Ke,b:Ke});fe(this,"_epSquare",-1);fe(this,"_halfMoves",0);fe(this,"_moveNumber",0);fe(this,"_history",[]);fe(this,"_comments",{});fe(this,"_castling",{w:0,b:0});fe(this,"_hash",0n);fe(this,"_positionCount",new Map);this.load(t,{skipValidation:r})}clear({preserveHeaders:t=!1}={}){this._board=new Array(128),this._kings={w:Ke,b:Ke},this._turn=Ze,this._castling={w:0,b:0},this._epSquare=Ke,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=t?this._header:{...Qk},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(t,{skipValidation:r=!1,preserveHeaders:n=!1}={}){let s=t.split(/\s+/);if(s.length>=2&&s.length<6){const l=["-","-","0","1"];t=s.concat(l.slice(-(6-s.length))).join(" ")}if(s=t.split(/\s+/),!r){const{ok:l,error:c}=oS(t);if(!l)throw new Error(c)}const i=s[0];let o=0;this.clear({preserveHeaders:n});for(let l=0;l<i.length;l++){const c=i.charAt(l);if(c==="/")o+=8;else if(Hg(c))o+=parseInt(c,10);else{const u=c<"a"?Ze:kt;this._put({type:c.toLowerCase(),color:u},ze(o)),o++}}this._turn=s[1],s[2].indexOf("K")>-1&&(this._castling.w|=K.KSIDE_CASTLE),s[2].indexOf("Q")>-1&&(this._castling.w|=K.QSIDE_CASTLE),s[2].indexOf("k")>-1&&(this._castling.b|=K.KSIDE_CASTLE),s[2].indexOf("q")>-1&&(this._castling.b|=K.QSIDE_CASTLE),this._epSquare=s[3]==="-"?Ke:W[s[3]],this._halfMoves=parseInt(s[4],10),this._moveNumber=parseInt(s[5],10),this._hash=this._computeHash(),this._updateSetup(t),this._incPositionCount()}fen({forceEnpassantSquare:t=!1}={}){var o,l;let r=0,n="";for(let c=W.a8;c<=W.h1;c++){if(this._board[c]){r>0&&(n+=r,r=0);const{color:u,type:d}=this._board[c];n+=u===Ze?d.toUpperCase():d.toLowerCase()}else r++;c+1&136&&(r>0&&(n+=r),c!==W.h1&&(n+="/"),r=0,c+=8)}let s="";this._castling[Ze]&K.KSIDE_CASTLE&&(s+="K"),this._castling[Ze]&K.QSIDE_CASTLE&&(s+="Q"),this._castling[kt]&K.KSIDE_CASTLE&&(s+="k"),this._castling[kt]&K.QSIDE_CASTLE&&(s+="q"),s=s||"-";let i="-";if(this._epSquare!==Ke)if(t)i=ze(this._epSquare);else{const c=this._epSquare+(this._turn===Ze?16:-16),u=[c+1,c-1];for(const d of u){if(d&136)continue;const h=this._turn;if(((o=this._board[d])==null?void 0:o.color)===h&&((l=this._board[d])==null?void 0:l.type)===Pe){this._makeMove({color:h,from:d,to:this._epSquare,piece:Pe,captured:Pe,flags:K.EP_CAPTURE});const f=!this._isKingAttacked(h);if(this._undoMove(),f){i=ze(this._epSquare);break}}}}return[n,this._turn,s,i,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(t){if(!this._board[t])return 0n;const{color:r,type:n}=this._board[t],s={w:0,b:1}[r],i={p:0,n:1,b:2,r:3,q:4,k:5}[n];return Vk[s][i][t]}_epKey(){return this._epSquare===Ke?0n:Hk[this._epSquare&7]}_castlingKey(){const t=this._castling.w>>5|this._castling.b>>3;return Gk[t]}_computeHash(){let t=0n;for(let r=W.a8;r<=W.h1;r++){if(r&136){r+=7;continue}this._board[r]&&(t^=this._pieceKey(r))}return t^=this._epKey(),t^=this._castlingKey(),this._turn==="b"&&(t^=Il),t}_updateSetup(t){this._history.length>0||(t!==$l?(this._header.SetUp="1",this._header.FEN=t):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load($l)}get(t){return this._board[W[t]]}findPiece(t){var n;const r=[];for(let s=W.a8;s<=W.h1;s++){if(s&136){s+=7;continue}!this._board[s]||((n=this._board[s])==null?void 0:n.color)!==t.color||this._board[s].color===t.color&&this._board[s].type===t.type&&r.push(ze(s))}return r}put({type:t,color:r},n){return this._put({type:t,color:r},n)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(t,r){this._hash^=this._pieceKey(t),this._board[t]=r,this._hash^=this._pieceKey(t)}_put({type:t,color:r},n){if(eS.indexOf(t.toLowerCase())===-1||!(n in W))return!1;const s=W[n];if(t==Ie&&!(this._kings[r]==Ke||this._kings[r]==s))return!1;const i=this._board[s];return i&&i.type===Ie&&(this._kings[i.color]=Ke),this._set(s,{type:t,color:r}),t===Ie&&(this._kings[r]=s),!0}_clear(t){this._hash^=this._pieceKey(t),delete this._board[t]}remove(t){const r=this.get(t);return this._clear(W[t]),r&&r.type===Ie&&(this._kings[r.color]=Ke),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),r}_updateCastlingRights(){var n,s,i,o,l,c,u,d,h,f,y,v;this._hash^=this._castlingKey();const t=((n=this._board[W.e1])==null?void 0:n.type)===Ie&&((s=this._board[W.e1])==null?void 0:s.color)===Ze,r=((i=this._board[W.e8])==null?void 0:i.type)===Ie&&((o=this._board[W.e8])==null?void 0:o.color)===kt;(!t||((l=this._board[W.a1])==null?void 0:l.type)!==ii||((c=this._board[W.a1])==null?void 0:c.color)!==Ze)&&(this._castling.w&=-65),(!t||((u=this._board[W.h1])==null?void 0:u.type)!==ii||((d=this._board[W.h1])==null?void 0:d.color)!==Ze)&&(this._castling.w&=-33),(!r||((h=this._board[W.a8])==null?void 0:h.type)!==ii||((f=this._board[W.a8])==null?void 0:f.color)!==kt)&&(this._castling.b&=-65),(!r||((y=this._board[W.h8])==null?void 0:y.type)!==ii||((v=this._board[W.h8])==null?void 0:v.color)!==kt)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){var i,o;if(this._epSquare===Ke)return;const t=this._epSquare+(this._turn===Ze?-16:16),r=this._epSquare+(this._turn===Ze?16:-16),n=[r+1,r-1];if(this._board[t]!==null||this._board[this._epSquare]!==null||((i=this._board[r])==null?void 0:i.color)!==Js(this._turn)||((o=this._board[r])==null?void 0:o.type)!==Pe){this._hash^=this._epKey(),this._epSquare=Ke;return}const s=l=>{var c,u;return!(l&136)&&((c=this._board[l])==null?void 0:c.color)===this._turn&&((u=this._board[l])==null?void 0:u.type)===Pe};n.some(s)||(this._hash^=this._epKey(),this._epSquare=Ke)}_attacked(t,r,n){const s=[];for(let i=W.a8;i<=W.h1;i++){if(i&136){i+=7;continue}if(this._board[i]===void 0||this._board[i].color!==t)continue;const o=this._board[i],l=i-r;if(l===0)continue;const c=l+119;if(Yk[c]&Zk[o.type]){if(o.type===Pe){if(l>0&&o.color===Ze||l<=0&&o.color===kt)if(n)s.push(ze(i));else return!0;continue}if(o.type==="n"||o.type==="k")if(n){s.push(ze(i));continue}else return!0;const u=Xk[c];let d=i+u,h=!1;for(;d!==r;){if(this._board[d]!=null){h=!0;break}d+=u}if(!h)if(n){s.push(ze(i));continue}else return!0}}return n?s:!1}attackers(t,r){return r?this._attacked(r,W[t],!0):this._attacked(this._turn,W[t],!0)}_isKingAttacked(t){const r=this._kings[t];return r===-1?!1:this._attacked(Js(t),r)}hash(){return this._hash.toString(16)}isAttacked(t,r){return this._attacked(r,W[t])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const t={b:0,n:0,r:0,q:0,k:0,p:0},r=[];let n=0,s=0;for(let i=W.a8;i<=W.h1;i++){if(s=(s+1)%2,i&136){i+=7;continue}const o=this._board[i];o&&(t[o.type]=o.type in t?t[o.type]+1:1,o.type===Do&&r.push(s),n++)}if(n===2)return!0;if(n===3&&(t[Do]===1||t[eu]===1))return!0;if(n===t[Do]+2){let i=0;const o=r.length;for(let l=0;l<o;l++)i+=r[l];if(i===0||i===o)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:t=!1,square:r=void 0,piece:n=void 0}={}){const s=this._moves({square:r,piece:n});return t?s.map(i=>new So(this,i)):s.map(i=>this._moveToSan(i,s))}_moves({legal:t=!0,piece:r=void 0,square:n=void 0}={}){var y;const s=n?n.toLowerCase():void 0,i=r==null?void 0:r.toLowerCase(),o=[],l=this._turn,c=Js(l);let u=W.a8,d=W.h1,h=!1;if(s)if(s in W)u=d=W[s],h=!0;else return[];for(let v=u;v<=d;v++){if(v&136){v+=7;continue}if(!this._board[v]||this._board[v].color===c)continue;const{type:m}=this._board[v];let x;if(m===Pe){if(i&&i!==m)continue;x=v+Ll[l][0],this._board[x]||(Rr(o,l,v,x,Pe),x=v+Ll[l][1],iS[l]===Cn(v)&&!this._board[x]&&Rr(o,l,v,x,Pe,void 0,K.BIG_PAWN));for(let g=2;g<4;g++)x=v+Ll[l][g],!(x&136)&&(((y=this._board[x])==null?void 0:y.color)===c?Rr(o,l,v,x,Pe,this._board[x].type,K.CAPTURE):x===this._epSquare&&Rr(o,l,v,x,Pe,Pe,K.EP_CAPTURE))}else{if(i&&i!==m)continue;for(let g=0,p=Af[m].length;g<p;g++){const w=Af[m][g];for(x=v;x+=w,!(x&136);){if(!this._board[x])Rr(o,l,v,x,m);else{if(this._board[x].color===l)break;Rr(o,l,v,x,m,this._board[x].type,K.CAPTURE);break}if(m===eu||m===Ie)break}}}}if((i===void 0||i===Ie)&&(!h||d===this._kings[l])){if(this._castling[l]&K.KSIDE_CASTLE){const v=this._kings[l],m=v+2;!this._board[v+1]&&!this._board[m]&&!this._attacked(c,this._kings[l])&&!this._attacked(c,v+1)&&!this._attacked(c,m)&&Rr(o,l,this._kings[l],m,Ie,void 0,K.KSIDE_CASTLE)}if(this._castling[l]&K.QSIDE_CASTLE){const v=this._kings[l],m=v-2;!this._board[v-1]&&!this._board[v-2]&&!this._board[v-3]&&!this._attacked(c,this._kings[l])&&!this._attacked(c,v-1)&&!this._attacked(c,m)&&Rr(o,l,this._kings[l],m,Ie,void 0,K.QSIDE_CASTLE)}}if(!t||this._kings[l]===-1)return o;const f=[];for(let v=0,m=o.length;v<m;v++)this._makeMove(o[v]),this._isKingAttacked(l)||f.push(o[v]),this._undoMove();return f}move(t,{strict:r=!1}={}){let n=null;if(typeof t=="string")n=this._moveFromSan(t,r);else if(t===null)n=this._moveFromSan(Ml,r);else if(typeof t=="object"){const i=this._moves();for(let o=0,l=i.length;o<l;o++)if(t.from===ze(i[o].from)&&t.to===ze(i[o].to)&&(!("promotion"in i[o])||t.promotion===i[o].promotion)){n=i[o];break}}if(!n)throw typeof t=="string"?new Error(`Invalid move: ${t}`):new Error(`Invalid move: ${JSON.stringify(t)}`);if(this.isCheck()&&n.flags&K.NULL_MOVE)throw new Error("Null move not allowed when in check");const s=new So(this,n);return this._makeMove(n),this._incPositionCount(),s}_push(t){this._history.push({move:t,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(t,r){this._hash^=this._pieceKey(t),this._board[r]=this._board[t],delete this._board[t],this._hash^=this._pieceKey(r)}_makeMove(t){var s,i,o,l;const r=this._turn,n=Js(r);if(this._push(t),t.flags&K.NULL_MOVE){r===kt&&this._moveNumber++,this._halfMoves++,this._turn=n,this._epSquare=Ke;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),t.captured&&(this._hash^=this._pieceKey(t.to)),this._movePiece(t.from,t.to),t.flags&K.EP_CAPTURE&&(this._turn===kt?this._clear(t.to-16):this._clear(t.to+16)),t.promotion&&(this._clear(t.to),this._set(t.to,{type:t.promotion,color:r})),this._board[t.to].type===Ie){if(this._kings[r]=t.to,t.flags&K.KSIDE_CASTLE){const c=t.to-1,u=t.to+1;this._movePiece(u,c)}else if(t.flags&K.QSIDE_CASTLE){const c=t.to+1,u=t.to-2;this._movePiece(u,c)}this._castling[r]=0}if(this._castling[r]){for(let c=0,u=Pr[r].length;c<u;c++)if(t.from===Pr[r][c].square&&this._castling[r]&Pr[r][c].flag){this._castling[r]^=Pr[r][c].flag;break}}if(this._castling[n]){for(let c=0,u=Pr[n].length;c<u;c++)if(t.to===Pr[n][c].square&&this._castling[n]&Pr[n][c].flag){this._castling[n]^=Pr[n][c].flag;break}}if(this._hash^=this._castlingKey(),t.flags&K.BIG_PAWN){let c;r===kt?c=t.to-16:c=t.to+16,!(t.to-1&136)&&((s=this._board[t.to-1])==null?void 0:s.type)===Pe&&((i=this._board[t.to-1])==null?void 0:i.color)===n||!(t.to+1&136)&&((o=this._board[t.to+1])==null?void 0:o.type)===Pe&&((l=this._board[t.to+1])==null?void 0:l.color)===n?(this._epSquare=c,this._hash^=this._epKey()):this._epSquare=Ke}else this._epSquare=Ke;t.piece===Pe?this._halfMoves=0:t.flags&(K.CAPTURE|K.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,r===kt&&this._moveNumber++,this._turn=n,this._hash^=Il}undo(){const t=this._hash,r=this._undoMove();if(r){const n=new So(this,r);return this._decPositionCount(t),n}return null}_undoMove(){const t=this._history.pop();if(t===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const r=t.move;this._kings=t.kings,this._turn=t.turn,this._castling=t.castling,this._epSquare=t.epSquare,this._halfMoves=t.halfMoves,this._moveNumber=t.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=Il;const n=this._turn,s=Js(n);if(r.flags&K.NULL_MOVE)return r;if(this._movePiece(r.to,r.from),r.piece&&(this._clear(r.from),this._set(r.from,{type:r.piece,color:n})),r.captured)if(r.flags&K.EP_CAPTURE){let i;n===kt?i=r.to-16:i=r.to+16,this._set(i,{type:Pe,color:s})}else this._set(r.to,{type:r.captured,color:s});if(r.flags&(K.KSIDE_CASTLE|K.QSIDE_CASTLE)){let i,o;r.flags&K.KSIDE_CASTLE?(i=r.to+1,o=r.to-1):(i=r.to-2,o=r.to+1),this._movePiece(o,i)}return r}pgn({newline:t=`
`,maxWidth:r=0}={}){const n=[];let s=!1;for(const f in this._header)this._header[f]&&n.push(`[${f} "${this._header[f]}"]`+t),s=!0;s&&this._history.length&&n.push(t);const i=f=>{const y=this._comments[this.fen()];if(typeof y<"u"){const v=f.length>0?" ":"";f=`${f}${v}{${y}}`}return f},o=[];for(;this._history.length>0;)o.push(this._undoMove());const l=[];let c="";for(o.length===0&&l.push(i(""));o.length>0;){c=i(c);const f=o.pop();if(!f)break;if(!this._history.length&&f.color==="b"){const y=`${this._moveNumber}. ...`;c=c?`${c} ${y}`:y}else f.color==="w"&&(c.length&&l.push(c),c=this._moveNumber+".");c=c+" "+this._moveToSan(f,this._moves({legal:!0})),this._makeMove(f)}if(c.length&&l.push(i(c)),l.push(this._header.Result||"*"),r===0)return n.join("")+l.join(" ");const u=function(){return n.length>0&&n[n.length-1]===" "?(n.pop(),!0):!1},d=function(f,y){for(const v of y.split(" "))if(v){if(f+v.length>r){for(;u();)f--;n.push(t),f=0}n.push(v),f+=v.length,n.push(" "),f++}return u()&&f--,f};let h=0;for(let f=0;f<l.length;f++){if(h+l[f].length>r&&l[f].includes("{")){h=d(h,l[f]);continue}h+l[f].length>r&&f!==0?(n[n.length-1]===" "&&n.pop(),n.push(t),h=0):f!==0&&(n.push(" "),h++),n.push(l[f]),h+=l[f].length}return n.join("")}header(...t){for(let r=0;r<t.length;r+=2)typeof t[r]=="string"&&typeof t[r+1]=="string"&&(this._header[t[r]]=t[r+1]);return this._header}setHeader(t,r){return this._header[t]=r??tu[t]??null,this.getHeaders()}removeHeader(t){return t in this._header?(this._header[t]=tu[t]||null,!0):!1}getHeaders(){const t={};for(const[r,n]of Object.entries(this._header))n!==null&&(t[r]=n);return t}loadPgn(t,{strict:r=!1,newlineChar:n=`\r?
`}={}){n!==`\r?
`&&(t=t.replace(new RegExp(n,"g"),`
`));const s=qk(t);this.reset();const i=s.headers;let o="";for(const u in i)u.toLowerCase()==="fen"&&(o=i[u]),this.header(u,i[u]);if(!r)o&&this.load(o,{preserveHeaders:!0});else if(i.SetUp==="1"){if(!("FEN"in i))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(i.FEN,{preserveHeaders:!0})}let l=s.root;for(;l;){if(l.move){const u=this._moveFromSan(l.move,r);if(u==null)throw new Error(`Invalid move in PGN: ${l.move}`);this._makeMove(u),this._incPositionCount()}l.comment!==void 0&&(this._comments[this.fen()]=l.comment),l=l.variations[0]}const c=s.result;c&&Object.keys(this._header).length&&this._header.Result!==c&&this.setHeader("Result",c)}_moveToSan(t,r){let n="";if(t.flags&K.KSIDE_CASTLE)n="O-O";else if(t.flags&K.QSIDE_CASTLE)n="O-O-O";else{if(t.flags&K.NULL_MOVE)return Ml;if(t.piece!==Pe){const s=aS(t,r);n+=t.piece.toUpperCase()+s}t.flags&(K.CAPTURE|K.EP_CAPTURE)&&(t.piece===Pe&&(n+=ze(t.from)[0]),n+="x"),n+=ze(t.to),t.promotion&&(n+="="+t.promotion.toUpperCase())}return this._makeMove(t),this.isCheck()&&(this.isCheckmate()?n+="#":n+="+"),this._undoMove(),n}_moveFromSan(t,r=!1){let n=Ul(t);if(r||(n==="0-0"?n="O-O":n==="0-0-0"&&(n="O-O-O")),n==Ml)return{color:this._turn,from:0,to:0,piece:"k",flags:K.NULL_MOVE};let s=If(n),i=this._moves({legal:!0,piece:s});for(let f=0,y=i.length;f<y;f++)if(n===Ul(this._moveToSan(i[f],i)))return i[f];if(r)return null;let o,l,c,u,d,h=!1;if(l=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),l?(o=l[1],c=l[2],u=l[3],d=l[4],c.length==1&&(h=!0)):(l=n.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),l&&(o=l[1],c=l[2],u=l[3],d=l[4],c.length==1&&(h=!0))),s=If(n),i=this._moves({legal:!0,piece:o||s}),!u)return null;for(let f=0,y=i.length;f<y;f++)if(c){if((!o||o.toLowerCase()==i[f].piece)&&W[c]==i[f].from&&W[u]==i[f].to&&(!d||d.toLowerCase()==i[f].promotion))return i[f];if(h){const v=ze(i[f].from);if((!o||o.toLowerCase()==i[f].piece)&&W[u]==i[f].to&&(c==v[0]||c==v[1])&&(!d||d.toLowerCase()==i[f].promotion))return i[f]}}else if(n===Ul(this._moveToSan(i[f],i)).replace("x",""))return i[f];return null}ascii(){let t=`   +------------------------+
`;for(let r=W.a8;r<=W.h1;r++){if(qi(r)===0&&(t+=" "+"87654321"[Cn(r)]+" |"),this._board[r]){const n=this._board[r].type,i=this._board[r].color===Ze?n.toUpperCase():n.toLowerCase();t+=" "+i+" "}else t+=" . ";r+1&136&&(t+=`|
`,r+=8)}return t+=`   +------------------------+
`,t+="     a  b  c  d  e  f  g  h",t}perft(t){const r=this._moves({legal:!1});let n=0;const s=this._turn;for(let i=0,o=r.length;i<o;i++)this._makeMove(r[i]),this._isKingAttacked(s)||(t-1>0?n+=this.perft(t-1):n++),this._undoMove();return n}setTurn(t){return this._turn==t?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const t=[];let r=[];for(let n=W.a8;n<=W.h1;n++)this._board[n]==null?r.push(null):r.push({square:ze(n),type:this._board[n].type,color:this._board[n].color}),n+1&136&&(t.push(r),r=[],n+=8);return t}squareColor(t){if(t in W){const r=W[t];return(Cn(r)+qi(r))%2===0?"light":"dark"}return null}history({verbose:t=!1}={}){const r=[],n=[];for(;this._history.length>0;)r.push(this._undoMove());for(;;){const s=r.pop();if(!s)break;t?n.push(new So(this,s)):n.push(this._moveToSan(s,this._moves())),this._makeMove(s)}return n}_getPositionCount(t){return this._positionCount.get(t)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(t){const r=this._positionCount.get(t)??0;r===1?this._positionCount.delete(t):this._positionCount.set(t,r-1)}_pruneComments(){const t=[],r={},n=s=>{s in this._comments&&(r[s]=this._comments[s])};for(;this._history.length>0;)t.push(this._undoMove());for(n(this.fen());;){const s=t.pop();if(!s)break;this._makeMove(s),n(this.fen())}this._comments=r}getComment(){return this._comments[this.fen()]}setComment(t){this._comments[this.fen()]=t.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const t=this._comments[this.fen()];return delete this._comments[this.fen()],t}getComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>({fen:t,comment:this._comments[t]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>{const r=this._comments[t];return delete this._comments[t],{fen:t,comment:r}})}setCastlingRights(t,r){for(const s of[Ie,Lr])r[s]!==void 0&&(r[s]?this._castling[t]|=jo[s]:this._castling[t]&=~jo[s]);this._updateCastlingRights();const n=this.getCastlingRights(t);return(r[Ie]===void 0||r[Ie]===n[Ie])&&(r[Lr]===void 0||r[Lr]===n[Lr])}getCastlingRights(t){return{[Ie]:(this._castling[t]&jo[Ie])!==0,[Lr]:(this._castling[t]&jo[Lr])!==0}}moveNumber(){return this._moveNumber}}const lS=["white","black"],ma=["a","b","c","d","e","f","g","h"],ga=["1","2","3","4","5","6","7","8"],cS=[...ga].reverse(),dd=Array.prototype.concat(...ma.map(e=>ga.map(t=>e+t))),Lt=e=>dd[8*e[0]+e[1]],ye=e=>[e.charCodeAt(0)-97,e.charCodeAt(1)-49],Gg=dd.map(ye);function uS(e){let t;const r=()=>(t===void 0&&(t=e()),t);return r.clear=()=>{t=void 0},r}const dS=()=>{let e;return{start(){e=performance.now()},cancel(){e=void 0},stop(){if(!e)return 0;const t=performance.now()-e;return e=void 0,t}}},hd=e=>e==="white"?"black":"white",Ki=(e,t)=>{const r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n},ru=(e,t)=>e.role===t.role&&e.color===t.color,Zi=e=>(t,r)=>[(r?t[0]:7-t[0])*e.width/8,(r?7-t[1]:t[1])*e.height/8],sr=(e,t)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px)`},Jg=(e,t,r=1)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px) scale(${r})`},fd=(e,t)=>{e.style.visibility=t?"visible":"hidden"},Dn=e=>{var t;if(e.clientX||e.clientX===0)return[e.clientX,e.clientY];if(!((t=e.targetTouches)===null||t===void 0)&&t[0])return[e.targetTouches[0].clientX,e.targetTouches[0].clientY]},Qg=e=>e.button===2,wr=(e,t)=>{const r=document.createElement(e);return t&&(r.className=t),r};function Yg(e,t,r){const n=ye(e);return t||(n[0]=7-n[0],n[1]=7-n[1]),[r.left+r.width*n[0]/8+r.width/16,r.top+r.height*(7-n[1])/8+r.height/16]}const $n=(e,t)=>Math.abs(e-t),hS=e=>(t,r,n,s)=>$n(t,n)<2&&(e==="white"?s===r+1||r<=1&&s===r+2&&t===n:s===r-1||r>=6&&s===r-2&&t===n),Xg=(e,t,r,n)=>{const s=$n(e,r),i=$n(t,n);return s===1&&i===2||s===2&&i===1},Zg=(e,t,r,n)=>$n(e,r)===$n(t,n),ev=(e,t,r,n)=>e===r||t===n,tv=(e,t,r,n)=>Zg(e,t,r,n)||ev(e,t,r,n),fS=(e,t,r)=>(n,s,i,o)=>$n(n,i)<2&&$n(s,o)<2||r&&s===o&&s===(e==="white"?0:7)&&(n===4&&(i===2&&t.includes(0)||i===6&&t.includes(7))||t.includes(i));function pS(e,t){const r=t==="white"?"1":"8",n=[];for(const[s,i]of e)s[1]===r&&i.color===t&&i.role==="rook"&&n.push(ye(s)[0]);return n}function rv(e,t,r){const n=e.get(t);if(!n)return[];const s=ye(t),i=n.role,o=i==="pawn"?hS(n.color):i==="knight"?Xg:i==="bishop"?Zg:i==="rook"?ev:i==="queen"?tv:fS(n.color,pS(e,n.color),r);return Gg.filter(l=>(s[0]!==l[0]||s[1]!==l[1])&&o(s[0],s[1],l[0],l[1])).map(Lt)}function wt(e,...t){e&&setTimeout(()=>e(...t),1)}function mS(e){e.orientation=hd(e.orientation),e.animation.current=e.draggable.current=e.selected=void 0}function gS(e,t){for(const[r,n]of t)n?e.pieces.set(r,n):e.pieces.delete(r)}function vS(e,t){if(e.check=void 0,t===!0&&(t=e.turnColor),t)for(const[r,n]of e.pieces)n.role==="king"&&n.color===t&&(e.check=r)}function yS(e,t,r,n){un(e),e.premovable.current=[t,r],wt(e.premovable.events.set,t,r,n)}function cn(e){e.premovable.current&&(e.premovable.current=void 0,wt(e.premovable.events.unset))}function wS(e,t,r){cn(e),e.predroppable.current={role:t,key:r},wt(e.predroppable.events.set,t,r)}function un(e){const t=e.predroppable;t.current&&(t.current=void 0,wt(t.events.unset))}function xS(e,t,r){if(!e.autoCastle)return!1;const n=e.pieces.get(t);if(!n||n.role!=="king")return!1;const s=ye(t),i=ye(r);if(s[1]!==0&&s[1]!==7||s[1]!==i[1])return!1;s[0]===4&&!e.pieces.has(r)&&(i[0]===6?r=Lt([7,i[1]]):i[0]===2&&(r=Lt([0,i[1]])));const o=e.pieces.get(r);return!o||o.color!==n.color||o.role!=="rook"?!1:(e.pieces.delete(t),e.pieces.delete(r),s[0]<i[0]?(e.pieces.set(Lt([6,i[1]]),n),e.pieces.set(Lt([5,i[1]]),o)):(e.pieces.set(Lt([2,i[1]]),n),e.pieces.set(Lt([3,i[1]]),o)),!0)}function nv(e,t,r){const n=e.pieces.get(t),s=e.pieces.get(r);if(t===r||!n)return!1;const i=s&&s.color!==n.color?s:void 0;return r===e.selected&&Dt(e),wt(e.events.move,t,r,i),xS(e,t,r)||(e.pieces.set(r,n),e.pieces.delete(t)),e.lastMove=[t,r],e.check=void 0,wt(e.events.change),i||!0}function pd(e,t,r,n){if(e.pieces.has(r))if(n)e.pieces.delete(r);else return!1;return wt(e.events.dropNewPiece,t,r),e.pieces.set(r,t),e.lastMove=[r],e.check=void 0,wt(e.events.change),e.movable.dests=void 0,e.turnColor=hd(e.turnColor),!0}function sv(e,t,r){const n=nv(e,t,r);return n&&(e.movable.dests=void 0,e.turnColor=hd(e.turnColor),e.animation.current=void 0),n}function iv(e,t,r){if(md(e,t,r)){const n=sv(e,t,r);if(n){const s=e.hold.stop();Dt(e);const i={premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:s};return n!==!0&&(i.captured=n),wt(e.movable.events.after,t,r,i),!0}}else if(bS(e,t,r))return yS(e,t,r,{ctrlKey:e.stats.ctrlKey}),Dt(e),!0;return Dt(e),!1}function ov(e,t,r,n){const s=e.pieces.get(t);s&&(_S(e,t,r)||n)?(e.pieces.delete(t),pd(e,s,r,n),wt(e.movable.events.afterNewPiece,s.role,r,{premove:!1,predrop:!1})):s&&kS(e,t,r)?wS(e,s.role,r):(cn(e),un(e)),e.pieces.delete(t),Dt(e)}function nu(e,t,r){if(wt(e.events.select,t),e.selected){if(e.selected===t&&!e.draggable.enabled){Dt(e),e.hold.cancel();return}else if((e.selectable.enabled||r)&&e.selected!==t&&iv(e,e.selected,t)){e.stats.dragged=!1;return}}(e.selectable.enabled||e.draggable.enabled)&&(lv(e,t)||gd(e,t))&&(av(e,t),e.hold.start())}function av(e,t){e.selected=t,gd(e,t)?e.premovable.customDests||(e.premovable.dests=rv(e.pieces,t,e.premovable.castle)):e.premovable.dests=void 0}function Dt(e){e.selected=void 0,e.premovable.dests=void 0,e.hold.cancel()}function lv(e,t){const r=e.pieces.get(t);return!!r&&(e.movable.color==="both"||e.movable.color===r.color&&e.turnColor===r.color)}const md=(e,t,r)=>{var n,s;return t!==r&&lv(e,t)&&(e.movable.free||!!(!((s=(n=e.movable.dests)===null||n===void 0?void 0:n.get(t))===null||s===void 0)&&s.includes(r)))};function _S(e,t,r){const n=e.pieces.get(t);return!!n&&(t===r||!e.pieces.has(r))&&(e.movable.color==="both"||e.movable.color===n.color&&e.turnColor===n.color)}function gd(e,t){const r=e.pieces.get(t);return!!r&&e.premovable.enabled&&e.movable.color===r.color&&e.turnColor!==r.color}function bS(e,t,r){var n,s;const i=(s=(n=e.premovable.customDests)===null||n===void 0?void 0:n.get(t))!==null&&s!==void 0?s:rv(e.pieces,t,e.premovable.castle);return t!==r&&gd(e,t)&&i.includes(r)}function kS(e,t,r){const n=e.pieces.get(t),s=e.pieces.get(r);return!!n&&(!s||s.color!==e.movable.color)&&e.predroppable.enabled&&(n.role!=="pawn"||r[1]!=="1"&&r[1]!=="8")&&e.movable.color===n.color&&e.turnColor!==n.color}function SS(e,t){const r=e.pieces.get(t);return!!r&&e.draggable.enabled&&(e.movable.color==="both"||e.movable.color===r.color&&(e.turnColor===r.color||e.premovable.enabled))}function jS(e){const t=e.premovable.current;if(!t)return!1;const r=t[0],n=t[1];let s=!1;if(md(e,r,n)){const i=sv(e,r,n);if(i){const o={premove:!0};i!==!0&&(o.captured=i),wt(e.movable.events.after,r,n,o),s=!0}}return cn(e),s}function ES(e,t){const r=e.predroppable.current;let n=!1;if(!r)return!1;if(t(r)){const s={role:r.role,color:e.movable.color};pd(e,s,r.key)&&(wt(e.movable.events.afterNewPiece,r.role,r.key,{premove:!1,predrop:!0}),n=!0)}return un(e),n}function vd(e){cn(e),un(e),Dt(e)}function $f(e){e.movable.color=e.movable.dests=e.animation.current=void 0,vd(e)}function zn(e,t,r){let n=Math.floor(8*(e[0]-r.left)/r.width);t||(n=7-n);let s=7-Math.floor(8*(e[1]-r.top)/r.height);return t||(s=7-s),n>=0&&n<8&&s>=0&&s<8?Lt([n,s]):void 0}function NS(e,t,r,n){const s=ye(e),i=Gg.filter(u=>tv(s[0],s[1],u[0],u[1])||Xg(s[0],s[1],u[0],u[1])),l=i.map(u=>Yg(Lt(u),r,n)).map(u=>Ki(t,u)),[,c]=l.reduce((u,d,h)=>u[0]<d?u:[d,h],[l[0],0]);return Lt(i[c])}const xt=e=>e.orientation==="white",cv="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",CS={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},TS={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};function uv(e){e==="start"&&(e=cv);const t=new Map;let r=7,n=0;for(const s of e)switch(s){case" ":case"[":return t;case"/":if(--r,r<0)return t;n=0;break;case"~":{const i=t.get(Lt([n-1,r]));i&&(i.promoted=!0);break}default:{const i=s.charCodeAt(0);if(i<57)n+=i-48;else{const o=s.toLowerCase();t.set(Lt([n,r]),{role:CS[o],color:s===o?"black":"white"}),++n}}}return t}function PS(e){return cS.map(t=>ma.map(r=>{const n=e.get(r+t);if(n){let s=TS[n.role];return n.color==="white"&&(s=s.toUpperCase()),n.promoted&&(s+="~"),s}else return"1"}).join("")).join("/").replace(/1{2,}/g,t=>t.length.toString())}function dv(e,t){t.animation&&(yd(e.animation,t.animation),(e.animation.duration||0)<70&&(e.animation.enabled=!1))}function hv(e,t){var r,n,s;if(!((r=t.movable)===null||r===void 0)&&r.dests&&(e.movable.dests=void 0),!((n=t.drawable)===null||n===void 0)&&n.autoShapes&&(e.drawable.autoShapes=[]),yd(e,t),t.fen&&(e.pieces=uv(t.fen),e.drawable.shapes=((s=t.drawable)===null||s===void 0?void 0:s.shapes)||[]),"check"in t&&vS(e,t.check||!1),"lastMove"in t&&!t.lastMove?e.lastMove=void 0:t.lastMove&&(e.lastMove=t.lastMove),e.selected&&av(e,e.selected),dv(e,t),!e.movable.rookCastle&&e.movable.dests){const i=e.movable.color==="white"?"1":"8",o="e"+i,l=e.movable.dests.get(o),c=e.pieces.get(o);if(!l||!c||c.role!=="king")return;e.movable.dests.set(o,l.filter(u=>!(u==="a"+i&&l.includes("c"+i))&&!(u==="h"+i&&l.includes("g"+i))))}}function yd(e,t){for(const r in t)r==="__proto__"||r==="constructor"||!Object.prototype.hasOwnProperty.call(t,r)||(Object.prototype.hasOwnProperty.call(e,r)&&Lf(e[r])&&Lf(t[r])?yd(e[r],t[r]):e[r]=t[r])}function Lf(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}const yn=(e,t)=>t.animation.enabled?OS(e,t):Ar(e,t);function Ar(e,t){const r=e(t);return t.dom.redraw(),r}const Dl=(e,t)=>({key:e,pos:ye(e),piece:t}),RS=(e,t)=>t.sort((r,n)=>Ki(e.pos,r.pos)-Ki(e.pos,n.pos))[0];function AS(e,t){const r=new Map,n=[],s=new Map,i=[],o=[],l=new Map;let c,u,d;for(const[h,f]of e)l.set(h,Dl(h,f));for(const h of dd)c=t.pieces.get(h),u=l.get(h),c?u?ru(c,u.piece)||(i.push(u),o.push(Dl(h,c))):o.push(Dl(h,c)):u&&i.push(u);for(const h of o)u=RS(h,i.filter(f=>ru(h.piece,f.piece))),u&&(d=[u.pos[0]-h.pos[0],u.pos[1]-h.pos[1]],r.set(h.key,d.concat(d)),n.push(u.key));for(const h of i)n.includes(h.key)||s.set(h.key,h.piece);return{anims:r,fadings:s}}function fv(e,t){const r=e.animation.current;if(r===void 0){e.dom.destroyed||e.dom.redrawNow();return}const n=1-(t-r.start)*r.frequency;if(n<=0)e.animation.current=void 0,e.dom.redrawNow();else{const s=IS(n);for(const i of r.plan.anims.values())i[2]=i[0]*s,i[3]=i[1]*s;e.dom.redrawNow(!0),requestAnimationFrame((i=performance.now())=>fv(e,i))}}function OS(e,t){const r=new Map(t.pieces),n=e(t),s=AS(r,t);if(s.anims.size||s.fadings.size){const i=t.animation.current&&t.animation.current.start;t.animation.current={start:performance.now(),frequency:1/t.animation.duration,plan:s},i||fv(t,performance.now())}else t.dom.redraw();return n}const IS=e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,$S=["green","red","blue","yellow"];function LS(e,t){if(t.touches&&t.touches.length>1)return;t.stopPropagation(),t.preventDefault(),t.ctrlKey?Dt(e):vd(e);const r=Dn(t),n=zn(r,xt(e),e.dom.bounds());n&&(e.drawable.current={orig:n,pos:r,brush:zS(t),snapToValidMove:e.drawable.defaultSnapToValidMove},pv(e))}function pv(e){requestAnimationFrame(()=>{const t=e.drawable.current;if(t){const r=zn(t.pos,xt(e),e.dom.bounds());r||(t.snapToValidMove=!1);const n=t.snapToValidMove?NS(t.orig,t.pos,xt(e),e.dom.bounds()):r;n!==t.mouseSq&&(t.mouseSq=n,t.dest=n!==t.orig?n:void 0,e.dom.redrawNow()),pv(e)}})}function MS(e,t){e.drawable.current&&(e.drawable.current.pos=Dn(t))}function US(e){const t=e.drawable.current;t&&(t.mouseSq&&FS(e.drawable,t),mv(e))}function mv(e){e.drawable.current&&(e.drawable.current=void 0,e.dom.redraw())}function DS(e){e.drawable.shapes.length&&(e.drawable.shapes=[],e.dom.redraw(),gv(e.drawable))}function zS(e){var t;const r=(e.shiftKey||e.ctrlKey)&&Qg(e),n=e.altKey||e.metaKey||((t=e.getModifierState)===null||t===void 0?void 0:t.call(e,"AltGraph"));return $S[(r?1:0)+(n?2:0)]}function FS(e,t){const r=s=>s.orig===t.orig&&s.dest===t.dest,n=e.shapes.find(r);n&&(e.shapes=e.shapes.filter(s=>!r(s))),(!n||n.brush!==t.brush)&&e.shapes.push({orig:t.orig,dest:t.dest,brush:t.brush}),gv(e)}function gv(e){e.onChange&&e.onChange(e.shapes)}function BS(e,t){if(!(e.trustAllEvents||t.isTrusted)||t.buttons!==void 0&&t.buttons>1||t.touches&&t.touches.length>1)return;const r=e.dom.bounds(),n=Dn(t),s=zn(n,xt(e),r);if(!s)return;const i=e.pieces.get(s),o=e.selected;if(!o&&e.drawable.enabled&&(e.drawable.eraseOnClick||!i||i.color!==e.turnColor)&&DS(e),t.cancelable!==!1&&(!t.touches||e.blockTouchScroll||i||o||WS(e,n)))t.preventDefault();else if(t.touches)return;const l=!!e.premovable.current,c=!!e.predroppable.current;e.stats.ctrlKey=t.ctrlKey,e.selected&&md(e,e.selected,s)?yn(h=>nu(h,s),e):nu(e,s);const u=e.selected===s,d=yv(e,s);if(i&&d&&u&&SS(e,s)){e.draggable.current={orig:s,piece:i,origPos:n,pos:n,started:e.draggable.autoDistance&&e.stats.dragged,element:d,previouslySelected:o,originTarget:t.target,keyHasChanged:!1},d.cgDragging=!0,d.classList.add("dragging");const h=e.dom.elements.ghost;h&&(h.className=`ghost ${i.color} ${i.role}`,sr(h,Zi(r)(ye(s),xt(e))),fd(h,!0)),wd(e)}else l&&cn(e),c&&un(e);e.dom.redraw()}function WS(e,t){const r=xt(e),n=e.dom.bounds(),s=Math.pow(n.width/8,2);for(const i of e.pieces.keys()){const o=Yg(i,r,n);if(Ki(o,t)<=s)return!0}return!1}function qS(e,t,r,n){const s="a0";e.pieces.set(s,t),e.dom.redraw();const i=Dn(r);e.draggable.current={orig:s,piece:t,origPos:i,pos:i,started:!0,element:()=>yv(e,s),originTarget:r.target,newPiece:!0,force:!!n,keyHasChanged:!1},wd(e)}function wd(e){requestAnimationFrame(()=>{var t;const r=e.draggable.current;if(!r)return;!((t=e.animation.current)===null||t===void 0)&&t.plan.anims.has(r.orig)&&(e.animation.current=void 0);const n=e.pieces.get(r.orig);if(!n||!ru(n,r.piece))va(e);else if(!r.started&&Ki(r.pos,r.origPos)>=Math.pow(e.draggable.distance,2)&&(r.started=!0),r.started){if(typeof r.element=="function"){const i=r.element();if(!i)return;i.cgDragging=!0,i.classList.add("dragging"),r.element=i}const s=e.dom.bounds();sr(r.element,[r.pos[0]-s.left-s.width/16,r.pos[1]-s.top-s.height/16]),r.keyHasChanged||(r.keyHasChanged=r.orig!==zn(r.pos,xt(e),s))}wd(e)})}function KS(e,t){e.draggable.current&&(!t.touches||t.touches.length<2)&&(e.draggable.current.pos=Dn(t))}function VS(e,t){const r=e.draggable.current;if(!r)return;if(t.type==="touchend"&&t.cancelable!==!1&&t.preventDefault(),t.type==="touchend"&&r.originTarget!==t.target&&!r.newPiece){e.draggable.current=void 0;return}cn(e),un(e);const n=Dn(t)||r.pos,s=zn(n,xt(e),e.dom.bounds());s&&r.started&&r.orig!==s?r.newPiece?ov(e,r.orig,s,r.force):(e.stats.ctrlKey=t.ctrlKey,iv(e,r.orig,s)&&(e.stats.dragged=!0)):r.newPiece?e.pieces.delete(r.orig):e.draggable.deleteOnDropOff&&!s&&(e.pieces.delete(r.orig),wt(e.events.change)),(r.orig===r.previouslySelected||r.keyHasChanged)&&(r.orig===s||!s)?Dt(e):e.selectable.enabled||Dt(e),vv(e),e.draggable.current=void 0,e.dom.redraw()}function va(e){const t=e.draggable.current;t&&(t.newPiece&&e.pieces.delete(t.orig),e.draggable.current=void 0,Dt(e),vv(e),e.dom.redraw())}function vv(e){const t=e.dom.elements;t.ghost&&fd(t.ghost,!1)}function yv(e,t){let r=e.dom.elements.board.firstChild;for(;r;){if(r.cgKey===t&&r.tagName==="PIECE")return r;r=r.nextSibling}}function HS(e,t){e.exploding={stage:1,keys:t},e.dom.redraw(),setTimeout(()=>{Mf(e,2),setTimeout(()=>Mf(e,void 0),120)},120)}function Mf(e,t){e.exploding&&(t?e.exploding.stage=t:e.exploding=void 0,e.dom.redraw())}function GS(e,t){function r(){mS(e),t()}return{set(n){n.orientation&&n.orientation!==e.orientation&&r(),dv(e,n),(n.fen?yn:Ar)(s=>hv(s,n),e)},state:e,getFen:()=>PS(e.pieces),toggleOrientation:r,setPieces(n){yn(s=>gS(s,n),e)},selectSquare(n,s){n?yn(i=>nu(i,n,s),e):e.selected&&(Dt(e),e.dom.redraw())},move(n,s){yn(i=>nv(i,n,s),e)},newPiece(n,s){yn(i=>pd(i,n,s),e)},playPremove(){if(e.premovable.current){if(yn(jS,e))return!0;e.dom.redraw()}return!1},playPredrop(n){if(e.predroppable.current){const s=ES(e,n);return e.dom.redraw(),s}return!1},cancelPremove(){Ar(cn,e)},cancelPredrop(){Ar(un,e)},cancelMove(){Ar(n=>{vd(n),va(n)},e)},stop(){Ar(n=>{$f(n),va(n)},e)},explode(n){HS(e,n)},setAutoShapes(n){Ar(s=>s.drawable.autoShapes=n,e)},setShapes(n){Ar(s=>s.drawable.shapes=n,e)},getKeyAtDomPos(n){return zn(n,xt(e),e.dom.bounds())},redrawAll:t,dragNewPiece(n,s,i){qS(e,n,s,i)},destroy(){$f(e),e.dom.unbind&&e.dom.unbind(),e.dom.destroyed=!0}}}function JS(){return{pieces:uv(cv),orientation:"white",turnColor:"white",coordinates:!0,coordinatesOnSquares:!1,ranksPosition:"right",autoCastle:!0,viewOnly:!1,disableContextMenu:!1,addPieceZIndex:!1,blockTouchScroll:!1,pieceKey:!1,trustAllEvents:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,showGhost:!0,deleteOnDropOff:!1},dropmode:{active:!1},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,defaultSnapToValidMove:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15},purple:{key:"purple",color:"#68217a",opacity:.65,lineWidth:10},pink:{key:"pink",color:"#ee2080",opacity:.5,lineWidth:10},white:{key:"white",color:"white",opacity:1,lineWidth:10}},prevSvgHash:""},hold:dS()}}const Uf={hilitePrimary:{key:"hilitePrimary",color:"#3291ff",opacity:1,lineWidth:1},hiliteWhite:{key:"hiliteWhite",color:"#ffffff",opacity:1,lineWidth:1}};function QS(){const e=Ue("defs"),t=ot(Ue("filter"),{id:"cg-filter-blur"});return t.appendChild(ot(Ue("feGaussianBlur"),{stdDeviation:"0.019"})),e.appendChild(t),e}function YS(e,t,r){var n;const s=e.drawable,i=s.current,o=i&&i.mouseSq?i:void 0,l=new Map,c=e.dom.bounds(),u=s.autoShapes.filter(y=>!y.piece);for(const y of s.shapes.concat(u).concat(o?[o]:[])){if(!y.dest)continue;const v=(n=l.get(y.dest))!==null&&n!==void 0?n:new Set,m=xa(wa(ye(y.orig),e.orientation),c),x=xa(wa(ye(y.dest),e.orientation),c);v.add(iu(m,x)),l.set(y.dest,v)}const d=s.shapes.concat(u).map(y=>({shape:y,current:!1,hash:Df(y,su(y.dest,l),!1,c)}));o&&d.push({shape:o,current:!0,hash:Df(o,su(o.dest,l),!0,c)});const h=d.map(y=>y.hash).join(";");if(h===e.drawable.prevSvgHash)return;e.drawable.prevSvgHash=h;const f=t.querySelector("defs");XS(s,d,f),ZS(d,t.querySelector("g"),r.querySelector("g"),y=>rj(e,y,s.brushes,l,c))}function XS(e,t,r){var n;const s=new Map;let i;for(const c of t.filter(u=>u.shape.dest&&u.shape.brush))i=wv(e.brushes[c.shape.brush],c.shape.modifiers),!((n=c.shape.modifiers)===null||n===void 0)&&n.hilite&&s.set(ya(i).key,ya(i)),s.set(i.key,i);const o=new Set;let l=r.firstElementChild;for(;l;)o.add(l.getAttribute("cgKey")),l=l.nextElementSibling;for(const[c,u]of s.entries())o.has(c)||r.appendChild(ij(u))}function ZS(e,t,r,n){const s=new Map;for(const i of e)s.set(i.hash,!1);for(const i of[t,r]){const o=[];let l=i.firstElementChild,c;for(;l;)c=l.getAttribute("cgHash"),s.has(c)?s.set(c,!0):o.push(l),l=l.nextElementSibling;for(const u of o)i.removeChild(u)}for(const i of e.filter(o=>!s.get(o.hash)))for(const o of n(i))o.isCustom?r.appendChild(o.el):t.appendChild(o.el)}function Df({orig:e,dest:t,brush:r,piece:n,modifiers:s,customSvg:i,label:o},l,c,u){var d,h;return[u.width,u.height,c,e,t,r,l&&"-",n&&ej(n),s&&tj(s),i&&`custom-${zf(i.html)},${(h=(d=i.center)===null||d===void 0?void 0:d[0])!==null&&h!==void 0?h:"o"}`,o&&`label-${zf(o.text)}`].filter(f=>f).join(",")}function ej(e){return[e.color,e.role,e.scale].filter(t=>t).join(",")}function tj(e){return[e.lineWidth,e.hilite&&"*"].filter(t=>t).join(",")}function zf(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)>>>0;return t.toString()}function rj(e,{shape:t,current:r,hash:n},s,i,o){var l,c;const u=xa(wa(ye(t.orig),e.orientation),o),d=t.dest?xa(wa(ye(t.dest),e.orientation),o):u,h=t.brush&&wv(s[t.brush],t.modifiers),f=i.get(t.dest),y=[];if(h){const v=ot(Ue("g"),{cgHash:n});y.push({el:v}),u[0]!==d[0]||u[1]!==d[1]?v.appendChild(sj(t,h,u,d,r,su(t.dest,i))):v.appendChild(nj(s[t.brush],u,r,o))}if(t.label){const v=t.label;(l=v.fill)!==null&&l!==void 0||(v.fill=t.brush&&s[t.brush].color);const m=t.brush?void 0:"tr";y.push({el:oj(v,n,u,d,f,m),isCustom:!0})}if(t.customSvg){const v=(c=t.customSvg.center)!==null&&c!==void 0?c:"orig",[m,x]=v==="label"?_v(u,d,f).map(p=>p-.5):v==="dest"?d:u,g=ot(Ue("g"),{transform:`translate(${m},${x})`,cgHash:n});g.innerHTML=`<svg width="1" height="1" viewBox="0 0 100 100">${t.customSvg.html}</svg>`,y.push({el:g,isCustom:!0})}return y}function nj(e,t,r,n){const s=aj(),i=(n.width+n.height)/(4*Math.max(n.width,n.height));return ot(Ue("circle"),{stroke:e.color,"stroke-width":s[r?0:1],fill:"none",opacity:xv(e,r),cx:t[0],cy:t[1],r:i-s[1]/2})}function ya(e){return["#ffffff","#fff","white"].includes(e.color)?Uf.hilitePrimary:Uf.hiliteWhite}function sj(e,t,r,n,s,i){var o;function l(d){var h;const f=cj(i&&!s),y=n[0]-r[0],v=n[1]-r[1],m=Math.atan2(v,y),x=Math.cos(m)*f,g=Math.sin(m)*f;return ot(Ue("line"),{stroke:d?ya(t).color:t.color,"stroke-width":lj(t,s)+(d?.04:0),"stroke-linecap":"round","marker-end":`url(#arrowhead-${d?ya(t).key:t.key})`,opacity:!((h=e.modifiers)===null||h===void 0)&&h.hilite?1:xv(t,s),x1:r[0],y1:r[1],x2:n[0]-x,y2:n[1]-g})}if(!(!((o=e.modifiers)===null||o===void 0)&&o.hilite))return l(!1);const c=Ue("g"),u=ot(Ue("g"),{filter:"url(#cg-filter-blur)"});return u.appendChild(uj(r,n)),u.appendChild(l(!0)),c.appendChild(u),c.appendChild(l(!1)),c}function ij(e){const t=ot(Ue("marker"),{id:"arrowhead-"+e.key,orient:"auto",overflow:"visible",markerWidth:4,markerHeight:4,refX:e.key.startsWith("hilite")?1.86:2.05,refY:2});return t.appendChild(ot(Ue("path"),{d:"M0,0 V4 L3,2 Z",fill:e.color})),t.setAttribute("cgKey",e.key),t}function oj(e,t,r,n,s,i){var o;const c=.4*.75**e.text.length,u=_v(r,n,s),d=i==="tr"?.4:0,h=ot(Ue("g"),{transform:`translate(${u[0]+d},${u[1]-d})`,cgHash:t});h.appendChild(ot(Ue("circle"),{r:.4/2,"fill-opacity":i?1:.8,"stroke-opacity":i?1:.7,"stroke-width":.03,fill:(o=e.fill)!==null&&o!==void 0?o:"#666",stroke:"white"}));const f=ot(Ue("text"),{"font-size":c,"font-family":"Noto Sans","text-anchor":"middle",fill:"white",y:.13*.75**e.text.length});return f.innerHTML=e.text,h.appendChild(f),h}function wa(e,t){return t==="white"?e:[7-e[0],7-e[1]]}function su(e,t){return(e&&t.has(e)&&t.get(e).size>1)===!0}function Ue(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ot(e,t){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.setAttribute(r,t[r]);return e}function wv(e,t){return t?{color:e.color,opacity:Math.round(e.opacity*10)/10,lineWidth:Math.round(t.lineWidth||e.lineWidth),key:[e.key,t.lineWidth].filter(r=>r).join("")}:e}function aj(){return[3/64,4/64]}function lj(e,t){return(e.lineWidth||10)*(t?.85:1)/64}function xv(e,t){return(e.opacity||1)*(t?.9:1)}function cj(e){return(e?20:10)/64}function xa(e,t){const r=Math.min(1,t.width/t.height),n=Math.min(1,t.height/t.width);return[(e[0]-3.5)*r,(3.5-e[1])*n]}function uj(e,t){const r={from:[Math.floor(Math.min(e[0],t[0])),Math.floor(Math.min(e[1],t[1]))],to:[Math.ceil(Math.max(e[0],t[0])),Math.ceil(Math.max(e[1],t[1]))]};return ot(Ue("rect"),{x:r.from[0],y:r.from[1],width:r.to[0]-r.from[0],height:r.to[1]-r.from[1],fill:"none",stroke:"none"})}function iu(e,t,r=!0){const n=Math.atan2(t[1]-e[1],t[0]-e[0])+Math.PI;return r?(Math.round(n*8/Math.PI)+16)%16:n}function dj(e,t){return Math.sqrt([e[0]-t[0],e[1]-t[1]].reduce((r,n)=>r+n*n,0))}function _v(e,t,r){let n=dj(e,t);const s=iu(e,t,!1);if(r&&(n-=33/64,r.size>1)){n-=10/64;const i=iu(e,t);(r.has((i+1)%16)||r.has((i+15)%16))&&i&1&&(n-=.4)}return[e[0]-Math.cos(s)*n,e[1]-Math.sin(s)*n].map(i=>i+.5)}function hj(e,t){e.innerHTML="",e.classList.add("cg-wrap");for(const c of lS)e.classList.toggle("orientation-"+c,t.orientation===c);e.classList.toggle("manipulable",!t.viewOnly);const r=wr("cg-container");e.appendChild(r);const n=wr("cg-board");r.appendChild(n);let s,i,o;if(t.drawable.visible&&(s=ot(Ue("svg"),{class:"cg-shapes",viewBox:"-4 -4 8 8",preserveAspectRatio:"xMidYMid slice"}),s.appendChild(QS()),s.appendChild(Ue("g")),i=ot(Ue("svg"),{class:"cg-custom-svgs",viewBox:"-3.5 -3.5 8 8",preserveAspectRatio:"xMidYMid slice"}),i.appendChild(Ue("g")),o=wr("cg-auto-pieces"),r.appendChild(s),r.appendChild(i),r.appendChild(o)),t.coordinates){const c=t.orientation==="black"?" black":"",u=t.ranksPosition==="left"?" left":"";if(t.coordinatesOnSquares){const d=t.orientation==="white"?h=>h+1:h=>8-h;ma.forEach((h,f)=>r.appendChild(zl(ga.map(y=>h+y),"squares rank"+d(f)+c+u)))}else r.appendChild(zl(ga,"ranks"+c+u)),r.appendChild(zl(ma,"files"+c))}let l;return t.draggable.enabled&&t.draggable.showGhost&&(l=wr("piece","ghost"),fd(l,!1),r.appendChild(l)),{board:n,container:r,wrap:e,ghost:l,svg:s,customSvg:i,autoPieces:o}}function zl(e,t){const r=wr("coords",t);let n;for(const s of e)n=wr("coord"),n.textContent=s,r.appendChild(n);return r}function fj(e,t){if(!e.dropmode.active)return;cn(e),un(e);const r=e.dropmode.piece;if(r){e.pieces.set("a0",r);const n=Dn(t),s=n&&zn(n,xt(e),e.dom.bounds());s&&ov(e,"a0",s)}e.dom.redraw()}function pj(e,t){const r=e.dom.elements.board;if("ResizeObserver"in window&&new ResizeObserver(t).observe(e.dom.elements.wrap),(e.disableContextMenu||e.drawable.enabled)&&r.addEventListener("contextmenu",s=>s.preventDefault()),e.viewOnly)return;const n=gj(e);r.addEventListener("touchstart",n,{passive:!1}),r.addEventListener("mousedown",n,{passive:!1})}function mj(e,t){const r=[];if("ResizeObserver"in window||r.push(Qs(document.body,"chessground.resize",t)),!e.viewOnly){const n=Ff(e,KS,MS),s=Ff(e,VS,US);for(const o of["touchmove","mousemove"])r.push(Qs(document,o,n));for(const o of["touchend","mouseup"])r.push(Qs(document,o,s));const i=()=>e.dom.bounds.clear();r.push(Qs(document,"scroll",i,{capture:!0,passive:!0})),r.push(Qs(window,"resize",i,{passive:!0}))}return()=>r.forEach(n=>n())}function Qs(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}const gj=e=>t=>{e.draggable.current?va(e):e.drawable.current?mv(e):t.shiftKey||Qg(t)?e.drawable.enabled&&LS(e,t):e.viewOnly||(e.dropmode.active?fj(e,t):BS(e,t))},Ff=(e,t,r)=>n=>{e.drawable.current?e.drawable.enabled&&r(e,n):e.viewOnly||t(e,n)};function vj(e){const t=xt(e),r=Zi(e.dom.bounds()),n=e.dom.elements.board,s=e.pieces,i=e.animation.current,o=i?i.plan.anims:new Map,l=i?i.plan.fadings:new Map,c=e.draggable.current,u=wj(e),d=new Set,h=new Set,f=new Map,y=new Map;let v,m,x,g,p,w,_,N,C,R;for(m=n.firstChild;m;){if(v=m.cgKey,bv(m))if(x=s.get(v),p=o.get(v),w=l.get(v),g=m.cgPiece,m.cgDragging&&(!c||c.orig!==v)&&(m.classList.remove("dragging"),sr(m,r(ye(v),t)),m.cgDragging=!1),!w&&m.cgFading&&(m.cgFading=!1,m.classList.remove("fading")),x){if(p&&m.cgAnimating&&g===Ys(x)){const T=ye(v);T[0]+=p[2],T[1]+=p[3],m.classList.add("anim"),sr(m,r(T,t))}else m.cgAnimating&&(m.cgAnimating=!1,m.classList.remove("anim"),sr(m,r(ye(v),t)),e.addPieceZIndex&&(m.style.zIndex=Fl(ye(v),t)));g===Ys(x)&&(!w||!m.cgFading)?d.add(v):w&&g===Ys(w)?(m.classList.add("fading"),m.cgFading=!0):Bl(f,g,m)}else Bl(f,g,m);else if(kv(m)){const T=m.className;u.get(v)===T?h.add(v):Bl(y,T,m)}m=m.nextSibling}for(const[T,q]of u)if(!h.has(T)){C=y.get(q),R=C&&C.pop();const L=r(ye(T),t);if(R)R.cgKey=T,sr(R,L);else{const ee=wr("square",q);ee.cgKey=T,sr(ee,L),n.insertBefore(ee,n.firstChild)}}for(const[T,q]of s)if(p=o.get(T),!d.has(T))if(_=f.get(Ys(q)),N=_&&_.pop(),N){N.cgKey=T,N.cgFading&&(N.classList.remove("fading"),N.cgFading=!1);const L=ye(T);e.addPieceZIndex&&(N.style.zIndex=Fl(L,t)),p&&(N.cgAnimating=!0,N.classList.add("anim"),L[0]+=p[2],L[1]+=p[3]),sr(N,r(L,t))}else{const L=Ys(q),ee=wr("piece",L),G=ye(T);ee.cgPiece=L,ee.cgKey=T,p&&(ee.cgAnimating=!0,G[0]+=p[2],G[1]+=p[3]),sr(ee,r(G,t)),e.addPieceZIndex&&(ee.style.zIndex=Fl(G,t)),n.appendChild(ee)}for(const T of f.values())Wf(e,T);for(const T of y.values())Wf(e,T)}function yj(e){const t=xt(e),r=Zi(e.dom.bounds());let n=e.dom.elements.board.firstChild;for(;n;)(bv(n)&&!n.cgAnimating||kv(n))&&sr(n,r(ye(n.cgKey),t)),n=n.nextSibling}function Bf(e){var t,r;const n=e.dom.elements.wrap.getBoundingClientRect(),s=e.dom.elements.container,i=n.height/n.width,o=Math.floor(n.width*window.devicePixelRatio/8)*8/window.devicePixelRatio,l=o*i;s.style.width=o+"px",s.style.height=l+"px",e.dom.bounds.clear(),(t=e.addDimensionsCssVarsTo)===null||t===void 0||t.style.setProperty("---cg-width",o+"px"),(r=e.addDimensionsCssVarsTo)===null||r===void 0||r.style.setProperty("---cg-height",l+"px")}const bv=e=>e.tagName==="PIECE",kv=e=>e.tagName==="SQUARE";function Wf(e,t){for(const r of t)e.dom.elements.board.removeChild(r)}function Fl(e,t){const n=e[1];return`${t?10-n:3+n}`}const Ys=e=>`${e.color} ${e.role}`;function wj(e){var t,r,n;const s=new Map;if(e.lastMove&&e.highlight.lastMove)for(const l of e.lastMove)hr(s,l,"last-move");if(e.check&&e.highlight.check&&hr(s,e.check,"check"),e.selected&&(hr(s,e.selected,"selected"),e.movable.showDests)){const l=(t=e.movable.dests)===null||t===void 0?void 0:t.get(e.selected);if(l)for(const u of l)hr(s,u,"move-dest"+(e.pieces.has(u)?" oc":""));const c=(n=(r=e.premovable.customDests)===null||r===void 0?void 0:r.get(e.selected))!==null&&n!==void 0?n:e.premovable.dests;if(c)for(const u of c)hr(s,u,"premove-dest"+(e.pieces.has(u)?" oc":""))}const i=e.premovable.current;if(i)for(const l of i)hr(s,l,"current-premove");else e.predroppable.current&&hr(s,e.predroppable.current.key,"current-premove");const o=e.exploding;if(o)for(const l of o.keys)hr(s,l,"exploding"+o.stage);return e.highlight.custom&&e.highlight.custom.forEach((l,c)=>{hr(s,c,l)}),s}function hr(e,t,r){const n=e.get(t);n?e.set(t,`${n} ${r}`):e.set(t,r)}function Bl(e,t,r){const n=e.get(t);n?n.push(r):e.set(t,[r])}function xj(e,t,r){const n=new Map,s=[];for(const l of e)n.set(l.hash,!1);let i=t.firstElementChild,o;for(;i;)o=i.getAttribute("cgHash"),n.has(o)?n.set(o,!0):s.push(i),i=i.nextElementSibling;for(const l of s)t.removeChild(l);for(const l of e)n.get(l.hash)||t.appendChild(r(l))}function _j(e,t){const n=e.drawable.autoShapes.filter(s=>s.piece).map(s=>({shape:s,hash:Sj(s),current:!1}));xj(n,t,s=>kj(e,s,e.dom.bounds()))}function bj(e){var t;const r=xt(e),n=Zi(e.dom.bounds());let s=(t=e.dom.elements.autoPieces)===null||t===void 0?void 0:t.firstChild;for(;s;)Jg(s,n(ye(s.cgKey),r),s.cgScale),s=s.nextSibling}function kj(e,{shape:t,hash:r},n){var s,i,o;const l=t.orig,c=(s=t.piece)===null||s===void 0?void 0:s.role,u=(i=t.piece)===null||i===void 0?void 0:i.color,d=(o=t.piece)===null||o===void 0?void 0:o.scale,h=wr("piece",`${c} ${u}`);return h.setAttribute("cgHash",r),h.cgKey=l,h.cgScale=d,Jg(h,Zi(n)(ye(l),xt(e)),d),h}const Sj=e=>{var t,r,n;return[e.orig,(t=e.piece)===null||t===void 0?void 0:t.role,(r=e.piece)===null||r===void 0?void 0:r.color,(n=e.piece)===null||n===void 0?void 0:n.scale].join(",")};function jj(e,t){const r=JS();hv(r,t||{});function n(){const s="dom"in r?r.dom.unbind:void 0,i=hj(e,r),o=uS(()=>i.board.getBoundingClientRect()),l=d=>{vj(u),i.autoPieces&&_j(u,i.autoPieces),!d&&i.svg&&YS(u,i.svg,i.customSvg)},c=()=>{Bf(u),yj(u),i.autoPieces&&bj(u)},u=r;return u.dom={elements:i,bounds:o,redraw:Ej(l),redrawNow:l,unbind:s},u.drawable.prevSvgHash="",Bf(u),l(!1),pj(u,c),s||(u.dom.unbind=mj(u,c)),u.events.insert&&u.events.insert(i),u}return GS(n(),n)}function Ej(e){let t=!1;return()=>{t||(t=!0,requestAnimationFrame(()=>{e(),t=!1}))}}const qf=({secondsRemaining:e,isActive:t,label:r})=>{const n=Math.floor(e/60),s=e%60;return a.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-md border ${t?"bg-secondary border-primary text-primary":"bg-background border-border text-muted-foreground"}`,children:[a.jsx("span",{className:"text-xs uppercase font-bold tracking-wider",children:r}),a.jsxs("span",{className:"font-mono text-xl font-medium",children:[n,":",s.toString().padStart(2,"0")]})]})},Nj=[[0,0,0,0,0,0,0,0],[5,10,10,-20,-20,10,10,5],[5,-5,-10,0,0,-10,-5,5],[0,0,0,20,20,0,0,0],[5,5,10,25,25,10,5,5],[10,10,20,30,30,20,10,10],[50,50,50,50,50,50,50,50],[0,0,0,0,0,0,0,0]],Cj=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,5,5,0,-20,-40],[-30,5,10,15,15,10,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,10,15,15,10,0,-30],[-40,-20,0,0,0,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],Tj=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,5,0,0,0,0,5,-10],[-10,10,10,10,10,10,10,-10],[-10,0,10,10,10,10,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,5,10,10,5,0,-10],[-10,0,0,0,0,0,0,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],Pj=[[0,0,0,5,5,0,0,0],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[5,10,10,10,10,10,10,5],[0,0,0,0,0,0,0,0]],Rj=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,5,0,0,0,0,-10],[-10,5,5,5,5,5,0,-10],[0,0,5,5,5,5,0,-5],[-5,0,5,5,5,5,0,-5],[-10,0,5,5,5,5,0,-10],[-10,0,0,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Aj=[[20,30,10,0,0,10,30,20],[20,20,0,0,0,0,20,20],[-10,-20,-20,-20,-20,-20,-20,-10],[-20,-30,-30,-40,-40,-30,-30,-20],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30]],Oj=(e,t,r)=>{if(!e)return 0;let s={p:100,n:320,b:330,r:500,q:900,k:2e4}[e.type]||0;const i={p:Nj,n:Cj,b:Tj,r:Pj,q:Rj,k:Aj}[e.type]||[[]];return e.color==="b"?s+=i[r][t]:s+=i[7-r][t],e.color==="w"?-s:s},Ij=e=>{let t=0;const r=e.board();for(let n=0;n<8;n++)for(let s=0;s<8;s++)t+=Oj(r[n][s],s,n);return t},ou=(e,t,r,n,s)=>{if(t===0)return Ij(e);const i=e.moves();if(s){let o=-1/0;for(const l of i){e.move(l);const c=ou(e,t-1,r,n,!s);if(e.undo(),o=Math.max(o,c),r=Math.max(r,c),n<=r)break}return o}else{let o=1/0;for(const l of i){e.move(l);const c=ou(e,t-1,r,n,!s);if(e.undo(),o=Math.min(o,c),n=Math.min(n,c),n<=r)break}return o}},xd=(e,t)=>{const r=e.moves();if(r.length===0)return null;let n=null,s=-1/0;const i=r.sort(()=>Math.random()-.5);for(const o of i){e.move(o);const l=ou(e,t-1,-1/0,1/0,!1);e.undo(),l>s&&(s=l,n=o)}return n},$j=e=>xd(new gr(e.fen()),2),Lj=e=>xd(new gr(e.fen()),3),Mj=e=>xd(new gr(e.fen()),4),Uj=e=>{switch(e){case dt.WORLD:return{initial:25,increment:1,max:25};case dt.STARTER:return{initial:30,increment:2,max:35};default:return{initial:40,increment:2,max:50}}},Dj=()=>{const{user:e,loading:t}=Xi(),r=an(),n=ln(),i=new URLSearchParams(r.search).get("tier")||dt.FREE,o=Uj(i),[l,c]=k.useState(null),[u,d]=k.useState(new gr),[h,f]=k.useState(o.initial),[y,v]=k.useState(o.initial),[m,x]=k.useState(!1),[g,p]=k.useState(null),[w,_]=k.useState(!1),[N,C]=k.useState(null),[R,T]=k.useState(null),[q,L]=k.useState({size:480}),ee=k.useRef(null),G=k.useRef(null),ct=k.useRef(u);k.useEffect(()=>{e&&!l&&(async()=>{if(i===dt.FREE)return;const{data:he,error:A}=await Y.from("games").insert([{user_id:e==null?void 0:e.id,tier:i,fen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",status:"active"}]).select().single();he&&c(he.id)})(),Vg().then(T)},[e,i,l]),k.useEffect(()=>{const me=()=>{if(ee.current){const{width:he,height:A}=ee.current.getBoundingClientRect();L({size:Math.min(he,A,600)})}};return me(),window.addEventListener("resize",me),()=>window.removeEventListener("resize",me)},[]),k.useEffect(()=>{ee.current&&!G.current&&(G.current=jj(ee.current,{fen:u.fen(),movable:{color:"white",free:!1,dests:new Map,events:{after:(me,he)=>cr(me,he)}},animation:{enabled:!0,duration:250}})),G.current&&G.current.set({fen:u.fen(),turnColor:u.turn()==="w"?"white":"black",movable:{color:m||w?void 0:"white",dests:_t(u)}}),ct.current=u},[u,m,w]);const _t=me=>{const he=new Map;return me.moves({verbose:!0}).forEach(A=>{he.has(A.from)||he.set(A.from,[]),he.get(A.from).push(A.to)}),he},cr=async(me,he)=>{var Bt;if(w||m)return;_(!0);const A={from:me,to:he,promotion:"q"},D=u.moves({verbose:!0});if(!D.some(re=>re.from===me&&re.to===he)){console.warn("Attempted illegal move",{movePayload:A,fen:u.fen(),legalMoves:D}),_(!1),(Bt=G.current)==null||Bt.set({fen:u.fen(),dests:_t(u)});return}const X=new gr(u.fen());if(!X.move(A)){console.warn("Chess.js rejected move",A),_(!1);return}if(d(X),i!==dt.FREE&&l)try{console.log("Submitting move to referee",{game_id:l,move:A,localFen:X.fen()});const{data:re,error:Qe}=await Y.functions.invoke("submit-move",{body:{game_id:l,move:A}});if(console.log("Referee response",{data:re,error:Qe}),Qe||re.error){console.error("Referee rejected move",Qe||re.error),d(new gr(ct.current.fen())),_(!1);return}const Wt=new gr(re.fen);d(Wt),re.isGameOver&&(x(!0),p(re.result))}catch(re){console.error("Referee Rejected Move (exception):",re.message||re),d(new gr(ct.current.fen())),_(!1);return}else try{const re=new gr(X.fen());let Qe=null;i===dt.FREE?Qe=$j(re):i===dt.STARTER?Qe=Lj(re):i===dt.WORLD&&(Qe=Mj(re)),Qe?setTimeout(()=>{re.move(Qe),d(re),_(!1)},350):setTimeout(()=>_(!1),200)}catch(re){console.error("Local AI failed",re),setTimeout(()=>_(!1),200)}_(!1)};return a.jsxs("div",{className:"container mx-auto h-[calc(100vh-80px)] p-4 flex flex-col md:flex-row gap-6 overflow-hidden",children:[a.jsxs("div",{className:"w-full md:w-80 space-y-4 shrink-0",children:[a.jsxs(oe,{className:"p-4 bg-card/80 border-primary/20",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>n("/"),children:[a.jsx(U1,{className:"w-4 h-4 mr-1"})," Quit"]}),a.jsx(Be,{variant:i===dt.WORLD?"gold":"secondary",className:"uppercase",children:i})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-3 bg-secondary/30 rounded-lg flex justify-between items-center border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-black border border-white/20"}),a.jsx("span",{className:"text-sm font-medium",children:"Referee Engine"})]}),a.jsx(qf,{secondsRemaining:y,isActive:u.turn()==="b",label:"B"})]}),a.jsxs("div",{className:"p-3 bg-secondary/30 rounded-lg flex justify-between items-center border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-white"}),a.jsx("span",{className:"text-sm font-medium",children:"You"})]}),a.jsx(qf,{secondsRemaining:h,isActive:u.turn()==="w",label:"W"})]})]}),w&&a.jsxs("div",{className:"mt-4 flex items-center gap-2 text-[10px] text-primary animate-pulse uppercase tracking-widest font-bold",children:[a.jsx(vt,{className:"w-3 h-3 animate-spin"})," Validating with Referee Node..."]})]}),R&&i!==dt.FREE&&a.jsxs(oe,{className:"p-4 bg-primary/5 border-primary/20",children:[a.jsx("p",{className:"text-[10px] uppercase text-muted-foreground mb-1 tracking-widest",children:"Current Jackpot"}),a.jsx("p",{className:"text-2xl font-black text-primary",children:en(i==="starter"?R.starter:R.world)})]}),a.jsxs("div",{className:"text-[10px] text-muted-foreground flex items-center gap-2 px-2",children:[a.jsx(pa,{className:"w-3 h-3 text-green-500"})," Server-side Move Verification Active"]})]}),a.jsxs("div",{className:"flex-1 flex justify-center items-center relative",children:[a.jsx("div",{ref:ee,className:"bg-[#B58863] shadow-2xl rounded border-4 border-muted",style:{width:q.size,height:q.size}}),m&&a.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:a.jsxs(oe,{className:"max-w-sm w-full p-8 text-center space-y-6",children:[g==="win"?a.jsx("div",{className:"mx-auto w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center text-primary animate-bounce",children:a.jsx(lr,{className:"w-8 h-8"})}):a.jsx("div",{className:"mx-auto w-16 h-16 bg-destructive/20 rounded-full flex items-center justify-center text-destructive",children:a.jsx(V1,{className:"w-8 h-8"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-black uppercase tracking-tight",children:g==="win"?"Winner!":"Game Over"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:g==="win"?"Your checkmate has been verified and recorded.":"Better luck next time."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-4",children:[a.jsx(H,{variant:"outline",onClick:()=>n("/"),children:"Home"}),a.jsxs(H,{onClick:()=>window.location.reload(),className:"gap-2",children:[a.jsx(Ig,{className:"w-4 h-4"})," Rematch"]})]})]})})]})]})},zj=()=>(k.useEffect(()=>{window.scrollTo(0,0)},[]),a.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-4xl space-y-12",children:[a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold tracking-tight",children:"Rules of Play"}),a.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Welcome to CheckMate Jackpot. Please review our rules to ensure fair, consistent, and transparent gameplay across all tiers."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:"1."})," Game Overview"]}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"All games are played against an AI using standard chess rules. To win a jackpot, a player must defeat the AI by checkmate or by causing the AI to run out of time. A draw is considered a loss for jackpot purposes."}),a.jsx("p",{className:"text-muted-foreground",children:"The platform offers three tiers, each with distinct time controls, difficulty levels, and mechanics."})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[a.jsxs(oe,{className:"border-muted bg-card/50",children:[a.jsx(ke,{children:a.jsxs(Se,{className:"flex items-center gap-2 text-lg",children:[a.jsx(Be,{variant:"outline",children:"Free"})," Practice Mode"]})}),a.jsxs(je,{className:"space-y-4 text-sm",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold mb-1 flex items-center gap-1",children:[a.jsx(Pl,{className:"w-3 h-3"})," Time Controls"]}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1",children:[a.jsx("li",{children:"Start: 40s"}),a.jsx("li",{children:"Inc: +2s"}),a.jsx("li",{children:"Max: 50s"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold mb-1",children:"Features"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1",children:[a.jsx("li",{children:"No account required"}),a.jsx("li",{children:"No payouts"}),a.jsx("li",{children:"Unlimited play"})]})]}),a.jsx("p",{className:"text-xs text-muted-foreground italic mt-2",children:"Moderate strength for training."})]})]}),a.jsxs(oe,{className:"border-primary/20 bg-primary/5",children:[a.jsx(ke,{children:a.jsxs(Se,{className:"flex items-center gap-2 text-lg",children:[a.jsx(Be,{variant:"secondary",children:"Starter"})," Tier 2"]})}),a.jsxs(je,{className:"space-y-4 text-sm",children:[a.jsx("div",{children:a.jsx("p",{className:"font-semibold mb-1 text-primary",children:"Entry: $1.00"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold mb-1 flex items-center gap-1",children:[a.jsx(Pl,{className:"w-3 h-3"})," Time Controls"]}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1",children:[a.jsx("li",{children:"Start: 30s"}),a.jsx("li",{children:"Inc: +2s"}),a.jsx("li",{children:"Max: 35s"})]})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold mb-1 flex items-center gap-1",children:[a.jsx(lr,{className:"w-3 h-3"})," Jackpot"]}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1",children:[a.jsx("li",{children:"Starts at $5"}),a.jsx("li",{children:"+$0.75 / game"}),a.jsx("li",{children:"Capped at $1,000"}),a.jsx("li",{children:"1 Win / Month"})]})]})]})]}),a.jsxs(oe,{className:"border-primary bg-gradient-to-b from-primary/10 to-transparent",children:[a.jsx(ke,{children:a.jsxs(Se,{className:"flex items-center gap-2 text-lg",children:[a.jsx(Be,{variant:"gold",children:"World"})," Tier 3"]})}),a.jsxs(je,{className:"space-y-4 text-sm",children:[a.jsx("div",{children:a.jsx("p",{className:"font-semibold mb-1 text-primary",children:"Entry: $2.00"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold mb-1 flex items-center gap-1",children:[a.jsx(Pl,{className:"w-3 h-3"})," Time Controls"]}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1",children:[a.jsx("li",{children:"Start: 25s"}),a.jsx("li",{children:"Inc: +1s"}),a.jsx("li",{children:"Max: 25s"})]})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold mb-1 flex items-center gap-1",children:[a.jsx(lr,{className:"w-3 h-3"})," Jackpot"]}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1",children:[a.jsx("li",{children:"Starts at $5"}),a.jsx("li",{children:"+$1.00 / game"}),a.jsx("li",{children:"Uncapped"}),a.jsx("li",{children:"Unlimited Wins"})]})]})]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:"5."})," Jackpot Awarding & Priority"]}),a.jsxs("div",{className:"bg-secondary/20 p-6 rounded-lg border border-border",children:[a.jsx("p",{className:"text-muted-foreground mb-4",children:"If multiple games are active when a jackpot is won:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground",children:[a.jsxs("li",{children:["The jackpot is awarded to the ",a.jsx("strong",{className:"text-foreground",children:"earliest-started winning game"}),"."]}),a.jsx("li",{children:"Later games display Pending Jackpot Verification."}),a.jsx("li",{children:"After awarding, Tier 2 resets to $5, while Tier 3 continues growing if applicable."})]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:"6."})," Player Eligibility"]}),a.jsxs("ul",{className:"grid sm:grid-cols-2 gap-4",children:[a.jsxs("li",{className:"flex items-start gap-3 p-3 rounded bg-card border border-muted",children:[a.jsx(vi,{className:"w-5 h-5 text-yellow-500 shrink-0 mt-0.5"}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.jsx("strong",{children:"Tier 2:"})," Players may win once per calendar month."]})]}),a.jsxs("li",{className:"flex items-start gap-3 p-3 rounded bg-card border border-muted",children:[a.jsx(pa,{className:"w-5 h-5 text-green-500 shrink-0 mt-0.5"}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.jsx("strong",{children:"Tier 3:"})," No win limit (subject to review)."]})]}),a.jsxs("li",{className:"flex items-start gap-3 p-3 rounded bg-card border border-muted",children:[a.jsx(vi,{className:"w-5 h-5 text-muted-foreground shrink-0 mt-0.5"}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.jsx("strong",{children:"Verification:"})," Users must complete identity verification to claim jackpots."]})]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:"7."})," Identity Verification & Tax Reporting"]}),a.jsx("p",{className:"text-muted-foreground",children:"All jackpot payouts require identity verification for fraud prevention and legal compliance."}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mt-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold mb-2 text-foreground",children:"U.S. Players"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 text-sm",children:[a.jsx("li",{children:"May require legal name, address, government ID, and SSN."}),a.jsxs("li",{children:["Winnings totaling ",a.jsx("strong",{children:"$600+ in a calendar year"})," are reported to the IRS via Form 1099-MISC."]}),a.jsx("li",{children:"Failure to verify results in forfeiture."})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold mb-2 text-foreground",children:"International Players"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 text-sm",children:[a.jsx("li",{children:"Must provide passport or national ID."}),a.jsx("li",{children:"Responsible for complying with local tax laws."}),a.jsx("li",{children:"Platform does not file international tax forms."})]})]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:"8."})," Jurisdiction & Country Restrictions"]}),a.jsx("p",{className:"text-muted-foreground",children:"Users are responsible for ensuring participation is legal in their region. The platform may restrict or deny payouts where local law or payment systems do not support participation. If a payout cannot be legally delivered, the win may be void."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:"9."})," Anti-Cheat Policy"]}),a.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 p-6 rounded-lg",children:[a.jsxs("p",{className:"font-medium text-destructive mb-3 flex items-center gap-2",children:[a.jsx(vi,{className:"w-5 h-5"})," Use of external chess engines is strictly prohibited."]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Cheating indicators include engine-like accuracy, unnatural timing patterns, performance spikes, and matching top engine lines."}),a.jsx("p",{className:"text-sm text-muted-foreground font-semibold",children:"If cheating is suspected:"}),a.jsxs("ul",{className:"list-disc list-inside text-sm text-muted-foreground mt-2",children:[a.jsx("li",{children:"Payouts may be paused."}),a.jsx("li",{children:"Games may be reviewed."}),a.jsx("li",{children:"Accounts may be restricted or banned."})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-4 uppercase tracking-wider",children:"All review decisions are final."})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:"10."})," Game Recording & AI"]}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1",children:[a.jsx("li",{children:"All games, moves, and timestamps are recorded."}),a.jsx("li",{children:"AI may analyze verified losses to improve training."}),a.jsx("li",{children:"Only verified, non-cheating wins influence AI logic."})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:"11."})," Credits & Payments"]}),a.jsxs("div",{className:"flex items-start gap-4 p-4 border border-border rounded-lg",children:[a.jsx(W1,{className:"w-6 h-6 text-primary mt-1"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1",children:[a.jsx("li",{children:"Minimum purchase: $10 credit pack."}),a.jsx("li",{children:"Tier 2 entry: 1 credit ($1)."}),a.jsx("li",{children:"Tier 3 entry: 2 credits ($2)."}),a.jsx("li",{children:"Credits are non-refundable."}),a.jsx("li",{children:"Fees apply at credit purchase, not per game."})]})]})]}),a.jsxs("section",{className:"space-y-4 pb-12",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:"12."})," General Conditions"]}),a.jsx("p",{className:"text-muted-foreground",children:"The platform may adjust AI difficulty or game parameters to maintain fairness. Rule updates apply only to future games. By playing, you agree to these rules and to the Terms of Service."})]})]})),Fj=()=>(k.useEffect(()=>{window.scrollTo(0,0)},[]),a.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-4xl space-y-12",children:[a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold tracking-tight",children:"Terms of Service"}),a.jsx("p",{className:"text-muted-foreground",children:"Effective Date: [Insert Date]"}),a.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto leading-relaxed",children:"These Terms of Service (Terms) constitute a binding legal agreement between you (User, Player, You) and Checkmate Jackpot LLC (Company, We, Us, Our). By accessing or using the Checkmate Jackpot platform (Platform), you acknowledge that you have read, understood, and agree to be bound by these Terms."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:"1."})," Eligibility"]}),a.jsxs("div",{className:"space-y-3 text-muted-foreground",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"1.1 Age Requirement:"})," Users must be at least 18 years old or the age of legal majority in their jurisdiction, whichever is greater."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"1.2 Legal Jurisdiction:"})," Users may only participate from regions where skill-based competitions with monetary payouts are lawful."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"1.3 Restricted Countries:"})," The Platform does not permit participation from the following regions: Cuba, Iran, North Korea, Syria, Russia, Belarus, Crimea, Donetsk, Luhansk, Myanmar, Sudan, South Sudan, Nigeria, Ghana, Pakistan, Bangladesh, Kenya, Uganda, and any other jurisdiction where prize competitions are prohibited."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:"2."})," Account Registration"]}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Accuracy:"})," You must provide accurate, complete information. False info may result in termination."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"One Account Limit:"})," Each individual may operate only one account."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Security:"})," You are responsible for maintaining the confidentiality of your credentials."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:"3."})," Gameplay & Tiers"]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[a.jsxs(oe,{className:"bg-card/50",children:[a.jsx(ke,{className:"pb-2",children:a.jsx(Se,{className:"text-base",children:"Free Tier"})}),a.jsxs(je,{className:"text-sm text-muted-foreground space-y-1",children:[a.jsx("p",{children:" No sign-up required"}),a.jsx("p",{children:" No payouts"}),a.jsx("p",{children:" Contains ads"}),a.jsx("p",{children:" 40s start, +2s inc, max 50s"})]})]}),a.jsxs(oe,{className:"bg-primary/5 border-primary/20",children:[a.jsx(ke,{className:"pb-2",children:a.jsx(Se,{className:"text-base text-primary",children:"Starter (Tier 2)"})}),a.jsxs(je,{className:"text-sm text-muted-foreground space-y-1",children:[a.jsx("p",{children:" $1 entry"}),a.jsx("p",{children:" Capped at $1,000"}),a.jsx("p",{children:" 1 win per month limit"}),a.jsx("p",{children:" 30s start, +2s inc, max 35s"})]})]}),a.jsxs(oe,{className:"bg-gradient-to-br from-background to-secondary/30 border-primary/30",children:[a.jsx(ke,{className:"pb-2",children:a.jsx(Se,{className:"text-base text-primary",children:"World (Tier 3)"})}),a.jsxs(je,{className:"text-sm text-muted-foreground space-y-1",children:[a.jsx("p",{children:" $2 entry"}),a.jsx("p",{children:" Uncapped Jackpot"}),a.jsx("p",{children:" Unlimited wins"}),a.jsx("p",{children:" 25s start, +1s inc, max 25s"})]})]})]}),a.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Note: A draw counts as a loss for jackpot purposes."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:"4."})," Jackpot Awarding"]}),a.jsxs("p",{className:"text-muted-foreground",children:["If multiple games finish in close proximity, the jackpot is awarded to the ",a.jsx("strong",{children:"earliest-started winning game"}),". Later games will display Pending Jackpot Verification. After awarding, Tier 2 resets to $5, and Tier 3 continues growing if applicable."]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:"5."})," Verification (KYC)"]}),a.jsx("p",{className:"text-muted-foreground text-sm",children:"To claim any payout, users must complete identity verification. This includes providing government-issued ID, legal name, address, and SSN (for U.S. players). Failure to verify results in forfeiture."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:"6."})," Tax Reporting"]}),a.jsxs("div",{className:"text-muted-foreground text-sm space-y-2",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"U.S. Players:"})," Winnings of $600+ are reported to the IRS via Form 1099-MISC."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Intl. Players:"})," Responsible for reporting winnings to local tax authorities."]})]})]})]}),a.jsxs("section",{className:"space-y-6",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:"7."})," Payout Structure"]}),a.jsxs(oe,{className:"border-border bg-card",children:[a.jsx(ke,{children:a.jsxs(Se,{className:"flex items-center gap-2 text-lg",children:[a.jsx(Rg,{className:"w-5 h-5 text-green-500"})," Payment Tiers"]})}),a.jsxs(je,{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Prizes under $5,000 are eligible for instant payout. Larger prizes follow the schedule below."}),a.jsxs("div",{className:"grid gap-3 text-sm",children:[a.jsxs("div",{className:"p-3 rounded bg-secondary/30 flex flex-col sm:flex-row justify-between sm:items-center gap-2",children:[a.jsx("span",{className:"font-bold",children:"Under $5,000"}),a.jsx("span",{className:"text-muted-foreground font-semibold text-primary",children:"Instant Payout (Subject to Review)"})]}),a.jsxs("div",{className:"p-3 rounded bg-secondary/30 flex flex-col sm:flex-row justify-between sm:items-center gap-2",children:[a.jsx("span",{className:"font-bold",children:"$5,000  $20,000"}),a.jsx("span",{className:"text-muted-foreground text-right",children:"Full lump-sum within 15 days"})]}),a.jsxs("div",{className:"p-3 rounded bg-secondary/30 flex flex-col sm:flex-row justify-between sm:items-center gap-2",children:[a.jsx("span",{className:"font-bold",children:"$20,000  $50,000"}),a.jsx("span",{className:"text-muted-foreground text-right",children:"4 Quarterly payments (1 yr) OR 65% lump-sum"})]}),a.jsxs("div",{className:"p-3 rounded bg-secondary/30 flex flex-col sm:flex-row justify-between sm:items-center gap-2",children:[a.jsx("span",{className:"font-bold",children:"$50,000  $100,000"}),a.jsx("span",{className:"text-muted-foreground text-right",children:"8 Quarterly payments (2 yrs) OR 65% lump-sum"})]}),a.jsxs("div",{className:"p-3 rounded bg-secondary/30 flex flex-col sm:flex-row justify-between sm:items-center gap-2",children:[a.jsx("span",{className:"font-bold",children:"$100,000  $1M"}),a.jsx("span",{className:"text-muted-foreground text-right",children:"5 Annual payments OR 65% lump-sum"})]}),a.jsxs("div",{className:"p-3 rounded bg-secondary/30 flex flex-col sm:flex-row justify-between sm:items-center gap-2",children:[a.jsx("span",{className:"font-bold",children:"$1M  $10M"}),a.jsx("span",{className:"text-muted-foreground text-right",children:"10 Annual payments OR 60% lump-sum"})]}),a.jsxs("div",{className:"p-3 rounded bg-secondary/30 flex flex-col sm:flex-row justify-between sm:items-center gap-2",children:[a.jsx("span",{className:"font-bold",children:"$10M  $50M"}),a.jsx("span",{className:"text-muted-foreground text-right",children:"20 Annual payments OR 55% lump-sum"})]}),a.jsxs("div",{className:"p-3 rounded bg-secondary/30 flex flex-col sm:flex-row justify-between sm:items-center gap-2",children:[a.jsx("span",{className:"font-bold",children:"$50M+"}),a.jsx("span",{className:"text-muted-foreground text-right",children:"30 Annual payments OR 50% lump-sum"})]})]})]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:"8."})," Fraud & Anti-Cheat Policy"]}),a.jsxs("div",{className:"p-4 border border-destructive/20 bg-destructive/5 rounded-lg",children:[a.jsxs("h3",{className:"font-bold text-destructive mb-2 flex items-center gap-2",children:[a.jsx(Lg,{className:"w-5 h-5"})," Strict Prohibition"]}),a.jsx("p",{className:"text-muted-foreground text-sm mb-3",children:"Engine assistance or external help is strictly prohibited. Indicators include engine-like accuracy, abnormal timing, performance spikes, or matching top lines."}),a.jsx("p",{className:"text-sm font-semibold text-destructive",children:"Violations result in: Winnings withheld, account suspension, or permanent bans."})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:"9."})," Credits & Payments"]}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground text-sm space-y-1",children:[a.jsx("li",{children:"Minimum credit purchase: $10."}),a.jsx("li",{children:"Credits are non-refundable."}),a.jsx("li",{children:"Tier 2 entry: 1 credit. Tier 3 entry: 2 credits."}),a.jsx("li",{children:"Chargebacks or disputed transactions may result in account termination."})]})]}),a.jsxs("section",{className:"space-y-8 border-t border-border pt-8",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold mb-2",children:"10. International Restrictions"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Users are responsible for complying with laws in their region. We may restrict access if participation is illegal or payment cannot be delivered."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold mb-2",children:"11. Intellectual Property"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"All Platform content, branding, and software are owned by the Company. No copying or reverse engineering allowed."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold mb-2",children:"12. Account Termination"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"We may suspend or terminate any account for cheating, fraud, chargebacks, abuse, or violations of these Terms."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold mb-2",children:"13. Disclaimers"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"The Platform is provided AS IS. We do not guarantee uninterrupted access, AI behavior, jackpot size, or any particular outcome."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold mb-2",children:"14. Limitation of Liability"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Maximum liability shall not exceed the entry fee for the game in question. We are not liable for lost winnings, technical malfunctions, or indirect damages."})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:"15."})," Arbitration & Governing Law"]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-secondary/20 rounded-lg",children:[a.jsx(H1,{className:"w-6 h-6 text-foreground mt-1"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["These Terms are governed by the laws of the State of Delaware. All disputes will be resolved through ",a.jsx("strong",{children:"binding arbitration"})," in Delaware. Users waive the right to participate in class-action lawsuits."]})]})]}),a.jsxs("section",{className:"space-y-4 pb-12",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:"16."})," Changes to Terms"]}),a.jsx("p",{className:"text-muted-foreground",children:"We may update these Terms at any time. Continued use of the Platform constitutes acceptance of the updated Terms."})]})]})),Bj=()=>{const e=ln(),[t,r]=k.useState(!1),[n,s]=k.useState(!1),[i,o]=k.useState(""),[l,c]=k.useState(""),[u,d]=k.useState(""),[h,f]=k.useState(""),[y,v]=k.useState(""),[m,x]=k.useState(null),g=async p=>{p.preventDefault(),r(!0),x(null);try{if(n){const{error:w}=await Y.auth.signUp({email:i,password:l,options:{data:{username:u,first_name:h,last_name:y}}});if(w)throw w}else{const{error:w}=await Y.auth.signInWithPassword({email:i,password:l});if(w)throw w}e("/dashboard")}catch(w){x(w.message)}finally{r(!1)}};return a.jsx("div",{className:"min-h-[calc(100vh-140px)] flex items-center justify-center p-4",children:a.jsxs(oe,{className:"w-full max-w-md border-primary/20 bg-card/80 backdrop-blur",children:[a.jsxs(ke,{className:"text-center space-y-2",children:[a.jsx("div",{className:"mx-auto bg-primary/10 w-12 h-12 rounded-full flex items-center justify-center text-primary mb-2",children:a.jsx(Wi,{className:"w-6 h-6"})}),a.jsx(Se,{className:"text-2xl font-bold",children:n?"Create Account":"Welcome Back"}),a.jsx(Rs,{children:n?"Join the challenge and win jackpots.":"Sign in to access your dashboard."})]}),a.jsx(je,{children:a.jsxs("form",{onSubmit:g,className:"space-y-4",children:[m&&a.jsx("div",{className:"p-3 bg-destructive/10 border border-destructive/20 rounded text-sm text-destructive",children:m}),n&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("div",{className:"space-y-2",children:a.jsxs("div",{className:"relative",children:[a.jsx(Nn,{className:"absolute left-3 top-2.5 h-5 w-5 text-muted-foreground"}),a.jsx("input",{type:"text",placeholder:"First Name",value:h,onChange:p=>f(p.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 pl-10 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0})]})}),a.jsx("div",{className:"space-y-2",children:a.jsxs("div",{className:"relative",children:[a.jsx(Nn,{className:"absolute left-3 top-2.5 h-5 w-5 text-muted-foreground"}),a.jsx("input",{type:"text",placeholder:"Last Name",value:y,onChange:p=>v(p.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 pl-10 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0})]})})]}),a.jsx("div",{className:"space-y-2",children:a.jsxs("div",{className:"relative",children:[a.jsx(Nn,{className:"absolute left-3 top-2.5 h-5 w-5 text-muted-foreground"}),a.jsx("input",{type:"text",placeholder:"Username",value:u,onChange:p=>d(p.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 pl-10 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0})]})})]}),a.jsx("div",{className:"space-y-2",children:a.jsxs("div",{className:"relative",children:[a.jsx(Y1,{className:"absolute left-3 top-2.5 h-5 w-5 text-muted-foreground"}),a.jsx("input",{type:"email",placeholder:"Email",value:i,onChange:p=>o(p.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 pl-10 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0})]})}),a.jsx("div",{className:"space-y-2",children:a.jsxs("div",{className:"relative",children:[a.jsx(J1,{className:"absolute left-3 top-2.5 h-5 w-5 text-muted-foreground"}),a.jsx("input",{type:"password",placeholder:"Password",value:l,onChange:p=>c(p.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 pl-10 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0})]})}),a.jsx(H,{type:"submit",className:"w-full",disabled:t,children:t?a.jsx(vt,{className:"w-4 h-4 animate-spin"}):n?"Create Account":"Sign In"}),a.jsxs("div",{className:"text-center text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:n?"Already have an account? ":"Don't have an account? "}),a.jsx("button",{type:"button",onClick:()=>s(!n),className:"text-primary hover:underline font-medium",children:n?"Sign In":"Sign Up"})]})]})})]})})},Wj=()=>{const e=an(),{user:t,signOut:r}=Xi(),n=s=>e.pathname===s;return a.jsxs("div",{className:"w-64 h-screen bg-card border-r border-border flex flex-col sticky top-0",children:[a.jsx("div",{className:"p-6 border-b border-border",children:a.jsxs(st,{to:"/admin",className:"flex items-center gap-2 font-bold text-xl tracking-tight",children:[a.jsx(Wi,{className:"w-6 h-6 text-primary"}),a.jsxs("span",{children:["Admin",a.jsx("span",{className:"text-primary",children:"Panel"})]})]})}),a.jsxs("div",{className:"flex-1 py-6 px-3 space-y-1",children:[a.jsx(st,{to:"/admin/dashboard",children:a.jsxs(H,{variant:n("/admin/dashboard")?"secondary":"ghost",className:"w-full justify-start gap-3",children:[a.jsx(G1,{className:"w-4 h-4"})," Dashboard"]})}),a.jsx(st,{to:"/admin/winners",children:a.jsxs(H,{variant:n("/admin/winners")?"secondary":"ghost",className:"w-full justify-start gap-3",children:[a.jsx(lr,{className:"w-4 h-4"})," Winners"]})}),a.jsx(st,{to:"/admin/users",children:a.jsxs(H,{variant:n("/admin/users")?"secondary":"ghost",className:"w-full justify-start gap-3",children:[a.jsx(Ug,{className:"w-4 h-4"})," Users"]})}),a.jsx(st,{to:"/admin/audit",children:a.jsxs(H,{variant:n("/admin/audit")?"secondary":"ghost",className:"w-full justify-start gap-3",children:[a.jsx(B1,{className:"w-4 h-4"})," Audit Logs"]})}),a.jsx(st,{to:"/admin/settings",children:a.jsxs(H,{variant:n("/admin/settings")?"secondary":"ghost",className:"w-full justify-start gap-3",children:[a.jsx(tk,{className:"w-4 h-4"})," Platform Settings"]})})]}),a.jsxs("div",{className:"p-4 border-t border-border",children:[t&&a.jsxs("div",{className:"mb-4 px-2 flex items-center gap-3 text-sm text-muted-foreground overflow-hidden",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center text-primary shrink-0",children:a.jsx(Nn,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex flex-col min-w-0",children:[a.jsx("span",{className:"font-medium text-foreground truncate block",children:t.email}),a.jsx("span",{className:"text-[10px] uppercase tracking-wider text-primary font-bold",children:"Administrator"})]})]}),a.jsxs(H,{variant:"outline",className:"w-full gap-2 text-destructive hover:text-destructive",onClick:r,children:[a.jsx(Q1,{className:"w-4 h-4"})," Sign Out"]})]})]})},qj=({children:e})=>{const{user:t,loading:r}=Xi(),n=ln(),[s,i]=yt.useState(!1),[o,l]=yt.useState(!0);return k.useEffect(()=>{if(!r){if(!t){n("/auth");return}(async()=>{const{data:u}=await Y.from("profiles").select("role").eq("id",t.id).single();(u==null?void 0:u.role)!=="admin"?n("/dashboard"):i(!0),l(!1)})()}},[t,r,n]),r||o?a.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-background text-primary animate-pulse",children:"Verifying Admin Access..."}):s?a.jsxs("div",{className:"flex min-h-screen bg-background text-foreground",children:[a.jsx(Wj,{}),a.jsx("main",{className:"flex-1 overflow-y-auto max-h-screen",children:a.jsx("div",{className:"p-8",children:e})})]}):null},Wa=k.forwardRef(({className:e,...t},r)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:r,className:Te("w-full caption-bottom text-sm",e),...t})}));Wa.displayName="Table";const qa=k.forwardRef(({className:e,...t},r)=>a.jsx("thead",{ref:r,className:Te("[&_tr]:border-b",e),...t}));qa.displayName="TableHeader";const Ka=k.forwardRef(({className:e,...t},r)=>a.jsx("tbody",{ref:r,className:Te("[&_tr:last-child]:border-0",e),...t}));Ka.displayName="TableBody";const Kj=k.forwardRef(({className:e,...t},r)=>a.jsx("tfoot",{ref:r,className:Te("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Kj.displayName="TableFooter";const Ct=k.forwardRef(({className:e,...t},r)=>a.jsx("tr",{ref:r,className:Te("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Ct.displayName="TableRow";const Le=k.forwardRef(({className:e,...t},r)=>a.jsx("th",{ref:r,className:Te("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Le.displayName="TableHead";const ue=k.forwardRef(({className:e,...t},r)=>a.jsx("td",{ref:r,className:Te("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));ue.displayName="TableCell";const Vj=k.forwardRef(({className:e,...t},r)=>a.jsx("caption",{ref:r,className:Te("mt-4 text-sm text-muted-foreground",e),...t}));Vj.displayName="TableCaption";const Sv=({children:e,open:t,onOpenChange:r})=>t?a.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",children:a.jsx("div",{className:"fixed inset-0 z-50 flex",onClick:n=>{n.target===n.currentTarget&&r&&r(!1)},children:e})}):null,_d=k.forwardRef(({className:e,children:t,...r},n)=>a.jsx("div",{ref:n,className:Te("ml-auto h-full w-full max-w-lg border-l bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-xl overflow-y-auto",e),...r,children:t}));_d.displayName="SheetContent";const bd=({className:e,...t})=>a.jsx("div",{className:Te("flex flex-col space-y-2 text-center sm:text-left mb-6",e),...t});bd.displayName="SheetHeader";const kd=k.forwardRef(({className:e,...t},r)=>a.jsx("h2",{ref:r,className:Te("text-lg font-semibold text-foreground",e),...t}));kd.displayName="SheetTitle";const Sd=k.forwardRef(({className:e,...t},r)=>a.jsx("p",{ref:r,className:Te("text-sm text-muted-foreground",e),...t}));Sd.displayName="SheetDescription";const Hj=(e,t,r)=>{const n=[],s=new Date,i=(l,c)=>{const u=new Date(l);return u.setMonth(u.getMonth()+c),u.toISOString()},o=(l,c)=>{const u=new Date(l);return u.setFullYear(u.getFullYear()+c),u.toISOString()};if(t<2e4)return[{winner_id:e,due_date:new Date(s.setDate(s.getDate()+15)).toISOString(),amount:t,status:"pending",installment_number:1,total_installments:1}];if(t<5e4){if(r==="lump_sum")return[{winner_id:e,due_date:i(s,1),amount:t,status:"pending",installment_number:1,total_installments:1}];{const l=t/4;for(let c=1;c<=4;c++)n.push({winner_id:e,due_date:i(s,c*3),amount:l,status:"pending",installment_number:c,total_installments:4});return n}}if(t<1e5){if(r==="lump_sum")return Xs(e,t);const l=t/8;for(let c=1;c<=8;c++)n.push({winner_id:e,due_date:i(s,c*3),amount:l,status:"pending",installment_number:c,total_installments:8});return n}if(t<1e6){if(r==="lump_sum")return Xs(e,t);const l=t/5;for(let c=1;c<=5;c++)n.push({winner_id:e,due_date:o(s,c),amount:l,status:"pending",installment_number:c,total_installments:5});return n}return t<1e7?r==="lump_sum"?Xs(e,t):Wl(e,t,10):t<5e7?r==="lump_sum"?Xs(e,t):Wl(e,t,20):r==="lump_sum"?Xs(e,t):Wl(e,t,30)},Xs=(e,t)=>[{winner_id:e,due_date:new Date().toISOString(),amount:t,status:"pending",installment_number:1,total_installments:1}],Wl=(e,t,r)=>{const n=[],s=t/r,i=new Date;for(let o=1;o<=r;o++){const l=new Date(i);l.setFullYear(l.getFullYear()+o),n.push({winner_id:e,due_date:l.toISOString(),amount:s,status:"pending",installment_number:o,total_installments:r})}return n},Gj=e=>e<2e4?1:e<1e5||e<1e6?.65:e<1e7?.6:e<5e7?.55:.5,Jj=({winner:e,open:t,onOpenChange:r,onUpdate:n})=>{var h,f,y;const[s,i]=k.useState(!1),[o,l]=k.useState([]);if(yt.useEffect(()=>{e&&t&&Y.from("payout_schedules").select("*").eq("winner_id",e.id).order("due_date",{ascending:!0}).then(({data:v})=>{v&&v.length>0?l(v):l([])})},[e,t]),!e)return null;const c=async()=>{i(!0);try{let v=e.amount;e.payout_type==="lump_sum"&&e.amount>=2e4&&(v=e.amount*Gj(e.amount));const m=Hj(e.id,v,e.payout_type),{error:x}=await Y.from("payout_schedules").insert(m);if(x)throw x;await Y.from("winners").update({status:"scheduled"}).eq("id",e.id),n(),r(!1)}catch(v){alert("Error: "+v.message)}finally{i(!1)}},u=async v=>{i(!0),await Y.from("winners").update({status:v}).eq("id",e.id),n(),i(!1),r(!1)},d=async(v,m)=>{await Y.from("payout_schedules").update({status:m}).eq("id",v);const{data:x}=await Y.from("payout_schedules").select("*").eq("winner_id",e.id).order("due_date",{ascending:!0});x&&l(x)};return a.jsx(Sv,{open:t,onOpenChange:r,children:a.jsxs(_d,{className:"w-[400px] sm:w-[540px]",children:[a.jsx(bd,{children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx(kd,{children:"Winner Details"}),a.jsxs(Sd,{children:["Case ID: ",e.id.slice(0,8)]})]}),a.jsx(Be,{variant:e.tier==="world"?"gold":"secondary",children:(h=e.tier)==null?void 0:h.toUpperCase()})]})}),a.jsxs("div",{className:"space-y-6 py-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs text-muted-foreground uppercase font-bold",children:"User"}),a.jsx("p",{className:"font-medium text-sm",children:e.email||"Unknown Email"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:e.user_id})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs text-muted-foreground uppercase font-bold",children:"Win Amount"}),a.jsx("p",{className:"font-bold text-xl text-primary",children:en(e.amount)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs text-muted-foreground uppercase font-bold",children:"Current Status"}),a.jsx(Be,{variant:e.status==="paid"?"default":e.status==="flagged"?"destructive":"outline",children:(f=e.status)==null?void 0:f.replace("_"," ").toUpperCase()})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs text-muted-foreground uppercase font-bold",children:"Payout Preference"}),a.jsx("p",{className:"text-sm capitalize",children:(y=e.payout_type)==null?void 0:y.replace("_"," ")})]})]}),a.jsxs(oe,{className:"p-4 bg-secondary/10 border-muted",children:[a.jsxs("h3",{className:"font-bold mb-3 flex items-center gap-2",children:[a.jsx(Lg,{className:"w-4 h-4"})," KYC & Verification"]}),e.kyc_status==="pending"?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm text-yellow-500",children:"Verification Pending"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(H,{size:"sm",variant:"outline",className:"border-green-500 text-green-500 hover:bg-green-500/10",onClick:()=>u("verified"),children:"Approve KYC"}),a.jsx(H,{size:"sm",variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-500/10",onClick:()=>u("kyc_required"),children:"Reject / Request Info"})]})]}):a.jsxs("div",{className:"flex items-center gap-2 text-green-500 font-medium",children:[a.jsx(F1,{className:"w-4 h-4"})," Identity Verified"]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-bold mb-3 flex items-center gap-2",children:[a.jsx(z1,{className:"w-4 h-4"})," Payout Schedule"]}),o.length===0?a.jsxs("div",{className:"text-center p-6 border border-dashed rounded-lg bg-muted/20",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"No schedule generated yet."}),e.amount>=0&&a.jsxs(H,{onClick:c,disabled:s,variant:"secondary",children:[s&&a.jsx(vt,{className:"w-4 h-4 animate-spin mr-2"}),"Generate ",e.payout_type==="annuity"?"Annuity":"Lump Sum"," Schedule"]})]}):a.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:o.map(v=>a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded bg-card text-sm",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium",children:["Installment ",v.installment_number,"/",v.total_installments]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Due: ",new Date(v.due_date).toLocaleDateString()]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"font-bold mb-1",children:en(v.amount)}),v.status==="pending"?a.jsx(H,{size:"sm",variant:"outline",className:"h-6 text-xs",onClick:()=>v.id&&d(v.id,"paid"),children:"Mark Paid"}):a.jsx(Be,{variant:"outline",className:"text-green-500 border-green-500",children:"PAID"})]})]},v.id))})]}),a.jsx("div",{className:"pt-4 border-t flex justify-between",children:a.jsxs(H,{variant:"outline",className:"text-red-500 border-red-500/50 hover:bg-red-900/10",onClick:()=>u("flagged"),children:[a.jsx(vi,{className:"w-4 h-4 mr-2"})," Flag for Review"]})})]})]})})},Qj=()=>{const[e,t]=k.useState([]),[r,n]=k.useState(!0),[s,i]=k.useState(null),[o,l]=k.useState(""),[c,u]=k.useState(null),[d,h]=k.useState(!1),f=async()=>{n(!0),i(null);try{const{data:m,error:x}=await Y.from("winners").select("*").order("created_at",{ascending:!1});if(x)throw x;if(!m||m.length===0){t([]),n(!1);return}const g=Array.from(new Set(m.map(_=>_.user_id).filter(Boolean)));let p=new Map;if(g.length>0){const{data:_}=await Y.from("profiles").select("id, email, username").in("id",g);_&&_.forEach(N=>p.set(N.id,N))}const w=m.map(_=>{const N=p.get(_.user_id);return{..._,email:(N==null?void 0:N.email)||"Unknown",username:(N==null?void 0:N.username)||"Unknown User"}});t(w)}catch(m){console.error("Error fetching winners:",m.message||m),i(m.message||"Failed to load winners.")}finally{n(!1)}};k.useEffect(()=>{f()},[]);const y=m=>{u(m),h(!0)},v=e.filter(m=>m.id.includes(o)||m.email&&m.email.toLowerCase().includes(o.toLowerCase())||m.tier&&m.tier.toLowerCase().includes(o.toLowerCase()));return s?a.jsxs("div",{className:"space-y-6",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Winners Management"}),a.jsxs("div",{className:"p-8 text-center border border-destructive/20 bg-destructive/5 rounded-lg max-w-2xl mx-auto",children:[a.jsx(Ps,{className:"w-8 h-8 text-destructive mx-auto mb-2"}),a.jsx("h3",{className:"font-bold text-destructive",children:"Error Loading Winners"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:s}),a.jsx(H,{onClick:f,variant:"outline",children:"Retry"})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Winners Management"}),a.jsx("p",{className:"text-muted-foreground",children:"Verify identities, approve payouts, and track schedules."})]}),a.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[a.jsxs("div",{className:"relative flex-1 sm:w-64",children:[a.jsx($g,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx(In,{placeholder:"Search ID, Email...",className:"pl-9",value:o,onChange:m=>l(m.target.value)})]}),a.jsxs(H,{variant:"outline",children:[a.jsx(Ag,{className:"w-4 h-4 mr-2"})," Filter"]})]})]}),a.jsx("div",{className:"border rounded-lg bg-card shadow-sm overflow-hidden",children:a.jsxs(Wa,{children:[a.jsx(qa,{children:a.jsxs(Ct,{children:[a.jsx(Le,{children:"Winner Info"}),a.jsx(Le,{children:"Tier"}),a.jsx(Le,{children:"Amount"}),a.jsx(Le,{children:"Payout Type"}),a.jsx(Le,{children:"Status"}),a.jsx(Le,{children:"Date"}),a.jsx(Le,{className:"text-right",children:"Action"})]})}),a.jsx(Ka,{children:r?a.jsx(Ct,{children:a.jsx(ue,{colSpan:7,className:"h-24 text-center",children:a.jsx(vt,{className:"w-6 h-6 animate-spin mx-auto text-primary"})})}):v.length===0?a.jsx(Ct,{children:a.jsx(ue,{colSpan:7,className:"h-24 text-center text-muted-foreground",children:"No winners found."})}):v.map(m=>{var x,g;return a.jsxs(Ct,{children:[a.jsxs(ue,{children:[a.jsx("div",{className:"font-medium",children:m.username||"Unknown"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:m.email})]}),a.jsx(ue,{children:a.jsx(Be,{variant:m.tier===dt.WORLD?"gold":"secondary",children:m.tier})}),a.jsx(ue,{className:"font-bold text-primary",children:en(m.amount)}),a.jsx(ue,{className:"capitalize text-sm",children:(x=m.payout_type)==null?void 0:x.replace("_"," ")}),a.jsx(ue,{children:a.jsx(Be,{variant:m.status==="paid"?"default":m.status==="flagged"?"destructive":m.status==="scheduled"?"outline":"secondary",children:(g=m.status)==null?void 0:g.replace("_"," ")})}),a.jsx(ue,{className:"text-muted-foreground text-xs",children:new Date(m.created_at).toLocaleDateString()}),a.jsx(ue,{className:"text-right",children:a.jsx(H,{size:"sm",variant:"ghost",onClick:()=>y(m),children:a.jsx(K1,{className:"w-4 h-4 text-primary"})})})]},m.id)})})]})}),a.jsx(Jj,{winner:c,open:d,onOpenChange:h,onUpdate:f})]})},Yj=()=>{const[e,t]=k.useState({totalWinners:0,pendingKYC:0,totalPayouts:0,flagged:0}),[r,n]=k.useState([]),[s,i]=k.useState(!0),[o,l]=k.useState(null);if(k.useEffect(()=>{(async()=>{try{i(!0),l(null);const{data:u,error:d}=await Y.from("winners").select("*");if(d)throw d;if(u){const h=u.length,f=u.filter(x=>x.kyc_status==="pending").length,y=u.filter(x=>x.status==="flagged").length,v=u.reduce((x,g)=>x+(g.amount||0),0);t({totalWinners:h,pendingKYC:f,totalPayouts:v,flagged:y});const m=[...u].sort((x,g)=>new Date(g.created_at).getTime()-new Date(x.created_at).getTime()).slice(0,5);n(m)}}catch(u){console.error("Error fetching admin stats:",u.message||u),l(u.message||"Failed to load dashboard data")}finally{i(!1)}})()},[]),s)return a.jsx("div",{className:"flex h-96 items-center justify-center",children:a.jsx(vt,{className:"w-8 h-8 animate-spin text-primary"})});if(o){const c=o.includes("Could not find the table")||o.includes("does not exist"),u=o.includes("relationship")||o.includes("foreign key");return a.jsx("div",{className:"p-8 text-center border border-destructive/20 bg-destructive/5 rounded-lg max-w-2xl mx-auto",children:c||u?a.jsxs(a.Fragment,{children:[a.jsx(Pg,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),a.jsx("h3",{className:"font-bold text-xl text-destructive mb-2",children:"Database Setup Required"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:c?"The required database tables were not found.":"The database schema is missing required relationships."}),a.jsx("div",{className:"bg-background p-4 rounded text-left text-xs font-mono border border-border overflow-auto max-h-40 mb-4",children:a.jsxs("p",{className:"text-muted-foreground",children:["// Please run the contents of ",a.jsx("strong",{children:"supabase/schema.sql"})," in your Supabase SQL Editor."]})}),a.jsx(H,{onClick:()=>window.location.reload(),variant:"outline",children:"Reload Page"})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ps,{className:"w-8 h-8 text-destructive mx-auto mb-2"}),a.jsx("h3",{className:"font-bold text-destructive",children:"Error Loading Dashboard"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:o}),a.jsx(H,{onClick:()=>window.location.reload(),variant:"outline",children:"Retry"})]})})}return a.jsxs("div",{className:"space-y-8",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Admin Dashboard"}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[a.jsxs(oe,{children:[a.jsxs(ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Se,{className:"text-sm font-medium",children:"Total Winners"}),a.jsx(lr,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(je,{children:[a.jsx("div",{className:"text-2xl font-bold",children:e.totalWinners}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Lifetime jackpots won"})]})]}),a.jsxs(oe,{children:[a.jsxs(ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Se,{className:"text-sm font-medium",children:"Pending KYC"}),a.jsx(Ug,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(je,{children:[a.jsx("div",{className:"text-2xl font-bold",children:e.pendingKYC}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting verification"})]})]}),a.jsxs(oe,{children:[a.jsxs(ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Se,{className:"text-sm font-medium",children:"Total Payout Volume"}),a.jsx(Rg,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(je,{children:[a.jsx("div",{className:"text-2xl font-bold",children:en(e.totalPayouts)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Total prize value generated"})]})]}),a.jsxs(oe,{children:[a.jsxs(ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Se,{className:"text-sm font-medium",children:"Flagged Accounts"}),a.jsx(Ps,{className:"h-4 w-4 text-destructive"})]}),a.jsxs(je,{children:[a.jsx("div",{className:"text-2xl font-bold text-destructive",children:e.flagged}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Suspicious activity"})]})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-7",children:[a.jsxs(oe,{className:"col-span-4",children:[a.jsx(ke,{children:a.jsx(Se,{children:"Recent Wins"})}),a.jsx(je,{children:a.jsx("div",{className:"space-y-8",children:r.length===0?a.jsx("p",{className:"text-sm text-muted-foreground",children:"No recent activity."}):r.map(c=>a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-9 h-9 rounded-full bg-primary/10 flex items-center justify-center text-primary mr-4",children:a.jsx(lr,{className:"w-4 h-4"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-sm font-medium leading-none",children:["Winner ID: ",c.user_id?c.user_id.slice(0,8):"Unknown","..."]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Won ",a.jsx("span",{className:"text-foreground font-medium",children:en(c.amount)})," in ",c.tier," tier"]})]}),a.jsx("div",{className:"ml-auto font-medium text-xs text-muted-foreground",children:new Date(c.created_at).toLocaleDateString()})]},c.id))})})]}),a.jsxs(oe,{className:"col-span-3",children:[a.jsx(ke,{children:a.jsx(Se,{children:"System Health"})}),a.jsx(je,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-secondary/10",children:[a.jsx("span",{className:"text-sm",children:"Database Status"}),a.jsxs("span",{className:"text-sm text-green-500 font-medium flex items-center gap-1",children:[a.jsx(Tl,{className:"w-3 h-3"})," Operational"]})]}),a.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-secondary/10",children:[a.jsx("span",{className:"text-sm",children:"Payment Gateway"}),a.jsxs("span",{className:"text-sm text-green-500 font-medium flex items-center gap-1",children:[a.jsx(Tl,{className:"w-3 h-3"})," Connected"]})]}),a.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-secondary/10",children:[a.jsx("span",{className:"text-sm",children:"Email Service"}),a.jsxs("span",{className:"text-sm text-yellow-500 font-medium flex items-center gap-1",children:[a.jsx(Tl,{className:"w-3 h-3"})," Degrading"]})]})]})})]})]})]})},Xj=({user:e,open:t,onOpenChange:r,onUpdate:n})=>{const[s,i]=k.useState(!1),[o,l]=k.useState(""),[c,u]=k.useState("user"),[d,h]=k.useState([]),[f,y]=k.useState(!1);yt.useEffect(()=>{e&&t&&(u(e.role),l(""),v(e.id))},[e,t]);const v=async g=>{y(!0);const{data:p}=await Y.from("credit_ledger").select("*").eq("user_id",g).order("created_at",{ascending:!1}).limit(20);p&&h(p),y(!1)},m=async()=>{var g;i(!0);try{const{error:p}=await Y.from("profiles").update({role:c}).eq("id",e==null?void 0:e.id);if(p)throw p;await Y.from("audit_logs").insert({admin_id:(g=(await Y.auth.getUser()).data.user)==null?void 0:g.id,action:"updated_user_role",target_id:e==null?void 0:e.id,target_table:"profiles",details:{old_role:e==null?void 0:e.role,new_role:c}}),n(),alert("Role updated successfully")}catch(p){alert("Error updating role: "+p.message)}finally{i(!1)}},x=async()=>{var g;if(!(!o||isNaN(parseInt(o))||!e)){i(!0);try{const p=parseInt(o),{error:w}=await Y.rpc("add_credits",{target_user_id:e.id,amount:p});if(w){const _=(e.credits||0)+p,{error:N}=await Y.from("profiles").update({credits:_}).eq("id",e.id);if(N)throw N}await Y.from("credit_ledger").insert({user_id:e.id,amount:p,type:"admin_adjustment",description:"Manual credit adjustment via Admin Panel"}),await Y.from("audit_logs").insert({admin_id:(g=(await Y.auth.getUser()).data.user)==null?void 0:g.id,action:"added_credits",target_id:e.id,target_table:"profiles",details:{amount_added:p}}),n(),v(e.id),l(""),alert(`Successfully added ${p} credits.`)}catch(p){alert("Error adding credits: "+p.message)}finally{i(!1)}}};return e?a.jsx(Sv,{open:t,onOpenChange:r,children:a.jsxs(_d,{className:"w-[400px] sm:w-[500px]",children:[a.jsxs(bd,{children:[a.jsxs(kd,{className:"flex items-center gap-2",children:[a.jsx(Nn,{className:"w-5 h-5"})," User Details"]}),a.jsxs(Sd,{children:["Manage account for ",e.username]})]}),a.jsxs("div",{className:"space-y-6 py-6",children:[a.jsxs("div",{className:"p-4 bg-secondary/10 rounded-lg space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"ID:"}),a.jsx("span",{className:"font-mono text-xs",children:e.id})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Email:"}),a.jsx("span",{children:e.email||"N/A"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Joined:"}),a.jsx("span",{children:e.created_at?new Date(e.created_at).toLocaleDateString():"Unknown"})]}),a.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-border/50 mt-2",children:[a.jsx("span",{className:"text-muted-foreground font-medium",children:"Monthly Wins:"}),a.jsx(Be,{variant:"secondary",children:e.monthly_wins})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Dg,{className:"w-4 h-4"})," Credits Management"]}),a.jsxs("div",{className:"p-4 border rounded-lg space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Current Balance"}),a.jsx("span",{className:"text-xl font-bold text-primary",children:e.credits})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(In,{type:"number",placeholder:"Amount to add...",value:o,onChange:g=>l(g.target.value)}),a.jsx(H,{onClick:x,disabled:s,size:"sm",children:s?a.jsx(vt,{className:"w-4 h-4 animate-spin"}):"Add"})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Og,{className:"w-4 h-4"})," Recent Transactions"]}),a.jsx("div",{className:"border rounded-lg overflow-hidden max-h-[200px] overflow-y-auto bg-card",children:f?a.jsx("div",{className:"p-4 text-center",children:a.jsx(vt,{className:"w-4 h-4 animate-spin mx-auto"})}):d.length===0?a.jsx("div",{className:"p-4 text-center text-xs text-muted-foreground",children:"No transactions found."}):a.jsx("div",{className:"text-xs",children:d.map(g=>{var p;return a.jsxs("div",{className:"flex justify-between items-center p-2 border-b last:border-0 hover:bg-muted/50",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[g.amount>0?a.jsx(D1,{className:"w-3 h-3 text-green-500"}):a.jsx(M1,{className:"w-3 h-3 text-red-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium capitalize",children:(p=g.type)==null?void 0:p.replace("_"," ")}),a.jsx("p",{className:"text-[10px] text-muted-foreground",children:new Date(g.created_at).toLocaleDateString()})]})]}),a.jsxs("span",{className:`font-mono font-medium ${g.amount>0?"text-green-500":"text-foreground"}`,children:[g.amount>0?"+":"",g.amount]})]},g.id)})})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Mg,{className:"w-4 h-4"})," Role & Permissions"]}),a.jsxs("div",{className:"p-4 border rounded-lg space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx(H,{variant:c==="user"?"default":"outline",onClick:()=>u("user"),className:"flex-1",size:"sm",children:"User"}),a.jsx(H,{variant:c==="admin"?"destructive":"outline",onClick:()=>u("admin"),className:"flex-1",size:"sm",children:"Admin"})]}),c!==e.role&&a.jsxs(H,{onClick:m,disabled:s,className:"w-full",size:"sm",variant:"secondary",children:[a.jsx(Yc,{className:"w-4 h-4 mr-2"})," Save Role Change"]})]})]})]})]})}):null},Zj=()=>{const[e,t]=k.useState([]),[r,n]=k.useState(!0),[s,i]=k.useState(null),[o,l]=k.useState(""),[c,u]=k.useState(null),[d,h]=k.useState(!1),f=async()=>{n(!0),i(null);try{const{data:m,error:x}=await Y.from("profiles").select("*");if(x)throw x;const g=(m||[]).sort((p,w)=>{const _=p.created_at?new Date(p.created_at).getTime():0;return(w.created_at?new Date(w.created_at).getTime():0)-_});t(g)}catch(m){console.error("Error fetching users:",m),i(m.message||JSON.stringify(m))}finally{n(!1)}};k.useEffect(()=>{f()},[]);const y=m=>{u(m),h(!0)},v=e.filter(m=>m.username&&m.username.toLowerCase().includes(o.toLowerCase())||m.email&&m.email.toLowerCase().includes(o.toLowerCase())||m.id.includes(o));return s?a.jsxs("div",{className:"space-y-6",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"User Management"}),a.jsxs("div",{className:"p-8 text-center border border-destructive/20 bg-destructive/5 rounded-lg max-w-2xl mx-auto",children:[a.jsx(Ps,{className:"w-8 h-8 text-destructive mx-auto mb-2"}),a.jsx("h3",{className:"font-bold text-destructive",children:"Error Loading Users"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:s}),a.jsx(H,{onClick:f,variant:"outline",children:"Retry"})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"User Management"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage player accounts, credits, and roles."})]}),a.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[a.jsxs("div",{className:"relative flex-1 sm:w-64",children:[a.jsx($g,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx(In,{placeholder:"Search Username, ID...",className:"pl-9",value:o,onChange:m=>l(m.target.value)})]}),a.jsxs(H,{variant:"outline",children:[a.jsx(Ag,{className:"w-4 h-4 mr-2"})," Filter"]})]})]}),a.jsx("div",{className:"border rounded-lg bg-card shadow-sm overflow-hidden",children:a.jsxs(Wa,{children:[a.jsx(qa,{children:a.jsxs(Ct,{children:[a.jsx(Le,{children:"User"}),a.jsx(Le,{children:"Role"}),a.jsx(Le,{children:"Credits"}),a.jsx(Le,{children:"Monthly Wins"}),a.jsx(Le,{children:"Joined"}),a.jsx(Le,{className:"text-right",children:"Actions"})]})}),a.jsx(Ka,{children:r?a.jsx(Ct,{children:a.jsx(ue,{colSpan:6,className:"h-24 text-center",children:a.jsx(vt,{className:"w-6 h-6 animate-spin mx-auto text-primary"})})}):v.length===0?a.jsx(Ct,{children:a.jsx(ue,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"No users found."})}):v.map(m=>a.jsxs(Ct,{children:[a.jsxs(ue,{children:[a.jsx("div",{className:"font-medium",children:m.username||"No Username"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:m.email||m.id.slice(0,8)})]}),a.jsx(ue,{children:a.jsx(Be,{variant:m.role==="admin"?"destructive":"secondary",children:m.role})}),a.jsx(ue,{className:"font-mono",children:m.credits}),a.jsx(ue,{children:m.monthly_wins}),a.jsx(ue,{className:"text-muted-foreground text-xs",children:m.created_at?new Date(m.created_at).toLocaleDateString():"-"}),a.jsx(ue,{className:"text-right",children:a.jsx(H,{size:"sm",variant:"ghost",onClick:()=>y(m),children:a.jsx(X1,{className:"w-4 h-4"})})})]},m.id))})]})}),a.jsx(Xj,{user:c,open:d,onOpenChange:h,onUpdate:f})]})},eE=()=>{const[e,t]=k.useState(!0),[r,n]=k.useState(!1),[s,i]=k.useState([]),[o,l]=k.useState("5.00"),[c,u]=k.useState("5.00"),d=async()=>{t(!0);try{const{data:y,error:v}=await Y.from("jackpots").select("*");if(v)throw v;i(y||[]);const m=y==null?void 0:y.find(g=>g.tier==="starter"),x=y==null?void 0:y.find(g=>g.tier==="world");m&&l(m.amount.toString()),x&&u(x.amount.toString())}catch(y){console.error(y)}finally{t(!1)}};k.useEffect(()=>{d()},[]);const h=async(y,v)=>{n(!0);try{const m=parseFloat(v);if(isNaN(m))throw new Error("Invalid amount");const{error:x}=await Y.from("jackpots").update({amount:m}).eq("tier",y);if(x)throw x;await d(),alert(`${y.toUpperCase()} jackpot updated successfully.`)}catch(m){alert("Error: "+m.message)}finally{n(!1)}},f=async y=>{confirm(`Are you sure you want to reset the ${y} jackpot to $5.00?`)&&h(y,"5.00")};return e?a.jsx("div",{className:"flex h-96 items-center justify-center",children:a.jsx(vt,{className:"w-8 h-8 animate-spin text-primary"})}):a.jsxs("div",{className:"space-y-8 max-w-4xl",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Platform Settings"}),a.jsx("p",{className:"text-muted-foreground",children:"Configure game economy and global variables."})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs(oe,{children:[a.jsxs(ke,{children:[a.jsxs(Se,{className:"flex items-center justify-between",children:["Starter Jackpot",a.jsx(Be,{variant:"secondary",children:"Tier 2"})]}),a.jsx(Rs,{children:"Manually override the current jackpot pool."})]}),a.jsx(je,{className:"space-y-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Current Amount ($)"}),a.jsx("div",{className:"flex gap-2",children:a.jsx(In,{type:"number",value:o,onChange:y=>l(y.target.value)})}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Standard increment: +$0.75 / game"})]})}),a.jsxs(Zc,{className:"flex justify-between border-t p-4 bg-muted/20",children:[a.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>f("starter"),className:"text-destructive hover:bg-destructive/10",children:[a.jsx(Cf,{className:"w-4 h-4 mr-2"})," Reset to Base"]}),a.jsxs(H,{size:"sm",onClick:()=>h("starter",o),disabled:r,children:[r?a.jsx(vt,{className:"w-4 h-4 animate-spin"}):a.jsx(Yc,{className:"w-4 h-4 mr-2"})," Update"]})]})]}),a.jsxs(oe,{className:"border-primary/20",children:[a.jsxs(ke,{children:[a.jsxs(Se,{className:"flex items-center justify-between",children:["World Jackpot",a.jsx(Be,{variant:"gold",children:"Tier 3"})]}),a.jsx(Rs,{children:"Manually override the current jackpot pool."})]}),a.jsx(je,{className:"space-y-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Current Amount ($)"}),a.jsx("div",{className:"flex gap-2",children:a.jsx(In,{type:"number",value:c,onChange:y=>u(y.target.value)})}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Standard increment: +$1.00 / game"})]})}),a.jsxs(Zc,{className:"flex justify-between border-t p-4 bg-muted/20",children:[a.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>f("world"),className:"text-destructive hover:bg-destructive/10",children:[a.jsx(Cf,{className:"w-4 h-4 mr-2"})," Reset to Base"]}),a.jsxs(H,{size:"sm",onClick:()=>h("world",c),disabled:r,children:[r?a.jsx(vt,{className:"w-4 h-4 animate-spin"}):a.jsx(Yc,{className:"w-4 h-4 mr-2"})," Update"]})]})]})]}),a.jsxs(oe,{className:"bg-destructive/5 border-destructive/20",children:[a.jsx(ke,{children:a.jsxs(Se,{className:"flex items-center gap-2 text-destructive",children:[a.jsx(vi,{className:"w-5 h-5"})," Danger Zone"]})}),a.jsx(je,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Maintenance Mode"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Disable all new games. Active games will finish."})]}),a.jsx(H,{variant:"destructive",disabled:!0,children:"Enable Maintenance"})]})})]})]})},tE=()=>{const[e,t]=k.useState([]),[r,n]=k.useState(!0),[s,i]=k.useState(null),o=async()=>{n(!0),i(null);try{const{data:l,error:c}=await Y.from("audit_logs").select("*").order("created_at",{ascending:!1}).limit(50);if(c)throw c;const u=Array.from(new Set(l==null?void 0:l.map(d=>d.admin_id).filter(Boolean)));if(u.length>0){const{data:d,error:h}=await Y.from("profiles").select("id, email").in("id",u);h&&console.warn("Could not fetch admin profiles for audit logs:",h);const f=new Map(d==null?void 0:d.map(v=>[v.id,v.email])),y=(l==null?void 0:l.map(v=>({...v,admin_email:f.get(v.admin_id)||"Unknown"})))||[];t(y)}else t(l||[])}catch(l){console.error("Error fetching logs:",l);const c=l.message||(typeof l=="string"?l:JSON.stringify(l));i(c)}finally{n(!1)}};if(k.useEffect(()=>{o()},[]),s){const l=s.toLowerCase().includes("does not exist")||s.toLowerCase().includes("relation");return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Audit Logs"}),a.jsx("p",{className:"text-muted-foreground",children:"Security log of all administrative actions."})]})}),a.jsx("div",{className:"p-8 text-center border border-destructive/20 bg-destructive/5 rounded-lg max-w-2xl mx-auto",children:l?a.jsxs(a.Fragment,{children:[a.jsx(Pg,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),a.jsx("h3",{className:"font-bold text-xl text-destructive mb-2",children:"Table Missing"}),a.jsxs("p",{className:"text-muted-foreground mb-4",children:["The ",a.jsx("code",{children:"audit_logs"})," table does not exist in your database."]}),a.jsx("div",{className:"bg-background p-4 rounded text-left text-xs font-mono border border-border overflow-auto max-h-40 mb-4 mx-auto max-w-md",children:a.jsx("p",{className:"text-muted-foreground",children:"Please run the migration SQL to create the table."})}),a.jsx(H,{onClick:o,variant:"outline",children:"Retry"})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ps,{className:"w-8 h-8 text-destructive mx-auto mb-2"}),a.jsx("h3",{className:"font-bold text-destructive",children:"Error Loading Logs"}),a.jsx("p",{className:"text-muted-foreground mb-4 break-all",children:s}),a.jsx(H,{onClick:o,variant:"outline",children:"Retry"})]})})]})}return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Audit Logs"}),a.jsx("p",{className:"text-muted-foreground",children:"Security log of all administrative actions."})]}),a.jsxs(H,{variant:"outline",onClick:o,children:[a.jsx(Ig,{className:"w-4 h-4 mr-2"})," Refresh"]})]}),a.jsx("div",{className:"border rounded-lg bg-card shadow-sm overflow-hidden",children:a.jsxs(Wa,{children:[a.jsx(qa,{children:a.jsxs(Ct,{children:[a.jsx(Le,{children:"Admin"}),a.jsx(Le,{children:"Action"}),a.jsx(Le,{children:"Target"}),a.jsx(Le,{children:"Details"}),a.jsx(Le,{children:"Time"})]})}),a.jsx(Ka,{children:r?a.jsx(Ct,{children:a.jsx(ue,{colSpan:5,className:"h-24 text-center",children:a.jsx(vt,{className:"w-6 h-6 animate-spin mx-auto text-primary"})})}):e.length===0?a.jsx(Ct,{children:a.jsx(ue,{colSpan:5,className:"h-24 text-center text-muted-foreground",children:"No logs found."})}):e.map(l=>{var c;return a.jsxs(Ct,{children:[a.jsx(ue,{className:"font-medium",children:a.jsx("span",{className:"text-xs",children:l.admin_email||l.admin_id})}),a.jsx(ue,{children:a.jsx("span",{className:"px-2 py-1 rounded bg-secondary text-xs font-mono uppercase",children:l.action})}),a.jsxs(ue,{className:"text-xs text-muted-foreground",children:[l.target_table,":",(c=l.target_id)==null?void 0:c.slice(0,8),"..."]}),a.jsx(ue,{className:"max-w-[300px]",children:a.jsx("code",{className:"text-[10px] bg-muted p-1 rounded block truncate",children:JSON.stringify(l.details)})}),a.jsx(ue,{className:"text-xs text-muted-foreground",children:new Date(l.created_at).toLocaleString()})]},l.id)})})]})})]})},Zs=({children:e})=>a.jsx("div",{className:"bg-background min-h-screen text-foreground font-sans",children:a.jsx(qj,{children:e})});function rE(){return a.jsx(I1,{children:a.jsx(Gx,{children:a.jsxs(Fx,{children:[a.jsx(ut,{path:"/",element:a.jsxs(a.Fragment,{children:[a.jsx(Jn,{}),a.jsx("main",{className:"min-h-screen",children:a.jsx(Lk,{})}),a.jsx(Qn,{})]})}),a.jsx(ut,{path:"/auth",element:a.jsxs(a.Fragment,{children:[a.jsx(Jn,{}),a.jsx("main",{className:"min-h-screen",children:a.jsx(Bj,{})}),a.jsx(Qn,{})]})}),a.jsx(ut,{path:"/dashboard",element:a.jsxs(a.Fragment,{children:[a.jsx(Jn,{}),a.jsx("main",{className:"min-h-screen",children:a.jsx(Uk,{})}),a.jsx(Qn,{})]})}),a.jsx(ut,{path:"/play",element:a.jsxs(a.Fragment,{children:[a.jsx(Jn,{}),a.jsx("main",{className:"min-h-screen",children:a.jsx(Dj,{})}),a.jsx(Qn,{})]})}),a.jsx(ut,{path:"/rules",element:a.jsxs(a.Fragment,{children:[a.jsx(Jn,{}),a.jsx("main",{className:"min-h-screen",children:a.jsx(zj,{})}),a.jsx(Qn,{})]})}),a.jsx(ut,{path:"/terms",element:a.jsxs(a.Fragment,{children:[a.jsx(Jn,{}),a.jsx("main",{className:"min-h-screen",children:a.jsx(Fj,{})}),a.jsx(Qn,{})]})}),a.jsx(ut,{path:"/admin",element:a.jsx(ef,{to:"/admin/dashboard",replace:!0})}),a.jsx(ut,{path:"/admin/dashboard",element:a.jsx(Zs,{children:a.jsx(Yj,{})})}),a.jsx(ut,{path:"/admin/winners",element:a.jsx(Zs,{children:a.jsx(Qj,{})})}),a.jsx(ut,{path:"/admin/users",element:a.jsx(Zs,{children:a.jsx(Zj,{})})}),a.jsx(ut,{path:"/admin/audit",element:a.jsx(Zs,{children:a.jsx(tE,{})})}),a.jsx(ut,{path:"/admin/settings",element:a.jsx(Zs,{children:a.jsx(eE,{})})}),a.jsx(ut,{path:"*",element:a.jsx(ef,{to:"/",replace:!0})})]})})})}const jv=document.getElementById("root");if(!jv)throw new Error("Could not find root element to mount to");const nE=ql.createRoot(jv);nE.render(a.jsx(yt.StrictMode,{children:a.jsx(rE,{})}));
